/** Compute Engine 0.24.1 */
    (function(global,factory){typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'],factory):(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ComputeEngine = {}));})(this, (function (exports) { 'use strict';
var ComputeEngine=(()=>{var Dl=Object.create;var Ot=Object.defineProperty;var hl=Object.getOwnPropertyDescriptor;var gl=Object.getOwnPropertyNames;var xl=Object.getPrototypeOf,El=Object.prototype.hasOwnProperty;var bl=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),yl=(n,e)=>{for(var i in e)Ot(n,i,{get:e[i],enumerable:!0})},So=(n,e,i,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of gl(e))!El.call(n,r)&&r!==i&&Ot(n,r,{get:()=>e[r],enumerable:!(t=hl(e,r))||t.enumerable});return n};var he=(n,e,i)=>(i=n!=null?Dl(xl(n)):{},So(e||!n||!n.__esModule?Ot(i,"default",{value:n,enumerable:!0}):i,n)),Fl=n=>So(Ot({},"__esModule",{value:!0}),n);var De=bl((Xr,To)=>{(function(n){"use strict";var e=Math.cosh||function(l){return Math.abs(l)<1e-9?1-l:(Math.exp(l)+Math.exp(-l))*.5},i=Math.sinh||function(l){return Math.abs(l)<1e-9?l:(Math.exp(l)-Math.exp(-l))*.5},t=function(l){var f=Math.PI/4;if(-f>l||l>f)return Math.cos(l)-1;var d=l*l;return d*(d*(d*(d*(d*(d*(d*(d/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},r=function(l,f){var d=Math.abs(l),c=Math.abs(f);return d<3e3&&c<3e3?Math.sqrt(d*d+c*c):(d<c?(d=c,c=l/f):c=f/l,d*Math.sqrt(1+c*c))},u=function(){throw SyntaxError("Invalid Param")};function o(l,f){var d=Math.abs(l),c=Math.abs(f);return l===0?Math.log(c):f===0?Math.log(d):d<3e3&&c<3e3?Math.log(l*l+f*f)*.5:(l=l/2,f=f/2,.5*Math.log(l*l+f*f)+Math.LN2)}var s=function(l,f){var d={re:0,im:0};if(l==null)d.re=d.im=0;else if(f!==void 0)d.re=l,d.im=f;else switch(typeof l){case"object":if("im"in l&&"re"in l)d.re=l.re,d.im=l.im;else if("abs"in l&&"arg"in l){if(!Number.isFinite(l.abs)&&Number.isFinite(l.arg))return a.INFINITY;d.re=l.abs*Math.cos(l.arg),d.im=l.abs*Math.sin(l.arg)}else if("r"in l&&"phi"in l){if(!Number.isFinite(l.r)&&Number.isFinite(l.phi))return a.INFINITY;d.re=l.r*Math.cos(l.phi),d.im=l.r*Math.sin(l.phi)}else l.length===2?(d.re=l[0],d.im=l[1]):u();break;case"string":d.im=d.re=0;var c=l.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,D=0;c===null&&u();for(var h=0;h<c.length;h++){var g=c[h];g===" "||g==="	"||g===`
`||(g==="+"?m++:g==="-"?D++:g==="i"||g==="I"?(m+D===0&&u(),c[h+1]!==" "&&!isNaN(c[h+1])?(d.im+=parseFloat((D%2?"-":"")+c[h+1]),h++):d.im+=parseFloat((D%2?"-":"")+"1"),m=D=0):((m+D===0||isNaN(g))&&u(),c[h+1]==="i"||c[h+1]==="I"?(d.im+=parseFloat((D%2?"-":"")+g),h++):d.re+=parseFloat((D%2?"-":"")+g),m=D=0))}m+D>0&&u();break;case"number":d.im=0,d.re=l;break;default:u()}return isNaN(d.re)||isNaN(d.im),d};function a(l,f){if(!(this instanceof a))return new a(l,f);var d=s(l,f);this.re=d.re,this.im=d.im}a.prototype={re:0,im:0,sign:function(){var l=this.abs();return new a(this.re/l,this.im/l)},add:function(l,f){var d=new a(l,f);return this.isInfinite()&&d.isInfinite()?a.NAN:this.isInfinite()||d.isInfinite()?a.INFINITY:new a(this.re+d.re,this.im+d.im)},sub:function(l,f){var d=new a(l,f);return this.isInfinite()&&d.isInfinite()?a.NAN:this.isInfinite()||d.isInfinite()?a.INFINITY:new a(this.re-d.re,this.im-d.im)},mul:function(l,f){var d=new a(l,f);return this.isInfinite()&&d.isZero()||this.isZero()&&d.isInfinite()?a.NAN:this.isInfinite()||d.isInfinite()?a.INFINITY:d.im===0&&this.im===0?new a(this.re*d.re,0):new a(this.re*d.re-this.im*d.im,this.re*d.im+this.im*d.re)},div:function(l,f){var d=new a(l,f);if(this.isZero()&&d.isZero()||this.isInfinite()&&d.isInfinite())return a.NAN;if(this.isInfinite()||d.isZero())return a.INFINITY;if(this.isZero()||d.isInfinite())return a.ZERO;l=this.re,f=this.im;var c=d.re,m=d.im,D,h;return m===0?new a(l/c,f/c):Math.abs(c)<Math.abs(m)?(h=c/m,D=c*h+m,new a((l*h+f)/D,(f*h-l)/D)):(h=m/c,D=m*h+c,new a((l+f*h)/D,(f-l*h)/D))},pow:function(l,f){var d=new a(l,f);if(l=this.re,f=this.im,d.isZero())return a.ONE;if(d.im===0){if(f===0&&l>0)return new a(Math.pow(l,d.re),0);if(l===0)switch((d.re%4+4)%4){case 0:return new a(Math.pow(f,d.re),0);case 1:return new a(0,Math.pow(f,d.re));case 2:return new a(-Math.pow(f,d.re),0);case 3:return new a(0,-Math.pow(f,d.re))}}if(l===0&&f===0&&d.re>0&&d.im>=0)return a.ZERO;var c=Math.atan2(f,l),m=o(l,f);return l=Math.exp(d.re*m-d.im*c),f=d.im*m+d.re*c,new a(l*Math.cos(f),l*Math.sin(f))},sqrt:function(){var l=this.re,f=this.im,d=this.abs(),c,m;if(l>=0){if(f===0)return new a(Math.sqrt(l),0);c=.5*Math.sqrt(2*(d+l))}else c=Math.abs(f)/Math.sqrt(2*(d-l));return l<=0?m=.5*Math.sqrt(2*(d-l)):m=Math.abs(f)/Math.sqrt(2*(d+l)),new a(c,f<0?-m:m)},exp:function(){var l=Math.exp(this.re);return this.im,new a(l*Math.cos(this.im),l*Math.sin(this.im))},expm1:function(){var l=this.re,f=this.im;return new a(Math.expm1(l)*Math.cos(f)+t(f),Math.exp(l)*Math.sin(f))},log:function(){var l=this.re,f=this.im;return f===0&&l>0,new a(o(l,f),Math.atan2(f,l))},abs:function(){return r(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var l=this.re,f=this.im;return new a(Math.sin(l)*e(f),Math.cos(l)*i(f))},cos:function(){var l=this.re,f=this.im;return new a(Math.cos(l)*e(f),-Math.sin(l)*i(f))},tan:function(){var l=2*this.re,f=2*this.im,d=Math.cos(l)+e(f);return new a(Math.sin(l)/d,i(f)/d)},cot:function(){var l=2*this.re,f=2*this.im,d=Math.cos(l)-e(f);return new a(-Math.sin(l)/d,i(f)/d)},sec:function(){var l=this.re,f=this.im,d=.5*e(2*f)+.5*Math.cos(2*l);return new a(Math.cos(l)*e(f)/d,Math.sin(l)*i(f)/d)},csc:function(){var l=this.re,f=this.im,d=.5*e(2*f)-.5*Math.cos(2*l);return new a(Math.sin(l)*e(f)/d,-Math.cos(l)*i(f)/d)},asin:function(){var l=this.re,f=this.im,d=new a(f*f-l*l+1,-2*l*f).sqrt(),c=new a(d.re-f,d.im+l).log();return new a(c.im,-c.re)},acos:function(){var l=this.re,f=this.im,d=new a(f*f-l*l+1,-2*l*f).sqrt(),c=new a(d.re-f,d.im+l).log();return new a(Math.PI/2-c.im,c.re)},atan:function(){var l=this.re,f=this.im;if(l===0){if(f===1)return new a(0,1/0);if(f===-1)return new a(0,-1/0)}var d=l*l+(1-f)*(1-f),c=new a((1-f*f-l*l)/d,-2*l/d).log();return new a(-.5*c.im,.5*c.re)},acot:function(){var l=this.re,f=this.im;if(f===0)return new a(Math.atan2(1,l),0);var d=l*l+f*f;return d!==0?new a(l/d,-f/d).atan():new a(l!==0?l/0:0,f!==0?-f/0:0).atan()},asec:function(){var l=this.re,f=this.im;if(l===0&&f===0)return new a(0,1/0);var d=l*l+f*f;return d!==0?new a(l/d,-f/d).acos():new a(l!==0?l/0:0,f!==0?-f/0:0).acos()},acsc:function(){var l=this.re,f=this.im;if(l===0&&f===0)return new a(Math.PI/2,1/0);var d=l*l+f*f;return d!==0?new a(l/d,-f/d).asin():new a(l!==0?l/0:0,f!==0?-f/0:0).asin()},sinh:function(){var l=this.re,f=this.im;return new a(i(l)*Math.cos(f),e(l)*Math.sin(f))},cosh:function(){var l=this.re,f=this.im;return new a(e(l)*Math.cos(f),i(l)*Math.sin(f))},tanh:function(){var l=2*this.re,f=2*this.im,d=e(l)+Math.cos(f);return new a(i(l)/d,Math.sin(f)/d)},coth:function(){var l=2*this.re,f=2*this.im,d=e(l)-Math.cos(f);return new a(i(l)/d,-Math.sin(f)/d)},csch:function(){var l=this.re,f=this.im,d=Math.cos(2*f)-e(2*l);return new a(-2*i(l)*Math.cos(f)/d,2*e(l)*Math.sin(f)/d)},sech:function(){var l=this.re,f=this.im,d=Math.cos(2*f)+e(2*l);return new a(2*e(l)*Math.cos(f)/d,-2*i(l)*Math.sin(f)/d)},asinh:function(){var l=this.im;this.im=-this.re,this.re=l;var f=this.asin();return this.re=-this.im,this.im=l,l=f.re,f.re=-f.im,f.im=l,f},acosh:function(){var l=this.acos();if(l.im<=0){var f=l.re;l.re=-l.im,l.im=f}else{var f=l.im;l.im=-l.re,l.re=f}return l},atanh:function(){var l=this.re,f=this.im,d=l>1&&f===0,c=1-l,m=1+l,D=c*c+f*f,h=D!==0?new a((m*c-f*f)/D,(f*c+m*f)/D):new a(l!==-1?l/0:0,f!==0?f/0:0),g=h.re;return h.re=o(h.re,h.im)/2,h.im=Math.atan2(h.im,g)/2,d&&(h.im=-h.im),h},acoth:function(){var l=this.re,f=this.im;if(l===0&&f===0)return new a(0,Math.PI/2);var d=l*l+f*f;return d!==0?new a(l/d,-f/d).atanh():new a(l!==0?l/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var l=this.re,f=this.im;if(f===0)return new a(l!==0?Math.log(l+Math.sqrt(l*l+1)):1/0,0);var d=l*l+f*f;return d!==0?new a(l/d,-f/d).asinh():new a(l!==0?l/0:0,f!==0?-f/0:0).asinh()},asech:function(){var l=this.re,f=this.im;if(this.isZero())return a.INFINITY;var d=l*l+f*f;return d!==0?new a(l/d,-f/d).acosh():new a(l!==0?l/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return a.INFINITY;if(this.isInfinite())return a.ZERO;var l=this.re,f=this.im,d=l*l+f*f;return new a(l/d,-f/d)},conjugate:function(){return new a(this.re,-this.im)},neg:function(){return new a(-this.re,-this.im)},ceil:function(l){return l=Math.pow(10,l||0),new a(Math.ceil(this.re*l)/l,Math.ceil(this.im*l)/l)},floor:function(l){return l=Math.pow(10,l||0),new a(Math.floor(this.re*l)/l,Math.floor(this.im*l)/l)},round:function(l){return l=Math.pow(10,l||0),new a(Math.round(this.re*l)/l,Math.round(this.im*l)/l)},equals:function(l,f){var d=new a(l,f);return Math.abs(d.re-this.re)<=a.EPSILON&&Math.abs(d.im-this.im)<=a.EPSILON},clone:function(){return new a(this.re,this.im)},toString:function(){var l=this.re,f=this.im,d="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(l)<a.EPSILON&&(l=0),Math.abs(f)<a.EPSILON&&(f=0),f===0?d+l:(l!==0?(d+=l,d+=" ",f<0?(f=-f,d+="-"):d+="+",d+=" "):f<0&&(f=-f,d+="-"),f!==1&&(d+=f),d+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},a.ZERO=new a(0,0),a.ONE=new a(1,0),a.I=new a(0,1),a.PI=new a(Math.PI,0),a.E=new a(Math.E,0),a.INFINITY=new a(1/0,1/0),a.NAN=new a(NaN,NaN),a.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return a}):typeof Xr=="object"?(Object.defineProperty(a,"__esModule",{value:!0}),a.default=a,a.Complex=a,To.exports=a):n.Complex=a})(Xr)});var ec={};yl(ec,{ADDITION_PRECEDENCE:()=>oe,ARROW_PRECEDENCE:()=>fn,ASSIGNMENT_PRECEDENCE:()=>gi,COMPARISON_PRECEDENCE:()=>w,ComputeEngine:()=>Xi,DIVISION_PRECEDENCE:()=>dn,EXPONENTIATION_PRECEDENCE:()=>Cl,MULTIPLICATION_PRECEDENCE:()=>we,POSTFIX_PRECEDENCE:()=>Rt,isEnvironmentEntry:()=>Qr,isExpressionEntry:()=>Wr,isFunctionEntry:()=>Al,isInfixEntry:()=>Pt,isMatchfixEntry:()=>xi,isPostfixEntry:()=>Lt,isPrefixEntry:()=>Ki,isSymbolEntry:()=>Yr,version:()=>Kd});var w=245,gi=260,fn=270,oe=275,we=390,dn=600,Cl=700,Rt=810;function Wr(n){return!("kind"in n)||n.kind==="expression"}function Yr(n){return"kind"in n&&n.kind==="symbol"}function Al(n){return"kind"in n&&n.kind==="function"}function xi(n){return"kind"in n&&n.kind==="matchfix"}function Pt(n){return"kind"in n&&n.kind==="infix"}function Ki(n){return"kind"in n&&n.kind==="prefix"}function Lt(n){return"kind"in n&&n.kind==="postfix"}function Qr(n){return"kind"in n&&n.kind==="environment"}var Qi=he(De(),1);var Ei=9e15,$n=1e9,Kr="0123456789abcdef",Vt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$t="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",eu={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ei,maxE:Ei,crypto:!1},Mo,Bn,I=!0,Ut="[DecimalError] ",Vn=Ut+"Invalid argument: ",Oo=Ut+"Precision limit exceeded",Ro=Ut+"crypto unavailable",Po="[object Decimal]",Te=Math.floor,xe=Math.pow,Bl=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,vl=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Nl=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Lo=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,en=1e7,_=7,_l=9007199254740991,Sl=Vt.length-1,nu=$t.length-1,b={toStringTag:Po};b.absoluteValue=b.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),v(n)};b.ceil=function(){return v(new this.constructor(this),this.e+1,2)};b.clampedTo=b.clamp=function(n,e){var i,t=this,r=t.constructor;if(n=new r(n),e=new r(e),!n.s||!e.s)return new r(NaN);if(n.gt(e))throw Error(Vn+e);return i=t.cmp(n),i<0?n:t.cmp(e)>0?e:new r(t)};b.comparedTo=b.cmp=function(n){var e,i,t,r,u=this,o=u.d,s=(n=new u.constructor(n)).d,a=u.s,l=n.s;if(!o||!s)return!a||!l?NaN:a!==l?a:o===s?0:!o^a<0?1:-1;if(!o[0]||!s[0])return o[0]?a:s[0]?-l:0;if(a!==l)return a;if(u.e!==n.e)return u.e>n.e^a<0?1:-1;for(t=o.length,r=s.length,e=0,i=t<r?t:r;e<i;++e)if(o[e]!==s[e])return o[e]>s[e]^a<0?1:-1;return t===r?0:t>r^a<0?1:-1};b.cosine=b.cos=function(){var n,e,i=this,t=i.constructor;return i.d?i.d[0]?(n=t.precision,e=t.rounding,t.precision=n+Math.max(i.e,i.sd())+_,t.rounding=1,i=Tl(t,Uo(t,i)),t.precision=n,t.rounding=e,v(Bn==2||Bn==3?i.neg():i,n,e,!0)):new t(1):new t(NaN)};b.cubeRoot=b.cbrt=function(){var n,e,i,t,r,u,o,s,a,l,f=this,d=f.constructor;if(!f.isFinite()||f.isZero())return new d(f);for(I=!1,u=f.s*xe(f.s*f,1/3),!u||Math.abs(u)==1/0?(i=ve(f.d),n=f.e,(u=(n-i.length+1)%3)&&(i+=u==1||u==-2?"0":"00"),u=xe(i,1/3),n=Te((n+1)/3)-(n%3==(n<0?-1:2)),u==1/0?i="5e"+n:(i=u.toExponential(),i=i.slice(0,i.indexOf("e")+1)+n),t=new d(i),t.s=f.s):t=new d(u.toString()),o=(n=d.precision)+3;;)if(s=t,a=s.times(s).times(s),l=a.plus(f),t=ee(l.plus(f).times(s),l.plus(a),o+2,1),ve(s.d).slice(0,o)===(i=ve(t.d)).slice(0,o))if(i=i.slice(o-3,o+1),i=="9999"||!r&&i=="4999"){if(!r&&(v(s,n+1,0),s.times(s).times(s).eq(f))){t=s;break}o+=4,r=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(v(t,n+1,1),e=!t.times(t).times(t).eq(f));break}return I=!0,v(t,n,d.rounding,e)};b.decimalPlaces=b.dp=function(){var n,e=this.d,i=NaN;if(e){if(n=e.length-1,i=(n-Te(this.e/_))*_,n=e[n],n)for(;n%10==0;n/=10)i--;i<0&&(i=0)}return i};b.dividedBy=b.div=function(n){return ee(this,new this.constructor(n))};b.dividedToIntegerBy=b.divToInt=function(n){var e=this,i=e.constructor;return v(ee(e,new i(n),0,1,1),i.precision,i.rounding)};b.equals=b.eq=function(n){return this.cmp(n)===0};b.floor=function(){return v(new this.constructor(this),this.e+1,3)};b.greaterThan=b.gt=function(n){return this.cmp(n)>0};b.greaterThanOrEqualTo=b.gte=function(n){var e=this.cmp(n);return e==1||e===0};b.hyperbolicCosine=b.cosh=function(){var n,e,i,t,r,u=this,o=u.constructor,s=new o(1);if(!u.isFinite())return new o(u.s?1/0:NaN);if(u.isZero())return s;i=o.precision,t=o.rounding,o.precision=i+Math.max(u.e,u.sd())+4,o.rounding=1,r=u.d.length,r<32?(n=Math.ceil(r/3),e=(1/jt(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),u=bi(o,1,u.times(e),new o(1),!0);for(var a,l=n,f=new o(8);l--;)a=u.times(u),u=s.minus(a.times(f.minus(a.times(f))));return v(u,o.precision=i,o.rounding=t,!0)};b.hyperbolicSine=b.sinh=function(){var n,e,i,t,r=this,u=r.constructor;if(!r.isFinite()||r.isZero())return new u(r);if(e=u.precision,i=u.rounding,u.precision=e+Math.max(r.e,r.sd())+4,u.rounding=1,t=r.d.length,t<3)r=bi(u,2,r,r,!0);else{n=1.4*Math.sqrt(t),n=n>16?16:n|0,r=r.times(1/jt(5,n)),r=bi(u,2,r,r,!0);for(var o,s=new u(5),a=new u(16),l=new u(20);n--;)o=r.times(r),r=r.times(s.plus(o.times(a.times(o).plus(l))))}return u.precision=e,u.rounding=i,v(r,e,i,!0)};b.hyperbolicTangent=b.tanh=function(){var n,e,i=this,t=i.constructor;return i.isFinite()?i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+7,t.rounding=1,ee(i.sinh(),i.cosh(),t.precision=n,t.rounding=e)):new t(i.s)};b.inverseCosine=b.acos=function(){var n,e=this,i=e.constructor,t=e.abs().cmp(1),r=i.precision,u=i.rounding;return t!==-1?t===0?e.isNeg()?Ke(i,r,u):new i(0):new i(NaN):e.isZero()?Ke(i,r+4,u).times(.5):(i.precision=r+6,i.rounding=1,e=e.asin(),n=Ke(i,r+4,u).times(.5),i.precision=r,i.rounding=u,n.minus(e))};b.inverseHyperbolicCosine=b.acosh=function(){var n,e,i=this,t=i.constructor;return i.lte(1)?new t(i.eq(1)?0:NaN):i.isFinite()?(n=t.precision,e=t.rounding,t.precision=n+Math.max(Math.abs(i.e),i.sd())+4,t.rounding=1,I=!1,i=i.times(i).minus(1).sqrt().plus(i),I=!0,t.precision=n,t.rounding=e,i.ln()):new t(i)};b.inverseHyperbolicSine=b.asinh=function(){var n,e,i=this,t=i.constructor;return!i.isFinite()||i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+2*Math.max(Math.abs(i.e),i.sd())+6,t.rounding=1,I=!1,i=i.times(i).plus(1).sqrt().plus(i),I=!0,t.precision=n,t.rounding=e,i.ln())};b.inverseHyperbolicTangent=b.atanh=function(){var n,e,i,t,r=this,u=r.constructor;return r.isFinite()?r.e>=0?new u(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(n=u.precision,e=u.rounding,t=r.sd(),Math.max(t,n)<2*-r.e-1?v(new u(r),n,e,!0):(u.precision=i=t-r.e,r=ee(r.plus(1),new u(1).minus(r),i+n,1),u.precision=n+4,u.rounding=1,r=r.ln(),u.precision=n,u.rounding=e,r.times(.5))):new u(NaN)};b.inverseSine=b.asin=function(){var n,e,i,t,r=this,u=r.constructor;return r.isZero()?new u(r):(e=r.abs().cmp(1),i=u.precision,t=u.rounding,e!==-1?e===0?(n=Ke(u,i+4,t).times(.5),n.s=r.s,n):new u(NaN):(u.precision=i+6,u.rounding=1,r=r.div(new u(1).minus(r.times(r)).sqrt().plus(1)).atan(),u.precision=i,u.rounding=t,r.times(2)))};b.inverseTangent=b.atan=function(){var n,e,i,t,r,u,o,s,a,l=this,f=l.constructor,d=f.precision,c=f.rounding;if(l.isFinite()){if(l.isZero())return new f(l);if(l.abs().eq(1)&&d+4<=nu)return o=Ke(f,d+4,c).times(.25),o.s=l.s,o}else{if(!l.s)return new f(NaN);if(d+4<=nu)return o=Ke(f,d+4,c).times(.5),o.s=l.s,o}for(f.precision=s=d+10,f.rounding=1,i=Math.min(28,s/_+2|0),n=i;n;--n)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(I=!1,e=Math.ceil(s/_),t=1,a=l.times(l),o=new f(l),r=l;n!==-1;)if(r=r.times(a),u=o.minus(r.div(t+=2)),r=r.times(a),o=u.plus(r.div(t+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===u.d[n]&&n--;);return i&&(o=o.times(2<<i-1)),I=!0,v(o,f.precision=d,f.rounding=c,!0)};b.isFinite=function(){return!!this.d};b.isInteger=b.isInt=function(){return!!this.d&&Te(this.e/_)>this.d.length-2};b.isNaN=function(){return!this.s};b.isNegative=b.isNeg=function(){return this.s<0};b.isPositive=b.isPos=function(){return this.s>0};b.isZero=function(){return!!this.d&&this.d[0]===0};b.lessThan=b.lt=function(n){return this.cmp(n)<0};b.lessThanOrEqualTo=b.lte=function(n){return this.cmp(n)<1};b.logarithm=b.log=function(n){var e,i,t,r,u,o,s,a,l=this,f=l.constructor,d=f.precision,c=f.rounding,m=5;if(n==null)n=new f(10),e=!0;else{if(n=new f(n),i=n.d,n.s<0||!i||!i[0]||n.eq(1))return new f(NaN);e=n.eq(10)}if(i=l.d,l.s<0||!i||!i[0]||l.eq(1))return new f(i&&!i[0]?-1/0:l.s!=1?NaN:i?0:1/0);if(e)if(i.length>1)u=!0;else{for(r=i[0];r%10===0;)r/=10;u=r!==1}if(I=!1,s=d+m,o=qn(l,s),t=e?zt(f,s+10):qn(n,s),a=ee(o,t,s,1),et(a.d,r=d,c))do if(s+=10,o=qn(l,s),t=e?zt(f,s+10):qn(n,s),a=ee(o,t,s,1),!u){+ve(a.d).slice(r+1,r+15)+1==1e14&&(a=v(a,d+1,0));break}while(et(a.d,r+=10,c));return I=!0,v(a,d,c)};b.minus=b.sub=function(n){var e,i,t,r,u,o,s,a,l,f,d,c,m=this,D=m.constructor;if(n=new D(n),!m.d||!n.d)return!m.s||!n.s?n=new D(NaN):m.d?n.s=-n.s:n=new D(n.d||m.s!==n.s?m:NaN),n;if(m.s!=n.s)return n.s=-n.s,m.plus(n);if(l=m.d,c=n.d,s=D.precision,a=D.rounding,!l[0]||!c[0]){if(c[0])n.s=-n.s;else if(l[0])n=new D(m);else return new D(a===3?-0:0);return I?v(n,s,a):n}if(i=Te(n.e/_),f=Te(m.e/_),l=l.slice(),u=f-i,u){for(d=u<0,d?(e=l,u=-u,o=c.length):(e=c,i=f,o=l.length),t=Math.max(Math.ceil(s/_),o)+2,u>t&&(u=t,e.length=1),e.reverse(),t=u;t--;)e.push(0);e.reverse()}else{for(t=l.length,o=c.length,d=t<o,d&&(o=t),t=0;t<o;t++)if(l[t]!=c[t]){d=l[t]<c[t];break}u=0}for(d&&(e=l,l=c,c=e,n.s=-n.s),o=l.length,t=c.length-o;t>0;--t)l[o++]=0;for(t=c.length;t>u;){if(l[--t]<c[t]){for(r=t;r&&l[--r]===0;)l[r]=en-1;--l[r],l[t]+=en}l[t]-=c[t]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(n.d=l,n.e=Gt(l,i),I?v(n,s,a):n):new D(a===3?-0:0)};b.modulo=b.mod=function(n){var e,i=this,t=i.constructor;return n=new t(n),!i.d||!n.s||n.d&&!n.d[0]?new t(NaN):!n.d||i.d&&!i.d[0]?v(new t(i),t.precision,t.rounding):(I=!1,t.modulo==9?(e=ee(i,n.abs(),0,3,1),e.s*=n.s):e=ee(i,n,0,t.modulo,1),e=e.times(n),I=!0,i.minus(e))};b.naturalExponential=b.exp=function(){return iu(this)};b.naturalLogarithm=b.ln=function(){return qn(this)};b.negated=b.neg=function(){var n=new this.constructor(this);return n.s=-n.s,v(n)};b.plus=b.add=function(n){var e,i,t,r,u,o,s,a,l,f,d=this,c=d.constructor;if(n=new c(n),!d.d||!n.d)return!d.s||!n.s?n=new c(NaN):d.d||(n=new c(n.d||d.s===n.s?d:NaN)),n;if(d.s!=n.s)return n.s=-n.s,d.minus(n);if(l=d.d,f=n.d,s=c.precision,a=c.rounding,!l[0]||!f[0])return f[0]||(n=new c(d)),I?v(n,s,a):n;if(u=Te(d.e/_),t=Te(n.e/_),l=l.slice(),r=u-t,r){for(r<0?(i=l,r=-r,o=f.length):(i=f,t=u,o=l.length),u=Math.ceil(s/_),o=u>o?u+1:o+1,r>o&&(r=o,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for(o=l.length,r=f.length,o-r<0&&(r=o,i=f,f=l,l=i),e=0;r;)e=(l[--r]=l[r]+f[r]+e)/en|0,l[r]%=en;for(e&&(l.unshift(e),++t),o=l.length;l[--o]==0;)l.pop();return n.d=l,n.e=Gt(l,t),I?v(n,s,a):n};b.precision=b.sd=function(n){var e,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Vn+n);return i.d?(e=qo(i.d),n&&i.e+1>e&&(e=i.e+1)):e=NaN,e};b.round=function(){var n=this,e=n.constructor;return v(new e(n),n.e+1,e.rounding)};b.sine=b.sin=function(){var n,e,i=this,t=i.constructor;return i.isFinite()?i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+Math.max(i.e,i.sd())+_,t.rounding=1,i=kl(t,Uo(t,i)),t.precision=n,t.rounding=e,v(Bn>2?i.neg():i,n,e,!0)):new t(NaN)};b.squareRoot=b.sqrt=function(){var n,e,i,t,r,u,o=this,s=o.d,a=o.e,l=o.s,f=o.constructor;if(l!==1||!s||!s[0])return new f(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(I=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=ve(s),(e.length+a)%2==0&&(e+="0"),l=Math.sqrt(e),a=Te((a+1)/2)-(a<0||a%2),l==1/0?e="5e"+a:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+a),t=new f(e)):t=new f(l.toString()),i=(a=f.precision)+3;;)if(u=t,t=u.plus(ee(o,u,i+2,1)).times(.5),ve(u.d).slice(0,i)===(e=ve(t.d)).slice(0,i))if(e=e.slice(i-3,i+1),e=="9999"||!r&&e=="4999"){if(!r&&(v(u,a+1,0),u.times(u).eq(o))){t=u;break}i+=4,r=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(v(t,a+1,1),n=!t.times(t).eq(o));break}return I=!0,v(t,a,f.rounding,n)};b.tangent=b.tan=function(){var n,e,i=this,t=i.constructor;return i.isFinite()?i.isZero()?new t(i):(n=t.precision,e=t.rounding,t.precision=n+10,t.rounding=1,i=i.sin(),i.s=1,i=ee(i,new t(1).minus(i.times(i)).sqrt(),n+10,0),t.precision=n,t.rounding=e,v(Bn==2||Bn==4?i.neg():i,n,e,!0)):new t(NaN)};b.times=b.mul=function(n){var e,i,t,r,u,o,s,a,l,f=this,d=f.constructor,c=f.d,m=(n=new d(n)).d;if(n.s*=f.s,!c||!c[0]||!m||!m[0])return new d(!n.s||c&&!c[0]&&!m||m&&!m[0]&&!c?NaN:!c||!m?n.s/0:n.s*0);for(i=Te(f.e/_)+Te(n.e/_),a=c.length,l=m.length,a<l&&(u=c,c=m,m=u,o=a,a=l,l=o),u=[],o=a+l,t=o;t--;)u.push(0);for(t=l;--t>=0;){for(e=0,r=a+t;r>t;)s=u[r]+m[t]*c[r-t-1]+e,u[r--]=s%en|0,e=s/en|0;u[r]=(u[r]+e)%en|0}for(;!u[--o];)u.pop();return e?++i:u.shift(),n.d=u,n.e=Gt(u,i),I?v(n,d.precision,d.rounding):n};b.toBinary=function(n,e){return ru(this,2,n,e)};b.toDecimalPlaces=b.toDP=function(n,e){var i=this,t=i.constructor;return i=new t(i),n===void 0?i:(Me(n,0,$n),e===void 0?e=t.rounding:Me(e,0,8),v(i,n+i.e+1,e))};b.toExponential=function(n,e){var i,t=this,r=t.constructor;return n===void 0?i=cn(t,!0):(Me(n,0,$n),e===void 0?e=r.rounding:Me(e,0,8),t=v(new r(t),n+1,e),i=cn(t,!0,n+1)),t.isNeg()&&!t.isZero()?"-"+i:i};b.toFixed=function(n,e){var i,t,r=this,u=r.constructor;return n===void 0?i=cn(r):(Me(n,0,$n),e===void 0?e=u.rounding:Me(e,0,8),t=v(new u(r),n+r.e+1,e),i=cn(t,!1,n+t.e+1)),r.isNeg()&&!r.isZero()?"-"+i:i};b.toFraction=function(n){var e,i,t,r,u,o,s,a,l,f,d,c,m=this,D=m.d,h=m.constructor;if(!D)return new h(m);if(l=i=new h(1),t=a=new h(0),e=new h(t),u=e.e=qo(D)-m.e-1,o=u%_,e.d[0]=xe(10,o<0?_+o:o),n==null)n=u>0?e:l;else{if(s=new h(n),!s.isInt()||s.lt(l))throw Error(Vn+s);n=s.gt(e)?u>0?e:l:s}for(I=!1,s=new h(ve(D)),f=h.precision,h.precision=u=D.length*_*2;d=ee(s,e,0,1,1),r=i.plus(d.times(t)),r.cmp(n)!=1;)i=t,t=r,r=l,l=a.plus(d.times(r)),a=r,r=e,e=s.minus(d.times(r)),s=r;return r=ee(n.minus(i),t,0,1,1),a=a.plus(r.times(l)),i=i.plus(r.times(t)),a.s=l.s=m.s,c=ee(l,t,u,1).minus(m).abs().cmp(ee(a,i,u,1).minus(m).abs())<1?[l,t]:[a,i],h.precision=f,I=!0,c};b.toHexadecimal=b.toHex=function(n,e){return ru(this,16,n,e)};b.toNearest=function(n,e){var i=this,t=i.constructor;if(i=new t(i),n==null){if(!i.d)return i;n=new t(1),e=t.rounding}else{if(n=new t(n),e===void 0?e=t.rounding:Me(e,0,8),!i.d)return n.s?i:n;if(!n.d)return n.s&&(n.s=i.s),n}return n.d[0]?(I=!1,i=ee(i,n,0,e,1).times(n),I=!0,v(i)):(n.s=i.s,i=n),i};b.toNumber=function(){return+this};b.toOctal=function(n,e){return ru(this,8,n,e)};b.toPower=b.pow=function(n){var e,i,t,r,u,o,s=this,a=s.constructor,l=+(n=new a(n));if(!s.d||!n.d||!s.d[0]||!n.d[0])return new a(xe(+s,l));if(s=new a(s),s.eq(1))return s;if(t=a.precision,u=a.rounding,n.eq(1))return v(s,t,u);if(e=Te(n.e/_),e>=n.d.length-1&&(i=l<0?-l:l)<=_l)return r=Vo(a,s,i,t),n.s<0?new a(1).div(r):v(r,t,u);if(o=s.s,o<0){if(e<n.d.length-1)return new a(NaN);if(n.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return i=xe(+s,l),e=i==0||!isFinite(i)?Te(l*(Math.log("0."+ve(s.d))/Math.LN10+s.e+1)):new a(i+"").e,e>a.maxE+1||e<a.minE-1?new a(e>0?o/0:0):(I=!1,a.rounding=s.s=1,i=Math.min(12,(e+"").length),r=iu(n.times(qn(s,t+i)),t),r.d&&(r=v(r,t+5,1),et(r.d,t,u)&&(e=t+10,r=v(iu(n.times(qn(s,e+i)),e),e+5,1),+ve(r.d).slice(t+1,t+15)+1==1e14&&(r=v(r,t+1,0)))),r.s=o,I=!0,a.rounding=u,v(r,t,u))};b.toPrecision=function(n,e){var i,t=this,r=t.constructor;return n===void 0?i=cn(t,t.e<=r.toExpNeg||t.e>=r.toExpPos):(Me(n,1,$n),e===void 0?e=r.rounding:Me(e,0,8),t=v(new r(t),n,e),i=cn(t,n<=t.e||t.e<=r.toExpNeg,n)),t.isNeg()&&!t.isZero()?"-"+i:i};b.toSignificantDigits=b.toSD=function(n,e){var i=this,t=i.constructor;return n===void 0?(n=t.precision,e=t.rounding):(Me(n,1,$n),e===void 0?e=t.rounding:Me(e,0,8)),v(new t(i),n,e)};b.toString=function(){var n=this,e=n.constructor,i=cn(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+i:i};b.truncated=b.trunc=function(){return v(new this.constructor(this),this.e+1,1)};b.valueOf=b.toJSON=function(){var n=this,e=n.constructor,i=cn(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+i:i};function ve(n){var e,i,t,r=n.length-1,u="",o=n[0];if(r>0){for(u+=o,e=1;e<r;e++)t=n[e]+"",i=_-t.length,i&&(u+=Ln(i)),u+=t;o=n[e],t=o+"",i=_-t.length,i&&(u+=Ln(i))}else if(o===0)return"0";for(;o%10===0;)o/=10;return u+o}function Me(n,e,i){if(n!==~~n||n<e||n>i)throw Error(Vn+n)}function et(n,e,i,t){var r,u,o,s;for(u=n[0];u>=10;u/=10)--e;return--e<0?(e+=_,r=0):(r=Math.ceil((e+1)/_),e%=_),u=xe(10,_-e),s=n[r]%u|0,t==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=i<4&&s==99999||i>3&&s==49999||s==5e4||s==0):o=(i<4&&s+1==u||i>3&&s+1==u/2)&&(n[r+1]/u/100|0)==xe(10,e-2)-1||(s==u/2||s==0)&&(n[r+1]/u/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(t||i<4)&&s==9999||!t&&i>3&&s==4999):o=((t||i<4)&&s+1==u||!t&&i>3&&s+1==u/2)&&(n[r+1]/u/1e3|0)==xe(10,e-3)-1,o}function qt(n,e,i){for(var t,r=[0],u,o=0,s=n.length;o<s;){for(u=r.length;u--;)r[u]*=e;for(r[0]+=Kr.indexOf(n.charAt(o++)),t=0;t<r.length;t++)r[t]>i-1&&(r[t+1]===void 0&&(r[t+1]=0),r[t+1]+=r[t]/i|0,r[t]%=i)}return r.reverse()}function Tl(n,e){var i,t,r;if(e.isZero())return e;t=e.d.length,t<32?(i=Math.ceil(t/3),r=(1/jt(4,i)).toString()):(i=16,r="2.3283064365386962890625e-10"),n.precision+=i,e=bi(n,1,e.times(r),new n(1));for(var u=i;u--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=i,e}var ee=function(){function n(t,r,u){var o,s=0,a=t.length;for(t=t.slice();a--;)o=t[a]*r+s,t[a]=o%u|0,s=o/u|0;return s&&t.unshift(s),t}function e(t,r,u,o){var s,a;if(u!=o)a=u>o?1:-1;else for(s=a=0;s<u;s++)if(t[s]!=r[s]){a=t[s]>r[s]?1:-1;break}return a}function i(t,r,u,o){for(var s=0;u--;)t[u]-=s,s=t[u]<r[u]?1:0,t[u]=s*o+t[u]-r[u];for(;!t[0]&&t.length>1;)t.shift()}return function(t,r,u,o,s,a){var l,f,d,c,m,D,h,g,A,B,C,T,j,Z,_e,ze,ke,Hr,Xe,wt,Mt=t.constructor,Jr=t.s==r.s?1:-1,Se=t.d,ie=r.d;if(!Se||!Se[0]||!ie||!ie[0])return new Mt(!t.s||!r.s||(Se?ie&&Se[0]==ie[0]:!ie)?NaN:Se&&Se[0]==0||!ie?Jr*0:Jr/0);for(a?(m=1,f=t.e-r.e):(a=en,m=_,f=Te(t.e/m)-Te(r.e/m)),Xe=ie.length,ke=Se.length,A=new Mt(Jr),B=A.d=[],d=0;ie[d]==(Se[d]||0);d++);if(ie[d]>(Se[d]||0)&&f--,u==null?(Z=u=Mt.precision,o=Mt.rounding):s?Z=u+(t.e-r.e)+1:Z=u,Z<0)B.push(1),D=!0;else{if(Z=Z/m+2|0,d=0,Xe==1){for(c=0,ie=ie[0],Z++;(d<ke||c)&&Z--;d++)_e=c*a+(Se[d]||0),B[d]=_e/ie|0,c=_e%ie|0;D=c||d<ke}else{for(c=a/(ie[0]+1)|0,c>1&&(ie=n(ie,c,a),Se=n(Se,c,a),Xe=ie.length,ke=Se.length),ze=Xe,C=Se.slice(0,Xe),T=C.length;T<Xe;)C[T++]=0;wt=ie.slice(),wt.unshift(0),Hr=ie[0],ie[1]>=a/2&&++Hr;do c=0,l=e(ie,C,Xe,T),l<0?(j=C[0],Xe!=T&&(j=j*a+(C[1]||0)),c=j/Hr|0,c>1?(c>=a&&(c=a-1),h=n(ie,c,a),g=h.length,T=C.length,l=e(h,C,g,T),l==1&&(c--,i(h,Xe<g?wt:ie,g,a))):(c==0&&(l=c=1),h=ie.slice()),g=h.length,g<T&&h.unshift(0),i(C,h,T,a),l==-1&&(T=C.length,l=e(ie,C,Xe,T),l<1&&(c++,i(C,Xe<T?wt:ie,T,a))),T=C.length):l===0&&(c++,C=[0]),B[d++]=c,l&&C[0]?C[T++]=Se[ze]||0:(C=[Se[ze]],T=1);while((ze++<ke||C[0]!==void 0)&&Z--);D=C[0]!==void 0}B[0]||B.shift()}if(m==1)A.e=f,Mo=D;else{for(d=1,c=B[0];c>=10;c/=10)d++;A.e=d+f*m-1,v(A,s?u+A.e+1:u,o,D)}return A}}();function v(n,e,i,t){var r,u,o,s,a,l,f,d,c,m=n.constructor;e:if(e!=null){if(d=n.d,!d)return n;for(r=1,s=d[0];s>=10;s/=10)r++;if(u=e-r,u<0)u+=_,o=e,f=d[c=0],a=f/xe(10,r-o-1)%10|0;else if(c=Math.ceil((u+1)/_),s=d.length,c>=s)if(t){for(;s++<=c;)d.push(0);f=a=0,r=1,u%=_,o=u-_+1}else break e;else{for(f=s=d[c],r=1;s>=10;s/=10)r++;u%=_,o=u-_+r,a=o<0?0:f/xe(10,r-o-1)%10|0}if(t=t||e<0||d[c+1]!==void 0||(o<0?f:f%xe(10,r-o-1)),l=i<4?(a||t)&&(i==0||i==(n.s<0?3:2)):a>5||a==5&&(i==4||t||i==6&&(u>0?o>0?f/xe(10,r-o):0:d[c-1])%10&1||i==(n.s<0?8:7)),e<1||!d[0])return d.length=0,l?(e-=n.e+1,d[0]=xe(10,(_-e%_)%_),n.e=-e||0):d[0]=n.e=0,n;if(u==0?(d.length=c,s=1,c--):(d.length=c+1,s=xe(10,_-u),d[c]=o>0?(f/xe(10,r-o)%xe(10,o)|0)*s:0),l)for(;;)if(c==0){for(u=1,o=d[0];o>=10;o/=10)u++;for(o=d[0]+=s,s=1;o>=10;o/=10)s++;u!=s&&(n.e++,d[0]==en&&(d[0]=1));break}else{if(d[c]+=s,d[c]!=en)break;d[c--]=0,s=1}for(u=d.length;d[--u]===0;)d.pop()}return I&&(n.e>m.maxE?(n.d=null,n.e=NaN):n.e<m.minE&&(n.e=0,n.d=[0])),n}function cn(n,e,i){if(!n.isFinite())return zo(n);var t,r=n.e,u=ve(n.d),o=u.length;return e?(i&&(t=i-o)>0?u=u.charAt(0)+"."+u.slice(1)+Ln(t):o>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(n.e<0?"e":"e+")+n.e):r<0?(u="0."+Ln(-r-1)+u,i&&(t=i-o)>0&&(u+=Ln(t))):r>=o?(u+=Ln(r+1-o),i&&(t=i-r-1)>0&&(u=u+"."+Ln(t))):((t=r+1)<o&&(u=u.slice(0,t)+"."+u.slice(t)),i&&(t=i-o)>0&&(r+1===o&&(u+="."),u+=Ln(t))),u}function Gt(n,e){var i=n[0];for(e*=_;i>=10;i/=10)e++;return e}function zt(n,e,i){if(e>Sl)throw I=!0,i&&(n.precision=i),Error(Oo);return v(new n(Vt),e,1,!0)}function Ke(n,e,i){if(e>nu)throw Error(Oo);return v(new n($t),e,i,!0)}function qo(n){var e=n.length-1,i=e*_+1;if(e=n[e],e){for(;e%10==0;e/=10)i--;for(e=n[0];e>=10;e/=10)i++}return i}function Ln(n){for(var e="";n--;)e+="0";return e}function Vo(n,e,i,t){var r,u=new n(1),o=Math.ceil(t/_+4);for(I=!1;;){if(i%2&&(u=u.times(e),ko(u.d,o)&&(r=!0)),i=Te(i/2),i===0){i=u.d.length-1,r&&u.d[i]===0&&++u.d[i];break}e=e.times(e),ko(e.d,o)}return I=!0,u}function Io(n){return n.d[n.d.length-1]&1}function $o(n,e,i){for(var t,r=new n(e[0]),u=0;++u<e.length;)if(t=new n(e[u]),t.s)r[i](t)&&(r=t);else{r=t;break}return r}function iu(n,e){var i,t,r,u,o,s,a,l=0,f=0,d=0,c=n.constructor,m=c.rounding,D=c.precision;if(!n.d||!n.d[0]||n.e>17)return new c(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(I=!1,a=D):a=e,s=new c(.03125);n.e>-2;)n=n.times(s),d+=5;for(t=Math.log(xe(2,d))/Math.LN10*2+5|0,a+=t,i=u=o=new c(1),c.precision=a;;){if(u=v(u.times(n),a,1),i=i.times(++f),s=o.plus(ee(u,i,a,1)),ve(s.d).slice(0,a)===ve(o.d).slice(0,a)){for(r=d;r--;)o=v(o.times(o),a,1);if(e==null)if(l<3&&et(o.d,a-t,m,l))c.precision=a+=10,i=u=s=new c(1),f=0,l++;else return v(o,c.precision=D,m,I=!0);else return c.precision=D,o}o=s}}function qn(n,e){var i,t,r,u,o,s,a,l,f,d,c,m=1,D=10,h=n,g=h.d,A=h.constructor,B=A.rounding,C=A.precision;if(h.s<0||!g||!g[0]||!h.e&&g[0]==1&&g.length==1)return new A(g&&!g[0]?-1/0:h.s!=1?NaN:g?0:h);if(e==null?(I=!1,f=C):f=e,A.precision=f+=D,i=ve(g),t=i.charAt(0),Math.abs(u=h.e)<15e14){for(;t<7&&t!=1||t==1&&i.charAt(1)>3;)h=h.times(n),i=ve(h.d),t=i.charAt(0),m++;u=h.e,t>1?(h=new A("0."+i),u++):h=new A(t+"."+i.slice(1))}else return l=zt(A,f+2,C).times(u+""),h=qn(new A(t+"."+i.slice(1)),f-D).plus(l),A.precision=C,e==null?v(h,C,B,I=!0):h;for(d=h,a=o=h=ee(h.minus(1),h.plus(1),f,1),c=v(h.times(h),f,1),r=3;;){if(o=v(o.times(c),f,1),l=a.plus(ee(o,new A(r),f,1)),ve(l.d).slice(0,f)===ve(a.d).slice(0,f))if(a=a.times(2),u!==0&&(a=a.plus(zt(A,f+2,C).times(u+""))),a=ee(a,new A(m),f,1),e==null)if(et(a.d,f-D,B,s))A.precision=f+=D,l=o=h=ee(d.minus(1),d.plus(1),f,1),c=v(h.times(h),f,1),r=s=1;else return v(a,A.precision=C,B,I=!0);else return A.precision=C,a;a=l,r+=2}}function zo(n){return String(n.s*n.s/0)}function tu(n,e){var i,t,r;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(t=e.search(/e/i))>0?(i<0&&(i=t),i+=+e.slice(t+1),e=e.substring(0,t)):i<0&&(i=e.length),t=0;e.charCodeAt(t)===48;t++);for(r=e.length;e.charCodeAt(r-1)===48;--r);if(e=e.slice(t,r),e){if(r-=t,n.e=i=i-t-1,n.d=[],t=(i+1)%_,i<0&&(t+=_),t<r){for(t&&n.d.push(+e.slice(0,t)),r-=_;t<r;)n.d.push(+e.slice(t,t+=_));e=e.slice(t),t=_-e.length}else t-=r;for(;t--;)e+="0";n.d.push(+e),I&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function Il(n,e){var i,t,r,u,o,s,a,l,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Lo.test(e))return tu(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(vl.test(e))i=16,e=e.toLowerCase();else if(Bl.test(e))i=2;else if(Nl.test(e))i=8;else throw Error(Vn+e);for(u=e.search(/p/i),u>0?(a=+e.slice(u+1),e=e.substring(2,u)):e=e.slice(2),u=e.indexOf("."),o=u>=0,t=n.constructor,o&&(e=e.replace(".",""),s=e.length,u=s-u,r=Vo(t,new t(i),u,u*2)),l=qt(e,i,en),f=l.length-1,u=f;l[u]===0;--u)l.pop();return u<0?new t(n.s*0):(n.e=Gt(l,f),n.d=l,I=!1,o&&(n=ee(n,r,s*4)),a&&(n=n.times(Math.abs(a)<54?xe(2,a):y.pow(2,a))),I=!0,n)}function kl(n,e){var i,t=e.d.length;if(t<3)return e.isZero()?e:bi(n,2,e,e);i=1.4*Math.sqrt(t),i=i>16?16:i|0,e=e.times(1/jt(5,i)),e=bi(n,2,e,e);for(var r,u=new n(5),o=new n(16),s=new n(20);i--;)r=e.times(e),e=e.times(u.plus(r.times(o.times(r).minus(s))));return e}function bi(n,e,i,t,r){var u,o,s,a,l=1,f=n.precision,d=Math.ceil(f/_);for(I=!1,a=i.times(i),s=new n(t);;){if(o=ee(s.times(a),new n(e++*e++),f,1),s=r?t.plus(o):t.minus(o),t=ee(o.times(a),new n(e++*e++),f,1),o=s.plus(t),o.d[d]!==void 0){for(u=d;o.d[u]===s.d[u]&&u--;);if(u==-1)break}u=s,s=t,t=o,o=u,l++}return I=!0,o.d.length=d+1,o}function jt(n,e){for(var i=n;--e;)i*=n;return i}function Uo(n,e){var i,t=e.s<0,r=Ke(n,n.precision,1),u=r.times(.5);if(e=e.abs(),e.lte(u))return Bn=t?4:1,e;if(i=e.divToInt(r),i.isZero())Bn=t?3:2;else{if(e=e.minus(i.times(r)),e.lte(u))return Bn=Io(i)?t?2:3:t?4:1,e;Bn=Io(i)?t?1:4:t?3:2}return e.minus(r).abs()}function ru(n,e,i,t){var r,u,o,s,a,l,f,d,c,m=n.constructor,D=i!==void 0;if(D?(Me(i,1,$n),t===void 0?t=m.rounding:Me(t,0,8)):(i=m.precision,t=m.rounding),!n.isFinite())f=zo(n);else{for(f=cn(n),o=f.indexOf("."),D?(r=2,e==16?i=i*4-3:e==8&&(i=i*3-2)):r=e,o>=0&&(f=f.replace(".",""),c=new m(1),c.e=f.length-o,c.d=qt(cn(c),10,r),c.e=c.d.length),d=qt(f,10,r),u=a=d.length;d[--a]==0;)d.pop();if(!d[0])f=D?"0p+0":"0";else{if(o<0?u--:(n=new m(n),n.d=d,n.e=u,n=ee(n,c,i,t,0,r),d=n.d,u=n.e,l=Mo),o=d[i],s=r/2,l=l||d[i+1]!==void 0,l=t<4?(o!==void 0||l)&&(t===0||t===(n.s<0?3:2)):o>s||o===s&&(t===4||l||t===6&&d[i-1]&1||t===(n.s<0?8:7)),d.length=i,l)for(;++d[--i]>r-1;)d[i]=0,i||(++u,d.unshift(1));for(a=d.length;!d[a-1];--a);for(o=0,f="";o<a;o++)f+=Kr.charAt(d[o]);if(D){if(a>1)if(e==16||e==8){for(o=e==16?4:3,--a;a%o;a++)f+="0";for(d=qt(f,r,e),a=d.length;!d[a-1];--a);for(o=1,f="1.";o<a;o++)f+=Kr.charAt(d[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)f="0"+f;f="0."+f}else if(++u>a)for(u-=a;u--;)f+="0";else u<a&&(f=f.slice(0,u)+"."+f.slice(u))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return n.s<0?"-"+f:f}function ko(n,e){if(n.length>e)return n.length=e,!0}function wl(n){return new this(n).abs()}function Ml(n){return new this(n).acos()}function Ol(n){return new this(n).acosh()}function Rl(n,e){return new this(n).plus(e)}function Pl(n){return new this(n).asin()}function Ll(n){return new this(n).asinh()}function ql(n){return new this(n).atan()}function Vl(n){return new this(n).atanh()}function $l(n,e){n=new this(n),e=new this(e);var i,t=this.precision,r=this.rounding,u=t+4;return!n.s||!e.s?i=new this(NaN):!n.d&&!e.d?(i=Ke(this,u,1).times(e.s>0?.25:.75),i.s=n.s):!e.d||n.isZero()?(i=e.s<0?Ke(this,t,r):new this(0),i.s=n.s):!n.d||e.isZero()?(i=Ke(this,u,1).times(.5),i.s=n.s):e.s<0?(this.precision=u,this.rounding=1,i=this.atan(ee(n,e,u,1)),e=Ke(this,u,1),this.precision=t,this.rounding=r,i=n.s<0?i.minus(e):i.plus(e)):i=this.atan(ee(n,e,u,1)),i}function zl(n){return new this(n).cbrt()}function Ul(n){return v(n=new this(n),n.e+1,2)}function Gl(n,e,i){return new this(n).clamp(e,i)}function jl(n){if(!n||typeof n!="object")throw Error(Ut+"Object expected");var e,i,t,r=n.defaults===!0,u=["precision",1,$n,"rounding",0,8,"toExpNeg",-Ei,0,"toExpPos",0,Ei,"maxE",0,Ei,"minE",-Ei,0,"modulo",0,9];for(e=0;e<u.length;e+=3)if(i=u[e],r&&(this[i]=eu[i]),(t=n[i])!==void 0)if(Te(t)===t&&t>=u[e+1]&&t<=u[e+2])this[i]=t;else throw Error(Vn+i+": "+t);if(i="crypto",r&&(this[i]=eu[i]),(t=n[i])!==void 0)if(t===!0||t===!1||t===0||t===1)if(t)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(Ro);else this[i]=!1;else throw Error(Vn+i+": "+t);return this}function Zl(n){return new this(n).cos()}function Hl(n){return new this(n).cosh()}function Go(n){var e,i,t;function r(u){var o,s,a,l=this;if(!(l instanceof r))return new r(u);if(l.constructor=r,wo(u)){l.s=u.s,I?!u.d||u.e>r.maxE?(l.e=NaN,l.d=null):u.e<r.minE?(l.e=0,l.d=[0]):(l.e=u.e,l.d=u.d.slice()):(l.e=u.e,l.d=u.d?u.d.slice():u.d);return}if(a=typeof u,a==="number"){if(u===0){l.s=1/u<0?-1:1,l.e=0,l.d=[0];return}if(u<0?(u=-u,l.s=-1):l.s=1,u===~~u&&u<1e7){for(o=0,s=u;s>=10;s/=10)o++;I?o>r.maxE?(l.e=NaN,l.d=null):o<r.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[u]):(l.e=o,l.d=[u]);return}else if(u*0!==0){u||(l.s=NaN),l.e=NaN,l.d=null;return}return tu(l,u.toString())}else if(a!=="string")throw Error(Vn+u);return(s=u.charCodeAt(0))===45?(u=u.slice(1),l.s=-1):(s===43&&(u=u.slice(1)),l.s=1),Lo.test(u)?tu(l,u):Il(l,u)}if(r.prototype=b,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=jl,r.clone=Go,r.isDecimal=wo,r.abs=wl,r.acos=Ml,r.acosh=Ol,r.add=Rl,r.asin=Pl,r.asinh=Ll,r.atan=ql,r.atanh=Vl,r.atan2=$l,r.cbrt=zl,r.ceil=Ul,r.clamp=Gl,r.cos=Zl,r.cosh=Hl,r.div=Jl,r.exp=Wl,r.floor=Yl,r.hypot=Ql,r.ln=Xl,r.log=Kl,r.log10=nf,r.log2=ef,r.max=tf,r.min=rf,r.mod=uf,r.mul=of,r.pow=sf,r.random=af,r.round=lf,r.sign=ff,r.sin=df,r.sinh=cf,r.sqrt=mf,r.sub=pf,r.sum=Df,r.tan=hf,r.tanh=gf,r.trunc=xf,n===void 0&&(n={}),n&&n.defaults!==!0)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<t.length;)n.hasOwnProperty(i=t[e++])||(n[i]=this[i]);return r.config(n),r}function Jl(n,e){return new this(n).div(e)}function Wl(n){return new this(n).exp()}function Yl(n){return v(n=new this(n),n.e+1,3)}function Ql(){var n,e,i=new this(0);for(I=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)i.d&&(i=i.plus(e.times(e)));else{if(e.s)return I=!0,new this(1/0);i=e}return I=!0,i.sqrt()}function wo(n){return n instanceof y||n&&n.toStringTag===Po||!1}function Xl(n){return new this(n).ln()}function Kl(n,e){return new this(n).log(e)}function ef(n){return new this(n).log(2)}function nf(n){return new this(n).log(10)}function tf(){return $o(this,arguments,"lt")}function rf(){return $o(this,arguments,"gt")}function uf(n,e){return new this(n).mod(e)}function of(n,e){return new this(n).mul(e)}function sf(n,e){return new this(n).pow(e)}function af(n){var e,i,t,r,u=0,o=new this(1),s=[];if(n===void 0?n=this.precision:Me(n,1,$n),t=Math.ceil(n/_),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(t));u<t;)r=e[u],r>=429e7?e[u]=crypto.getRandomValues(new Uint32Array(1))[0]:s[u++]=r%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(t*=4);u<t;)r=e[u]+(e[u+1]<<8)+(e[u+2]<<16)+((e[u+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(e,u):(s.push(r%1e7),u+=4);u=t/4}else throw Error(Ro);else for(;u<t;)s[u++]=Math.random()*1e7|0;for(t=s[--u],n%=_,t&&n&&(r=xe(10,_-n),s[u]=(t/r|0)*r);s[u]===0;u--)s.pop();if(u<0)i=0,s=[0];else{for(i=-1;s[0]===0;i-=_)s.shift();for(t=1,r=s[0];r>=10;r/=10)t++;t<_&&(i-=_-t)}return o.e=i,o.d=s,o}function lf(n){return v(n=new this(n),n.e+1,this.rounding)}function ff(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function df(n){return new this(n).sin()}function cf(n){return new this(n).sinh()}function mf(n){return new this(n).sqrt()}function pf(n,e){return new this(n).sub(e)}function Df(){var n=0,e=arguments,i=new this(e[n]);for(I=!1;i.s&&++n<e.length;)i=i.plus(e[n]);return I=!0,v(i,this.precision,this.rounding)}function hf(n){return new this(n).tan()}function gf(n){return new this(n).tanh()}function xf(n){return v(n=new this(n),n.e+1,1)}b[Symbol.for("nodejs.util.inspect.custom")]=b.toString;b[Symbol.toStringTag]="Decimal";var y=b.constructor=Go(eu);Vt=new y(Vt);$t=new y($t);var Ue=y;function Ef(n){let e=[];for(let i=0;i<n.length;i++){let t=n.charCodeAt(i);if(t>=55296&&t<=56319){let r=n.charCodeAt(i+1);if(r>=56320&&r<=57343){let u=t-55296,o=r-56320;t=2**16+u*2**10+o,i++}}e.push(t)}return e}var Zt=8205,jo=[127462,127487];function Zo(n){return n===Zt||n===65038||n===65039||n>=127995&&n<=128e3||n>=129456&&n<=129460||n>=917536&&n<=917632}function bf(n){return n>=jo[0]&&n<=jo[1]}function Ho(n){if(/^[\u0020-\u00FF]*$/.test(n))return n;let e=[],i=Ef(n),t=0;for(;t<i.length;){let r=i[t++],u=i[t];if(u===Zt){let o=t-1;for(t+=2;i[t]===Zt;)t+=2;e.push(String.fromCodePoint(...i.slice(o,2*t-o+1)))}else if(Zo(u)){let o=t-1;for(;Zo(i[t]);)t+=i[t]===Zt?2:1;e.push(String.fromCodePoint(...i.slice(o,2*t-o-1)))}else bf(r)?(t+=1,e.push(String.fromCodePoint(...i.slice(t-2,2)))):e.push(String.fromCodePoint(r))}return e}var uu=class{constructor(e){this.obeyspaces=!1;e=e.replace(/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/g,""),this.s=Ho(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let i;return typeof this.s=="string"?i=e.exec(this.s.slice(this.pos)):i=e.exec(this.s.slice(this.pos).join("")),i?.[0]?(this.pos+=i[0].length,i[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";let e=this.get();if(e==="\\"){if(!this.end()){let i=this.match(/^[a-zA-Z*]+/);if(i)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(i=this.get(),i===" ")return"<space>";return"\\"+i}}else{if(e==="{")return"<{>";if(e==="}")return"<}>";if(e==="^"){if(this.peek()==="^"){this.get();let i=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(i)return String.fromCodePoint(parseInt(i.slice(i.lastIndexOf("^")+1),16))}return e}else if(e==="#"){if(!this.end()){let i=!1;if(/[0-9?]/.test(this.peek())&&(i=!0,this.pos+1<this.s.length)){let t=this.s[this.pos+1];i=/[^0-9A-Za-z]/.test(t)}return i?"#"+this.get():"#"}}else if(e==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return e}};function yf(n,e){let i=n.next();if(!i)return[];let t=[];if(i!=="\\relax"){if(i==="\\noexpand")i=n.next(),i&&t.push(i);else if(i==="\\obeyspaces")n.obeyspaces=!0;else if(i==="\\space"||i==="~")t.push("<space>");else if(i==="\\bgroup")t.push("<{>");else if(i==="\\egroup")t.push("<}>");else if(i==="\\string")i=n.next(),i&&(i[0]==="\\"?Array.from(i).forEach(r=>t.push(r==="\\"?"\\backslash":r)):i==="<{>"?t.push("\\{"):i==="<space>"?t.push("~"):i==="<}>"&&t.push("\\}"));else if(i==="\\csname"){for(;n.peek()==="<space>";)n.next();let r="",u=!1,o=[];do{if(o.length===0)if(/^#[0-9?]$/.test(n.peek())){let s=n.get().slice(1);o=$(e?.[s]??e?.["?"]??"\\placeholder{}",e),i=o[0]}else i=n.next(),o=i?[i]:[];u=o.length===0,!u&&i==="\\endcsname"&&(u=!0,o.shift()),u||(u=i==="<$>"||i==="<$$>"||i==="<{>"||i==="<}>"||!!i&&i.length>1&&i[0]==="\\"),u||(r+=o.shift())}while(!u);r&&t.push("\\"+r),t=t.concat(o)}else if(i!=="\\endcsname")if(i.length>1&&i[0]==="#"){let r=i.slice(1);t=t.concat($(e?.[r]??e?.["?"]??"\\placeholder{}",e))}else t.push(i)}return t}function $(n,e){let i=n.toString().split(/\r?\n/),t="",r="";for(let s of i){t+=r,r=" ";let a=s.match(/((?:\\%)|[^%])*/);a!==null&&(t+=a[0])}let u=new uu(t),o=[];do o.push(...yf(u,e));while(!u.end());return o}function Ht(n){return $(n,[]).length}function F(n){let e="",i="";for(let t of n)t&&(/[a-zA-Z*]/.test(t[0])&&(i+=e),/\\[a-zA-Z]+\*?$/.test(t)?e=" ":e="",i+=t);return i}function mn(n){let e=[];if(Array.isArray(n))for(let t of n)Array.isArray(t)?e=[...e,...t]:e.push(t);else e=[n];return F(e.map(t=>({"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"})[t]??t))}var Jo=[{name:"To",latexTrigger:["\\to"],kind:"infix",precedence:270},{latexTrigger:["\\rightarrow"],kind:"infix",precedence:270,parse:"To"}];var ii=["Error","'missing'"];function zn(n){return!!(typeof n=="number"||ti(n)||typeof n=="string"&&/^[+-]?[0-9\.]/.test(n))}function ti(n){return n!==null&&typeof n=="object"&&"num"in n}function it(n){return n!==null&&typeof n=="object"&&"sym"in n}function Xo(n){return n!==null&&typeof n=="object"&&"str"in n}function yi(n){return n!==null&&typeof n=="object"&&"fn"in n}var Ff=/^(?:[\0-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u03E1\u03F0-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u06FF\u0750-\u07B1\u0870-\u088E\u0890\u0891\u0898-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u16EB-\u16ED\u1735\u1736\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1802\u1803\u1805\u19E0-\u19FF\u1AB0-\u1ACE\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u2000-\u2064\u2066-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2C60-\u2C7F\u2D00-\u2D25\u2D27\u2D2D\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31EF-\u321E\u3220-\u9FFF\uA640-\uA69F\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA7FF\uA830-\uA839\uA8E0-\uA8FF\uA92E\uA960-\uA97C\uA9CF\uA9E0-\uA9FE\uAA60-\uAA7F\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD00-\uDD02\uDD07-\uDD33\uDD37-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFD\uDEE0-\uDEFB]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD804[\uDDE1-\uDDF4\uDF3B]|\uD806[\uDF00-\uDF09]|\uD807[\uDFC0-\uDFF1\uDFFF]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67]|\uD82F[\uDCA0-\uDCA3]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDDEA\uDE00-\uDE45\uDEC0-\uDED3\uDEE0-\uDEF3\uDF00-\uDF56\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDC8F]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83B[\uDC71-\uDCB4\uDD01-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD00-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA\uDFF0-\uDFF9]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF])*$/u;function Ko(n){return Ff.test(n)}function Ee(n){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(n)||Fi.test(n)?!0:Ko(n)?/^(?:[A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0898-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEFD-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF59\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])*$/u.test(n):!1}var Cf="\\u{FE0F}",Af="\\u{20E3}",Bf="\\u{200D}",vf="(?:\uD83C[\uDDE6-\uDDFF])(?:\uD83C[\uDDE6-\uDDFF])",Nf="(?:[\\u{E0020}-\\u{E007E}]+\\u{E007F})",Wo=`(?:(?:\uD83C[\uDFFB-\uDFFF])|${Cf}${Af}?|${Nf})`,_f="(?:(?=(?:[\0-/:-@[-^`{-\xA9\xAB-\xB4\xB6\xB8\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378-\u037A\u037E\u0380-\u0385\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u086F\u0888\u088F-\u0897\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A\u0C3B\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDC\u0CDF\u0CE4\u0CE5\u0CF0\u0CF4-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u1368\u1372-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1716-\u171E\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE\u1ACF-\u1AFF\u1B4D-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200B\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u2BFF\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7CB-\uA7CF\uA7D2\uA7D4\uA7DA-\uA7F1\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFC5E-\uFC63\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFA-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE70\uFE72\uFE74-\uFE76\uFE78\uFE7A\uFE7C\uFE7E\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF64\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFC\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDF6F\uDF86-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC76-\uDC7E\uDCBB-\uDCC1\uDCC3-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE42-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDEFF\uDF11\uDF3B-\uDF3D\uDF43-\uDF4F\uDF5A-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80E-\uD810\uD812-\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD83C\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC3F\uDC56-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC2F\uDC6E-\uDC8E\uDC90-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAF-\uDEBF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCFA-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(?:[#*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8]))",Yo=`(?:${_f}${Wo}*|(?:[#*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])${Wo}+|${vf})`,es=`(?:${Yo})(${Bf}${Yo})*`,Sf=new RegExp(`(?:${es})+`,"u"),Fi=new RegExp(`^(?:${es})+$`,"u");function tn(n){return typeof n!="string"?"not-a-string":n===""?"empty-string":n.normalize()!==n?"expected-nfc":/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/.test(n)?"unexpected-bidi-marker":Fi.test(n)?"valid":/(?:[0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037B-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0898-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA827\uA82C\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFC5D\uFC64-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDF9\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE71\uFE73\uFE77\uFE79\uFE7B\uFE7D\uFE7F-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF65-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEFD-\uDF1C\uDF27\uDF30-\uDF50\uDF70-\uDF85\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF59\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])/u.test(n)&&Sf.test(n)?"unexpected-mixed-emoji":Ko(n)?Ee(n)?"valid":Ee(n[0])?"invalid-char":"invalid-first-char":"unexpected-script"}function z(n){return n==null?null:typeof n=="object"&&"str"in n?n.str:typeof n!="string"||n.length<2||n[0]!=="'"||n[n.length-1]!=="'"?null:n.substring(1,n.length-1)}function su(n){if(n==null||z(n)!==null)return null;let e=x(n);return e==null?n:[e,...(N(n)??[]).map(i=>su(i)).filter(i=>i!==null)]}function x(n){return Array.isArray(n)?typeof n[0]=="string"&&!Ee(n[0])?(console.error(`Invalid identifier "${n[0]}": ${tn(n[0])}`),null):n[0]:n==null?null:yi(n)?n.fn[0]:null}function au(n){let e=x(n);return typeof e=="string"?e:""}function N(n){return Array.isArray(n)?n.slice(1):n==null?null:yi(n)?n.fn.slice(1):null}function p(n,e){return Array.isArray(n)?n[e]??null:n==null?null:yi(n)?n.fn[e]??null:null}function Ne(n){return p(n,1)}function nn(n){return p(n,2)}function G(n){return n==null?0:Array.isArray(n)?Math.max(0,n.length-1):yi(n)?Math.max(0,n.fn.length-1):0}function lu(n){return n==null?null:x(n)==="Hold"?p(n,1):n}function V(n){if(typeof n=="string")return/^[+-]?[0-9\.]/.test(n)||n.length>=2&&n[0]==="'"&&n[n.length-1]==="'"?null:n;if(n==null)return null;let e=it(n)?n.sym:n;return typeof e!="string"?null:e}function Qo(n){let e=x(n);if(e==="KeyValuePair"||e==="Tuple"||e==="Pair"){let i=z(Ne(n));return i?[i,nn(n)??"Nothing"]:null}return null}function ri(n){if(n===null)return null;if(typeof n=="object"&&"dict"in n)return n.dict;let e=Qo(n);if(e)return{[e[0]]:e[1]};if(x(n)==="Dictionary"){let t={};for(let r=1;r<G(n);r++){let u=Qo(p(n,r));u&&(t[u[0]]=u[1])}return t}return null}function Tf(n){if(n=n.toLowerCase().replace(/[0-9][nd]$/,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,""),n==="nan")return NaN;if(n==="infinity"||n==="+infinity")return 1/0;if(n==="-infinity")return-1/0;if(/\([0-9]+\)/.test(n)){let[e,i,t,r]=n.match(/(.+)\(([0-9]+)\)(.*)$/)??[];n=i+t.repeat(Math.ceil(16/t.length))+(r??"")}return parseFloat(n)}function k(n){return typeof n=="number"?n:typeof n=="string"?Tf(n):n==null?null:ti(n)?k(n.num):null}function Ci(n){if(n==null)return null;if(V(n)==="Half")return[1,2];let e=x(n);if(!e)return null;let i=null,t=null;if(e==="Negate"){let r=Ci(Ne(n));if(r)return[-r[0],r[1]]}if((e==="Rational"||e==="Divide")&&(i=k(Ne(n))??NaN,t=k(nn(n))??NaN),e==="Power"){let r=k(nn(n));r===1?(i=k(Ne(n)),t=1):r===-1&&(i=1,t=k(Ne(n)))}return e==="Multiply"&&x(nn(n))==="Power"&&k(nn(nn(n)))===-1&&(i=k(Ne(n)),t=k(Ne(nn(n)))),i===null||t===null?null:Number.isInteger(i)&&Number.isInteger(t)?[i,t]:null}function nt(n,e){let i=x(n);if(i!==null)return[nt(i,e),...(N(n)??[]).map(u=>nt(u,e))];let t=ri(n);if(t!==null){let u=Object.keys(t),o={};for(let s of u)o[s]=nt(t[s],e);return{dict:o}}let r=V(n);return r&&e[r]?e[r]:n}function tt(n,e){let i=null;if(Array.isArray(n)&&(i=n),yi(n)&&(i=n.fn),i===null)return[];let t=1,r=[];for(;t<i.length;)r.push(e(i[t])),t+=1;return r}function Ai(n,e,i){let t=x(e),r=x(i);return t===n&&r===n?[n,...N(e)??[],...N(i)??[]]:t===n?[n,...N(e)??[],i]:r===n?[n,e,...N(i)??[]]:[n,e,i]}function Jt(n){if(n===null)return null;let e=x(n);if(e==="Delimiter"){if(n=p(n,1),n===null)return[];if(e=x(n),e!=="Sequence")return[n]}return e!=="Sequence"?null:N(n)??[]}function se(n){return x(n)==="Sequence"&&G(n)===0}function O(n){return se(n)?ii:n??ii}function ou(n){return n[0]==="Square"?ou(n.slice(1))+2:n.reduce((e,i)=>e+rt(i),0)}function rt(n){if(n===null)return 0;if(typeof n=="number"||typeof n=="string"||zn(n)||it(n)||Xo(n))return 1;if(Array.isArray(n))return ou(n);if("fn"in n)return ou(n.fn);let e=ri(n);if(e){let i=Object.keys(e);return 1+i.length+i.reduce((t,r)=>t+rt(e[r]),0)}return 0}function If(n){if(x(n)!=="Multiply")return[[],[]];let e=[],i=[],t=N(n)??[];for(let r of t)if(x(r)==="Power"){let u=p(r,1),o=p(r,2);if(x(o)==="Negate"){let s=p(o,1);u&&s&&i.push(["Power",u,s])}else{let s=k(o)??NaN;s===-1?u&&i.push(u):s<0?u&&i.push(["Power",u,-s]):e.push(r)}}else if(x(r)==="Rational"&&G(r)===2){let u=p(r,1),o=p(r,2);k(u)!==1&&e.push(u),k(o)!==1&&i.push(o)}else{let u=Ci(r);u!==null?(u[0]!==1&&e.push(u[0]),i.push(u[1])):e.push(r)}return[e,i]}function kf(n){let e=n.parseOptionalGroup(),i=n.parseGroup()??n.parseToken();return i===null||se(i)?e!==null?["Root",ii,O(e)]:["Sqrt",ii]:e!==null?["Root",i,e]:["Sqrt",i]}function ut(n,e,i,t){return i===null?"\\sqrt{}":(t=t??2,e==="solidus"?n.wrapShort(i)+"^{1\\/"+n.serialize(t)+"}":e==="quotient"?n.wrapShort(i)+"^{\\frac{1}{"+n.serialize(t)+"}}":k(t)===2?"\\sqrt{"+n.serialize(i)+"}":"\\sqrt["+n.serialize(t)+"]{"+n.serialize(i)+"}")}function wf(n,e){n.level-=1;let i=x(e),t="",r=p(e,1);if(i==="Negate")t="-"+n.wrap(r,276);else if(i==="Add"){if(n.canonical&&G(e)===2&&n.options.invisiblePlus!=="+"){let[s,a]=[p(e,1),p(e,2)],[l,f]=[s,a],d=k(l),c=Ci(f);if((d===null||c===null)&&([l,f]=[a,s],d=k(l),c=Ci(f)),d!==null&&c!==null&&isFinite(d)&&Number.isInteger(d)&&d>=0&&d<=1e3&&isFinite(c[0])&&isFinite(c[1])&&c[0]>0&&c[0]<=100&&c[1]<=100)return t=F([n.serialize(l),n.options.invisiblePlus,n.serialize(f)]),n.level+=1,t}let u=k(r)??NaN;t=n.serialize(r);let o=G(e)+1;for(let s=2;s<o;s++)if(r=p(e,s),u=k(r)??NaN,u<0)t+=n.serialize(r);else if(x(r)==="Negate")t+=n.wrap(r,oe);else{let a=n.wrap(r,oe);a[0]==="-"||a[0]==="+"?t+=a:t+="+"+a}}else if(i==="Subtract"){t=n.wrap(r,oe);let u=p(e,2);if(u!==null){let o=n.wrap(u,oe);o[0]==="-"?t+="+"+o.slice(1):o[0]==="+"?t+="-"+o.slice(1):t=t+"-"+o}}return n.level+=1,t}function us(n,e){if(e===null)return"";n.level-=1;let i="";if(n.canonical===!0){let[s,a]=If(e);a.length>0&&(a.length===1&&a[0]===1?s.length===0?i="1":s.length===1?i=n.serialize(s[0]):i=us(n,["Multiply",...s]):i=n.serialize(["Divide",s.length===1?s[0]:["Multiply",...s],a.length===1?a[0]:["Multiply",...a]]))}if(i)return n.level+=1,i;let t=!1,r=null,u=G(e)+1,o=!1;for(let s=1;s<u;s++){if(r=p(e,s),r===null)continue;let a;if(zn(r)){a=n.serialize(r),a==="-1"&&!i?(i="",t=!t):(a[0]==="-"&&(a=a.slice(1),t=!t),i=i?F([i,n.options.multiply,a]):a),o=!0;continue}if(x(r)==="Power"){let l=Ci(p(r,2));if(l){let[f,d]=l;if(f===1&&d!==null){i+=ut(n,n.rootStyle(r,n.level),p(r,1),d),o=!1;continue}}}if(x(r)==="Power"&&!isNaN(k(p(r,1))??NaN)){a=n.serialize(r),i=i?F([i,n.options.multiply,a]):a,o=!0;continue}if(x(r)==="Negate"&&(r=p(r,1),t=!t),a=n.wrap(r,we),!i)i=a;else{let l=x(r);o&&(l==="Divide"||l==="Rational")?i=F([i,n.options.multiply,a]):n.options.invisibleMultiply?i=F([i,n.options.invisibleMultiply,a]):i=F([i,a])}o=!1}return n.level+=1,t?"-"+i:i}function Mf(n){let e=n.parseGroup(),i=null;if(e===null?(e=n.parseToken(),i=n.parseToken()):i=n.parseGroup(),e=O(e),i=O(i),x(e)==="PartialDerivative"&&(x(i)==="PartialDerivative"||x(i)==="Multiply"&&x(p(i,1))==="PartialDerivative")){let t=p(e,3)??null,r=p(e,1);r===null&&(r=O(n.parseExpression()));let u=[];if(x(i)==="Multiply"){for(let o of N(i)??[])if(x(o)==="PartialDerivative"){let s=p(o,2);s&&u.push(s)}}else{let o=p(i,2);o&&u.push(o)}return u.length>1&&(u=["List",...u]),["PartialDerivative",r,...u,t===null?1:t]}return["Divide",e,i]}function ns(n,e){if(e===null)return"";let i=O(p(e,1)),t=O(p(e,2)),r=n.canonical?n.fractionStyle(e,n.level):"quotient";if(r==="inline-solidus"||r==="nice-solidus"){let a=n.wrapShort(i),l=n.wrapShort(t);return r==="inline-solidus"?`${a}\\/${l}`:`{}^{${a}}\\!\\!/\\!{}_{${l}}`}else{if(r==="reciprocal")return k(i)===1?n.wrap(t)+"^{-1}":n.wrap(i)+n.wrap(t)+"^{-1}";if(r==="factor")return k(t)===1?n.wrap(i):"\\frac{1}{"+n.serialize(t)+"}"+n.wrapString(n.serialize(i),n.groupStyle(e,1))}let u="\\frac";r==="block-quotient"?u="\\dfrac":r==="inline-quotient"&&(u="\\tfrac");let o=n.serialize(i),s=n.serialize(t);return`${u}{${o}}{${s}}`}function fu(n,e){if(!e)return"";let i=x(e),t=O(p(e,1));if(i==="Sqrt")return ut(n,n.rootStyle(e,n.level-1),t,2);let r=O(p(e,2));if(i==="Root")return ut(n,n.rootStyle(e,n.level-1),t,r);if(n.canonical){let u=k(r)??1;if(u===-1)return n.serialize(["Divide","1",t]);if(u<0)return n.serialize(["Divide","1",["Power",t,-u]]);if(x(r)==="Divide"||x(r)==="Rational"){if(k(p(r,1))===1){let o=n.rootStyle(e,n.level);return ut(n,o,t,p(r,2))}if(k(p(r,2))===2)return`${n.serialize(["Sqrt",t])}^{${n.serialize(p(r,1))}}`}else if(x(r)==="Power"&&k(p(r,2))===-1){let o=n.rootStyle(e,n.level);return ut(n,o,t,p(r,1))}}return n.wrapShort(t)+"^{"+n.serialize(r)+"}"}var os=[{name:"CatalanConstant",identifierTrigger:"G"},{name:"GoldenRatio",latexTrigger:"\\varphi"},{name:"EulerGamma",latexTrigger:"\\gamma"},{name:"Degrees",latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(n,e)=>["Degrees",e],serialize:(n,e)=>F([n.serialize(p(e,1)),"\\degree"])},{latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(n,e)=>["Degrees",e]},{latexTrigger:["^","<{>","\\circ","<}>"],kind:"postfix",parse:(n,e)=>["Degrees",e]},{latexTrigger:["^","\\circ"],kind:"postfix",parse:(n,e)=>["Degrees",e]},{latexTrigger:["\xB0"],kind:"postfix",precedence:880,parse:(n,e)=>["Degrees",e]},{latexTrigger:["\\ang"],parse:n=>{let e=n.parseGroup();return e===null?["Degrees"]:["Degrees",e]}},{latexTrigger:["\\infty"],parse:{num:"+Infinity"}},{name:"ComplexInfinity",latexTrigger:["\\tilde","\\infty"],serialize:"\\tilde\\infty"},{latexTrigger:["\\tilde","<{>","\\infty","<}>"],parse:"ComplexInfinity"},{name:"Pi",kind:"symbol",latexTrigger:["\\pi"]},{latexTrigger:["\u03C0"],parse:"Pi"},{name:"ExponentialE",latexTrigger:["\\exponentialE"],parse:"ExponentialE",serialize:"\\exponentialE"},{latexTrigger:"\\operatorname{e}",parse:"ExponentialE"},{latexTrigger:"\\mathrm{e}",parse:"ExponentialE"},{kind:"function",identifierTrigger:"exp",parse:"Exp"},{latexTrigger:"\\exp",parse:"Exp"},{name:"ImaginaryUnit",latexTrigger:["\\imaginaryI"]},{latexTrigger:"\\operatorname{i}",parse:"ImaginaryUnit"},{latexTrigger:"\\mathrm{i}",parse:"ImaginaryUnit"},{name:"Abs",kind:"matchfix",openTrigger:"|",closeTrigger:"|",parse:(n,e)=>se(e)?null:["Abs",e]},{kind:"matchfix",openTrigger:["\\vert"],closeTrigger:["\\vert"],parse:(n,e)=>se(e)?null:["Abs",e]},{identifierTrigger:"abs",kind:"function",parse:"Abs"},{name:"Add",latexTrigger:["+"],kind:"infix",associativity:"any",precedence:oe,parse:(n,e,i)=>{if(i&&oe<i.minPrec)return null;let t=n.parseExpression({...i,minPrec:oe});return t===null?null:Ai("Add",e,t)},serialize:wf},{kind:"prefix",latexTrigger:["+"],precedence:oe,parse:(n,e)=>e&&oe<e.minPrec?null:n.parseExpression({...e,minPrec:400})},{name:"Ceil",kind:"matchfix",openTrigger:"\\lceil",closeTrigger:"\\rceil",parse:(n,e)=>se(e)?null:["Ceil",e]},{kind:"matchfix",openTrigger:["\u2308"],closeTrigger:["\u2309"],parse:(n,e)=>se(e)?null:["Ceil",e]},{identifierTrigger:"ceil",kind:"function",parse:"Ceil"},{name:"Chop",identifierTrigger:"chop",kind:"function",parse:"Chop"},{name:"Complex",precedence:oe-1,serialize:(n,e)=>{let i=n.serialize(p(e,1)),t=k(p(e,2));if(t===0)return i;let r=t===1?"\\imaginaryI":t===-1?"-\\imaginaryI":F([n.serialize(p(e,2)),"\\imaginaryI"]);return k(p(e,1))===0?r:t!==null&&t<0?F([i,r]):F([i,"+",r])}},{name:"Divide",latexTrigger:"\\frac",precedence:dn,parse:Mf,serialize:ns},{kind:"infix",latexTrigger:"\\over",associativity:"none",precedence:dn,parse:"Divide"},{latexTrigger:["\\/"],kind:"infix",associativity:"left",precedence:dn,parse:"Divide"},{latexTrigger:["/"],kind:"infix",associativity:"left",precedence:dn,parse:"Divide"},{latexTrigger:["\\div"],kind:"infix",associativity:"left",precedence:dn,parse:"Divide"},{name:"Exp",serialize:(n,e)=>{let i=p(e,1);return V(i)||k(i)!==null?F(["\\exponentialE^{",n.serialize(i),"}"]):F(["\\exp",n.wrap(O(i))])}},{name:"Factorial",latexTrigger:["!"],kind:"postfix",precedence:Rt},{name:"Factorial2",latexTrigger:["!","!"],kind:"postfix",precedence:Rt},{name:"Floor",kind:"matchfix",openTrigger:"\\lfloor",closeTrigger:"\\rfloor",parse:(n,e)=>se(e)?null:["Floor",e]},{kind:"matchfix",openTrigger:["\u230A"],closeTrigger:["\u230B"],parse:(n,e)=>se(e)?null:["Floor",e]},{identifierTrigger:"floor",kind:"function",parse:"Floor"},{latexTrigger:["\\Gamma"],parse:"Gamma"},{name:"GCD",identifierTrigger:"gcd",kind:"function"},{identifierTrigger:"GCD",kind:"function",parse:"GCD"},{name:"Half",serialize:"\\frac12"},{name:"Lg",latexTrigger:["\\lg"],serialize:(n,e)=>"\\log_{10}"+n.wrapArguments(e),parse:n=>{let e=n.parseArguments("implicit");return e===null?"Lg":["Log",...e,10]}},{name:"Lb",latexTrigger:"\\lb",parse:n=>{let e=n.parseArguments("implicit");return e===null?"Log":["Log",e[0],2]}},{name:"Ln",latexTrigger:["\\ln"],parse:n=>rs("Ln",n),serialize:(n,e)=>"\\ln"+n.wrapArguments(e)},{name:"Log",latexTrigger:["\\log"],parse:n=>rs("Log",n),serialize:(n,e)=>{let i=nn(e);return i?F(["\\log_{",n.serialize(i),"}",n.wrap(Ne(e))]):"\\log"+n.wrapArguments(e)}},{name:"LCM",identifierTrigger:"lcm",kind:"function"},{identifierTrigger:"LCM",kind:"function",parse:"LCM"},{identifierTrigger:"max",kind:"function",parse:"Max"},{identifierTrigger:"min",kind:"function",parse:"Min"},{name:"Max",latexTrigger:"\\max",kind:"function"},{name:"Min",latexTrigger:"\\min",kind:"function"},{name:"Supremum",latexTrigger:"\\sup",kind:"function"},{name:"Infimum",latexTrigger:"\\inf",kind:"function"},{name:"Limit",latexTrigger:"\\lim",kind:"expression",parse:n=>{if(!n.match("_"))return null;let e=n.parseGroup();if(x(e)!=="To")return null;let i=n.parseArguments("implicit");return i?["Limit",["Function",i[0],p(e,1)],p(e,2)]:null},serialize:(n,e)=>{let i=p(e,1),t=p(i,2),r=p(e,2);return F(["\\lim_{",n.serialize(t),"\\to",n.serialize(r),"}",n.serialize(p(i,1))])}},{name:"MinusPlus",latexTrigger:["\\mp"],kind:"infix",associativity:"any",precedence:fn},{name:"Multiply",latexTrigger:["\\times"],kind:"infix",associativity:"any",precedence:we,serialize:us},{latexTrigger:["\\cdot"],kind:"infix",associativity:"any",precedence:we,parse:(n,e,i)=>{let t=n.parseExpression({...i,minPrec:we+2});return t===null?["Multiply",e,ii]:Ai("Multiply",e,t)}},{latexTrigger:["*"],kind:"infix",associativity:"any",precedence:we,parse:(n,e,i)=>{let t=n.parseExpression({...i,minPrec:we+2});return t===null?["Multiply",e,ii]:Ai("Multiply",e,t)}},{name:"Mod",latexTrigger:"\\bmod",kind:"infix",precedence:dn,serialize:(n,e)=>{if(G(e)!==2)return"";let i=n.serialize(p(e,1)),t=n.serialize(p(e,2));return F([i,"\\bmod",t])}},{latexTrigger:"\\mod",kind:"infix",precedence:dn,parse:"Mod"},{latexTrigger:"\\pmod",kind:"prefix",precedence:w,parse:n=>{let e=n.parseGroup()??n.parseToken();return["Mod",O(e)]}},{name:"Congruent",serialize:(n,e)=>{let i=n.serialize(p(e,1)),t=n.serialize(p(e,2));if(p(e,3)===null)return F([i,"\\equiv",t]);let r=n.serialize(p(e,3));return F([i,"\\equiv",t,"\\pmod{",r,"}"])}},{name:"Negate",latexTrigger:["-"],kind:"prefix",precedence:oe+2,parse:(n,e)=>{if(/\d/.test(n.peek))return null;let i=n.index;if(n.parseNumber()!==null)return n.index=i,null;let t=n.parseExpression({...e,minPrec:oe+3});return["Negate",O(t)]}},{kind:"matchfix",openTrigger:"||",closeTrigger:"||",parse:(n,e)=>se(e)?null:["Norm",e]},{name:"Norm",kind:"matchfix",openTrigger:["\\left","\\Vert"],closeTrigger:["\\right","\\Vert"],parse:(n,e)=>se(e)?null:["Norm",e]},{name:"PlusMinus",latexTrigger:["\\pm"],kind:"infix",associativity:"any",precedence:fn,serialize:(n,e)=>{let i=p(e,1);if(i===null)return"\\pm";if(G(e)===1)return F(["\\pm",n.serialize(i)]);let t=p(e,2);return F([n.serialize(i),"\\pm",n.serialize(t)])}},{latexTrigger:["\\pm"],kind:"prefix",precedence:fn,parse:(n,e)=>{let i=n.parseExpression({...e,minPrec:400});return["PlusMinus",O(i)]}},{latexTrigger:["\\plusmn"],kind:"infix",associativity:"any",precedence:fn,parse:(n,e,i)=>{let t=n.parseExpression({...i,minPrec:400});return["PlusMinus",e,O(t)]}},{latexTrigger:["\\plusmn"],kind:"prefix",precedence:fn,parse:(n,e)=>{let i=n.parseExpression({...e,minPrec:400});return["PlusMinus",O(i)]}},{name:"Power",latexTrigger:["^"],kind:"infix",serialize:fu},{latexTrigger:"\\prod",precedence:we,name:"Product",parse:is("Product",we),serialize:ts("\\prod")},{name:"Rational",precedence:dn,serialize:(n,e)=>e&&G(e)===1?"\\operatorname{Rational}"+n.wrapArguments(e):ns(n,e)},{name:"Root",serialize:fu},{name:"Round",identifierTrigger:"round",kind:"function"},{name:"Square",precedence:720,serialize:(n,e)=>n.wrapShort(p(e,1))+"^2"},{latexTrigger:["\\sum"],precedence:oe,name:"Sum",parse:is("Sum",oe),serialize:ts("\\sum")},{name:"Sign",identifierTrigger:"sgn",kind:"function"},{name:"Sqrt",latexTrigger:["\\sqrt"],parse:kf,serialize:fu},{name:"Subtract",latexTrigger:["-"],kind:"infix",associativity:"left",precedence:oe+2,parse:(n,e,i)=>{let t=n.parseExpression({...i,minPrec:oe+3});return["Subtract",e,O(t)]},serialize:(n,e)=>{let i=n.wrap(p(e,1),oe+2),t=n.wrap(p(e,2),oe+3);return F([i,"-",t])}}];function is(n,e){return i=>{i.skipSpace();let t=null,r=null;for(;!(r&&t)&&(i.peek==="_"||i.peek==="^");)i.match("_")?r=i.parseGroup()??i.parseToken():i.match("^")&&(t=i.parseGroup()??i.parseToken()),i.skipSpace();(r==="Nothing"||se(r))&&(r=null),(t==="Nothing"||se(t))&&(t=null);let u=null,o=null;x(r)==="Equal"?(u=p(r,1),o=p(r,2)):u=r;let s=i.parseExpression({minPrec:e+1});return s?t?[n,s,["Tuple",u??"Nothing",o??1,t]]:o?[n,s,["Tuple",u??"Nothing",o]]:u?[n,s,["Tuple",u]]:[n,s]:[n]}}function ts(n){return(e,i)=>{if(!p(i,1))return n;let t=p(i,2),r=x(t);r!=="Tuple"&&r!=="Triple"&&r!=="Pair"&&r!=="Single"&&(t=null);let u=p(t,1);u&&x(u)==="Hold"&&(u=p(u,1));let o=p(i,1);if(!t)return p(i,2)?F([n,"_{",e.serialize(p(i,2)),"}",e.serialize(o)]):F([n,e.serialize(o)]);let s=p(t,2),a=[];u&&V(u)!=="Nothing"&&s?a=[e.serialize(u),"=",e.serialize(s)]:u&&V(u)!=="Nothing"?a=[e.serialize(u)]:s&&(a=[e.serialize(s)]),a.length>0&&(a=["_{",...a,"}"]);let l=[];return p(t,3)&&(l=["^{",e.serialize(p(t,3)),"}"]),F([n,...l,...a,e.serialize(o)])}}function rs(n,e){let i=null;e.match("_")&&(i=e.parseGroup()??e.nextToken());let t=e.parseArguments("implicit");return t===null&&i===null?[n]:t===null?[n,i]:i===null?[n,...t]:i===10?["Log",t[0]]:i===2?["Lb",...t]:["Log",t[0],i]}function du(n,e,i,t,r){if(e&&e.minPrec>=t)return null;let u=i?[i]:["Nothing"],o=!1;for(;!o;){for(o=!0,n.skipSpace();n.match(r);)u.push("Nothing"),n.skipSpace();if(n.atTerminator(e))u.push("Nothing");else{let s=n.parseExpression({...e,minPrec:t});u.push(s??"Nothing"),o=s===null}o||(n.skipSpace(),o=!n.match(r))}return u}function Wt(n=""){return(e,i)=>{if(!i)return"";let t=N(i)??[];if(t.length===0)return"";if(t.length===1)return e.serialize(t[0]);n={"&":"\\&",":":"\\colon","|":"\\mvert","-":"-","\xB7":"\\cdot","\u2012":"-","\u2013":"--","\u2014":"---","\u2015":"-","\u2022":"\\bullet","\u2026":"\\ldots"}[n]??n;let r=t.reduce((u,o)=>(u.push(e.serialize(o),n),u),[]);return r.pop(),F(r)}}var ss=[{latexTrigger:["\\placeholder"],kind:"symbol",parse:n=>{for(;n.match("<space>"););if(n.match("["))for(;!n.match("]")&&!n.atBoundary;)n.nextToken();for(;n.match("<space>"););if(n.match("<{>"))for(;!n.match("<}>")&&!n.atBoundary;)n.nextToken();return"Nothing"}},{name:"Function",latexTrigger:["\\mapsto"],kind:"infix",precedence:fn,parse:(n,e)=>{let i=[];if(x(e)==="Delimiter"&&(e=p(e,1)??"Nothing"),x(e)==="Sequence")for(let r of N(e)??[]){if(!V(r))return null;i.push(V(r))}else{if(!V(e))return null;i=[V(e)]}let t=n.parseExpression({minPrec:fn})??"Nothing";return x(t)==="Delimiter"&&(t=p(t,1)??"Nothing"),x(t)==="Sequence"&&(t=["Block",...N(t)??[]]),["Function",t,...i]},serialize:(n,e)=>{let i=N(e);return i===null||i.length<1?"()\\mapsto()":i.length===1?F(["()","\\mapsto",n.serialize(p(e,1))]):i.length===2?F([n.serialize(p(e,2)),"\\mapsto",n.serialize(p(e,1))]):F([n.wrapString((N(e)?.slice(1)??[]).map(t=>n.serialize(t)).join(", "),"normal"),"\\mapsto",n.serialize(p(e,1))])}},{name:"Apply",kind:"function",identifierTrigger:"apply",serialize:(n,e)=>{if(typeof p(e,1)=="string"){let t=e.slice(1);return n.serialize(t)}return n.serializeFunction(N(e))}},{latexTrigger:"\\lhd",kind:"infix",precedence:20,parse:"Apply"},{latexTrigger:"\\rhd",kind:"infix",precedence:20,parse:(n,e)=>["Apply",n.parseExpression({minPrec:21})??"Nothing",e]},{name:"Assign",latexTrigger:"\\coloneq",kind:"infix",associativity:"right",precedence:gi,serialize:(n,e)=>{let i=lu(p(e,1));if(x(p(e,2))==="Function"){let t=p(e,2),r=lu(p(t,1)),u=N(t)?.slice(1)??[];return F([n.serialize(i),n.wrapString(u.map(o=>n.serialize(o)).join(", "),n.options.applyFunctionStyle(e,n.level)),"\\coloneq",n.serialize(r)])}return F([n.serialize(i),"\\coloneq",n.serialize(p(e,2))])},parse:Yt},{latexTrigger:"\\coloneqq",kind:"infix",associativity:"right",precedence:gi,parse:Yt},{latexTrigger:"\\colonequals",kind:"infix",associativity:"right",precedence:gi,parse:Yt},{latexTrigger:[":","="],kind:"infix",associativity:"right",precedence:gi,parse:Yt},{name:"BaseForm",serialize:(n,e)=>{let i=k(p(e,2))??NaN;if(isFinite(i)&&i>=2&&i<=36){let t=k(p(e,1))??NaN;if(isFinite(t)&&Number.isInteger(t)){let r=Number(t).toString(i),u=0;if(i===2||i===10?u=4:i===16?u=2:i>16&&(u=4),u>0){let o=r;r="";for(let s=0;s<o.length;s++)s>0&&s%u===0&&(r="\\, "+r),r=o[o.length-s-1]+r}return`(\\text{${r}}_{${i}}`}}return"\\operatorname{BaseForm}("+n.serialize(p(e,1))+", "+n.serialize(p(e,2))+")"}},{name:"Sequence",serialize:Wt(" ")},{name:"InvisibleOperator",serialize:Wt("")},{name:"Delimiter",serialize:(n,e)=>{let i=n.options.groupStyle(e,n.level+1),t=p(e,1),r=x(t),u={Set:"{,}",List:"[,]",Tuple:"(,)",Single:"(,)",Pair:"(,)",Triple:"(,)",Sequence:"(,)",String:'""'}[typeof r=="string"?r:""],o=u?t:["Sequence",t];if(u??(u="(,)"),G(e)>1){let d=z(p(e,2));typeof d=="string"&&d.length<=3&&(u=d)}let[s,a,l]=["","",""];u.length===3?[s,a,l]=u:u.length===2?[s,l]=u:u.length===1&&(a=u);let f=t?o?Wt(a)(n,o):n.serialize(t):"";return n.wrapString(f,i,s+l)}},{name:"Domain",serialize:(n,e)=>x(e)==="Error"?n.serialize(e):`\\mathbf{${n.serialize(p(e,1))}}`},{latexTrigger:["\\mathtip"],parse:n=>{let e=n.parseGroup();return n.parseGroup(),e}},{latexTrigger:["\\texttip"],parse:n=>{let e=n.parseGroup();return n.parseGroup(),e}},{latexTrigger:["\\error"],parse:n=>["Error",n.parseGroup()]},{name:"Error",serialize:(n,e)=>{let i=p(e,1);if(z(i)==="missing")return`\\error{${n.options.missingSymbol??"\\placeholder{}"}}`;let t=Pf(n,e)||"\\blacksquare",r=x(i)==="ErrorCode"?z(p(i,1)):z(i);return r==="incompatible-domain"?V(p(i,3))==="Undefined"?`\\mathtip{\\error{${t}}}{\\notin ${n.serialize(p(i,2))}}`:`\\mathtip{\\error{${t}}}{\\in ${n.serialize(p(i,3))}\\notin ${n.serialize(p(i,2))}}`:typeof r=="string"?`\\error{${t}}`:`\\error{${t}}`}},{name:"ErrorCode",serialize:(n,e)=>{let i=z(p(e,1));return i==="missing"?n.options.missingSymbol??"\\placeholder{}":i==="unexpected-command"||i==="unexpected-operator"||i==="unexpected-token"||i==="invalid-identifier"||i==="unknown-environment"||i==="unexpected-base"||i==="incompatible-domain"||i==="invalid-domain"?"":`\\texttip{\\error{\\blacksquare}}{\\mathtt{${i}}}`}},{name:"FromLatex",serialize:(n,e)=>`\\texttt{${Rf(z(p(e,1)))}}`},{name:"Latex",serialize:(n,e)=>e===null?"":F(tt(e,i=>z(i)??n.serialize(i)))},{name:"LatexString",serialize:(n,e)=>e===null?"":F(tt(e,i=>n.serialize(i)))},{name:"LatexTokens",serialize:Of},{name:"List",kind:"matchfix",openTrigger:"[",closeTrigger:"]",parse:as,serialize:(n,e)=>F(["\\bigl\\lbrack",Wt(", ")(n,e),"\\bigr\\rbrack"])},{kind:"matchfix",openTrigger:"(",closeTrigger:")",parse:Lf},{latexTrigger:[","],kind:"infix",precedence:20,parse:(n,e,i)=>{let t=du(n,i,e,20,",");return t===null?null:["Delimiter",["Sequence",...t],{str:","}]}},{latexTrigger:[","],kind:"prefix",precedence:20,parse:(n,e)=>{let i=du(n,e,null,20,",");return i===null?null:["Delimiter",["Sequence",...i],{str:","}]}},{name:"Range",latexTrigger:[".","."],kind:"infix",precedence:10,parse:qf,serialize:(n,e)=>{let i=N(e);if(i===null)return"";if(i.length===1)return"1.."+n.serialize(p(e,1));if(i.length===2)return n.wrap(p(e,1),10)+".."+n.wrap(p(e,2),10);if(i.length===3){let t=k(p(e,3)),r=k(p(e,1));return t!==null&&r!==null?n.wrap(p(e,1),10)+","+n.wrap(r+t,10)+".."+n.wrap(p(e,2),10):n.wrap(p(e,1),10)+","+(n.wrap(p(e,3),oe)+"+"+n.wrap(p(e,3),oe))+".."+n.wrap(p(e,2),10)}return""}},{latexTrigger:[";"],kind:"infix",precedence:19,parse:(n,e,i)=>{let t=du(n,i,e,19,";");return t===null?null:["Delimiter",["Sequence",...t],"';'"]}},{name:"String",latexTrigger:["\\text"],parse:n=>mu(n),serialize:(n,e)=>{let i=N(e);return i===null||i.length===0?"\\text{}":F(["\\text{",i.map(t=>n.serialize(t)).join(""),"}"])}},{name:"Subscript",latexTrigger:["_"],kind:"infix",serialize:(n,e)=>G(e)===2?n.serialize(p(e,1))+"_{"+n.serialize(p(e,2))+"}":"_{"+n.serialize(p(e,1))+"}"},{name:"Superplus",latexTrigger:["^","+"],kind:"postfix"},{name:"Subplus",latexTrigger:["_","+"],kind:"postfix"},{name:"Superminus",latexTrigger:["^","-"],kind:"postfix"},{name:"Subminus",latexTrigger:["_","-"],kind:"postfix"},{latexTrigger:["^","*"],kind:"postfix",parse:(n,e)=>["Superstar",e]},{latexTrigger:["_","*"],kind:"postfix",parse:(n,e)=>["Substar",e]},{name:"Substar",latexTrigger:["_","\\star"],kind:"postfix"},{name:"Superdagger",latexTrigger:["^","\\dagger"],kind:"postfix"},{latexTrigger:["^","\\dag"],kind:"postfix",parse:(n,e)=>["Superdagger",e]},{name:"Prime",latexTrigger:["^","\\prime"],kind:"postfix",parse:(n,e)=>vn(n,e,1),serialize:(n,e)=>{let i=k(p(e,2))??1,t=n.serialize(p(e,1));return i===1?t+"^\\prime":i===2?t+"^\\doubleprime":i===3?t+"^\\tripleprime":t+"^{("+n.serialize(p(e,2))+")}"}},{latexTrigger:"^{\\prime\\prime}",kind:"postfix",parse:(n,e)=>vn(n,e,2)},{latexTrigger:"^{\\prime\\prime\\prime}",kind:"postfix",parse:(n,e)=>vn(n,e,3)},{latexTrigger:["^","\\doubleprime"],kind:"postfix",parse:(n,e)=>vn(n,e,2)},{latexTrigger:["^","\\tripleprime"],kind:"postfix",parse:(n,e)=>vn(n,e,3)},{latexTrigger:"'",kind:"postfix",precedence:810,parse:(n,e)=>vn(n,e,1)},{latexTrigger:"\\prime",kind:"postfix",precedence:810,parse:(n,e)=>vn(n,e,1)},{latexTrigger:"\\doubleprime",kind:"postfix",precedence:810,parse:(n,e)=>vn(n,e,2)},{latexTrigger:"\\tripleprime",kind:"postfix",precedence:810,parse:(n,e)=>vn(n,e,3)},{latexTrigger:["^","<{>","("],kind:"postfix",parse:(n,e,i)=>{if(!n.computeEngine?.box(e)?.domain?.isFunction)return null;let t=n.index;n.addBoundary([")"]);let r=n.parseExpression(i);return!n.matchBoundary()||!n.match("<}>")?(n.index=t,null):["Derivative",e,r]}},{name:"InverseFunction",latexTrigger:"^{-1",kind:"postfix",parse:(n,e)=>{if(!n.computeEngine?.box(e)?.domain?.isFunction)return null;let i=0,t=n.index;for(;!n.atEnd&&!n.match("<}>");)if(n.match("'"))i++;else if(n.match("\\prime"))i++;else if(n.match("\\doubleprime"))i+=2;else if(n.match("\\tripleprime"))i+=3;else return n.index=t,null;return i===1?["Derivative",["InverseFunction",e]]:i>0?["Derivative",["InverseFunction",e],i]:["InverseFunction",e]},serialize:(n,e)=>n.serialize(p(e,1))+"^{-1}"},{name:"Derivative",serialize:(n,e)=>{let i=k(p(e,2))??1,t=n.serialize(p(e,1));return i===1?t+"^{\\prime}":i===2?t+"^{\\doubleprime}":i===3?t+"^{\\tripleprime}":t+"^{("+n.serialize(p(e,2))+")}"}},{kind:"environment",name:"Which",identifierTrigger:"cases",parse:cu,serialize:(n,e)=>{let i=[],t=N(e);if(t)for(let r=0;r<=t.length-2;r+=2){let u=[];u.push(n.serialize(t[r+1])),u.push(n.serialize(t[r])),i.push(u.join("&"))}return F(["\\begin{cases}",i.join("\\\\"),"\\end{cases}"])}},{kind:"environment",identifierTrigger:"dcases",parse:cu},{kind:"environment",identifierTrigger:"rcases",parse:cu}];function mu(n,e){if(!n.match("<{>"))return"''";let i=[],t="",r=null;for(;!n.atEnd&&!n.match("<}>");)if(n.peek==="<{>")i.push(mu(n));else if(n.match("\\textbf")&&n.match("<{>"))i.push(mu(n,{"font-weight":"bold"}));else if(n.match("\\color")){let o=n.parseStringGroup();o!==null&&(r!==null&&t?i.push(["Style",t,{dict:r}]):t&&i.push(["String",t]),t="",r={color:o})}else if(n.match("<space>"))t+=" ";else if(n.match("<$>")){let o=n.index,s=n.parseExpression()??["Sequence"];n.skipSpace(),n.match("<$>")?i.push(s):(t+="$",n.index=o)}else if(n.match("<$$>")){let o=n.index,s=n.parseExpression()??["Sequence"];n.skipSpace(),n.match("<$$>")?i.push(s):(t+="$$",n.index=o)}else{let o=n.matchChar()??n.nextToken();t+={"\\enskip":"\u2002","\\enspace":"\u2002","\\quad":"\u2003","\\qquad":"\u2003\u2003","\\space":"\u2003","\\ ":"\u2003","\\;":"\u2004","\\,":"\u2009","\\:":"\u205F","\\!":"","\\{":"{","\\}":"}","\\$":"$","\\&":"&","\\#":"#","\\%":"%","\\_":"_","\\textbackslash":"\\","\\textasciitilde":"~","\\textasciicircum":"^","\\textless":"<","\\textgreater":">","\\textbar":"|","\\textunderscore":"_","\\textbraceleft":"{","\\textbraceright":"}","\\textasciigrave":"`","\\textquotesingle":"'","\\textquotedblleft":"\u201C","\\textquotedblright":"\u201D","\\textquotedbl":'"',"\\textquoteleft":"\u2018","\\textquoteright":"\u2019","\\textbullet":"\u2022","\\textdagger":"\u2020","\\textdaggerdbl":"\u2021","\\textsection":"\xA7","\\textparagraph":"\xB6","\\textperiodcentered":"\xB7","\\textellipsis":"\u2026","\\textemdash":"\u2014","\\textendash":"\u2013","\\textregistered":"\xAE","\\texttrademark":"\u2122","\\textdegree":"\xB0"}[o]??o}r!==null&&t?i.push(["Style",`'${t}'`,{dict:r}]):t&&i.push(`'${t}'`);let u;return i.length===1?u=i[0]:i.every(o=>z(o)!==null)?u="'"+i.map(o=>z(o)).join()+"'":u=["String",...i],e?["Style",u,{dict:e}]:u}function Of(n,e){return e===null?"":F(tt(e,i=>{let t=z(i);return t===null?n.serialize(i):t==="<{>"?"{":t==="<}>"?"}":t==="<$>"?"$":t==="<$$>"?"$$":t==="<space>"?" ":t}))}function Rf(n){return n===null?"":n.replace(/[{}\[\]\\:\-\$%]/g,e=>({"{":"\\lbrace ","}":"\\rbrace ","[":"\\lbrack ","]":"\\rbrack ",":":"\\colon ","\\":"\\backslash "})[e]??"\\"+e)}function Pf(n,e){let i=p(e,2);return i?x(i)==="LatexString"?z(p(i,1))??"":x(i)==="Hold"?n.serialize(p(i,1)):n.serialize(i):""}function vn(n,e,i){let t=x(e);if(t==="Derivative"||t==="Prime"){let r=k(p(e,2))??1;return[t,O(p(e,1)),r+i]}return n.computeEngine?.box(e)?.domain?.isFunction?i===1?["Derivative",e]:["Derivative",e,i]:i===1?["Prime",O(e)]:["Prime",O(e),i]}function Lf(n,e){if(e===null||se(e))return["Delimiter"];let i=x(e);if(i==="Delimiter"&&p(e,2)){let t=z(p(e,2));if(t?.length===1)return["Delimiter",p(e,1)??["Sequence"],{str:`(${t})`}]}return i==="Sequence"?G(e)===0?["Delimiter"]:G(e)===1?["Delimiter",p(e,1)]:["Delimiter",e]:i==="Matrix"&&(z(p(e,2))??"..")===".."?["Matrix",p(e,1)]:["Delimiter",e]}function as(n,e){if(e===null||se(e))return["List"];let i=x(e);if(i==="Range"||i==="Linspace")return e;if(i==="Sequence")return["List",...N(e)??[]];if(i==="Delimiter"){let t=z(p(e,2))??"...";if(t===";"||t===".;.")return["List",...(N(p(e,1))??[]).map(r=>as(n,r))];if(t===","||t===".,.")return e=p(e,1),x(e)==="Sequence"?["List",...N(e)??[]]:["List",e??["Sequence"]]}return["List",e]}function qf(n,e){let i=n.index;if(!e)return null;let t=null,r=null;if(x(e)==="Sequence"){if(G(e)!==2)return null;if(t=p(e,1),r=p(e,2),r===null)return n.index=i,null}else t=p(e,1);if(t===null)return null;let u=n.parseExpression({minPrec:0});if(!u)return n.index=i,null;if(r){let o=k(r),s=k(t);return o!==null&&s!==null?["Range",t,u,o-s]:["Range",t,u,["Subtract",r,t]]}return["Range",t,u]}var Bi={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","\u27E6":"\\llbrack","\u27E7":"\\rrbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","\u2016":"\\Vert","\\":"\\backslash","\u2308":"\\lceil","\u2309":"\\rceil","\u230A":"\\lfloor","\u230B":"\\rfloor","\u231C":"\\ulcorner","\u231D":"\\urcorner","\u231E":"\\llcorner","\u231F":"\\lrcorner","\u23B0":"\\lmoustache","\u23B1":"\\rmoustache"};function Yt(n,e){let i=n.index;if(x(e)==="InvisibleOperator"&&G(e)===2&&x(p(e,2))==="Delimiter"){let r=V(p(e,1));if(!r)return null;let u=n.parseExpression({minPrec:0});if(u===null)return n.index=i,null;let o=p(p(e,2),1),s=[];return x(o)==="Sequence"?s=N(o)??[]:o&&(s=[o]),["Assign",r,["Function",u,...s??[]]]}if(typeof x(e)=="string"){let r=x(e),u=N(e)??[],o=n.parseExpression({minPrec:0});return o===null?(n.index=i,null):["Assign",r,["Function",o,...u]]}if(!V(e))return null;let t=n.parseExpression({minPrec:0});return t===null?(n.index=i,null):["Assign",e,t]}function cu(n){let e=n.parseTabular();if(!e)return["Which"];let i=["Which"];for(let t of e)if(t.length===1)i.push("True"),i.push(t[0]);else if(t.length===2){let r=z(t[1]);i.push(r?"True":su(t[1])??"True"),i.push(t[0])}return i}var pu=[{latexTrigger:["\\not","<"],kind:"infix",associativity:"any",precedence:246,parse:"NotLess"},{name:"NotLess",latexTrigger:["\\nless"],kind:"infix",associativity:"any",precedence:246},{latexTrigger:["<"],kind:"infix",associativity:"any",precedence:245,parse:"Less"},{name:"Less",latexTrigger:["\\lt"],kind:"infix",associativity:"any",precedence:245},{latexTrigger:["<","="],kind:"infix",associativity:"any",precedence:241,parse:"LessEqual"},{name:"LessEqual",latexTrigger:["\\le"],kind:"infix",associativity:"any",precedence:241},{latexTrigger:["\\leq"],kind:"infix",associativity:"any",precedence:241,parse:"LessEqual"},{latexTrigger:["\\leqslant"],kind:"infix",associativity:"any",precedence:w+5,parse:"LessEqual"},{name:"LessNotEqual",latexTrigger:["\\lneqq"],kind:"infix",associativity:"any",precedence:w},{name:"NotLessNotEqual",latexTrigger:["\\nleqq"],kind:"infix",associativity:"any",precedence:w},{name:"LessOverEqual",latexTrigger:["\\leqq"],kind:"infix",associativity:"any",precedence:w+5},{name:"GreaterOverEqual",latexTrigger:["\\geqq"],kind:"infix",associativity:"any",precedence:w+5,parse:"GreaterEqual"},{name:"Equal",latexTrigger:["="],kind:"infix",associativity:"right",precedence:w},{latexTrigger:["*","="],kind:"infix",associativity:"right",precedence:w,parse:"StarEqual"},{name:"StarEqual",latexTrigger:["\\star","="],kind:"infix",associativity:"right",precedence:w},{name:"PlusEqual",latexTrigger:["+","="],kind:"infix",associativity:"right",precedence:w},{name:"MinusEqual",latexTrigger:["-","="],kind:"infix",associativity:"right",precedence:w},{name:"SlashEqual",latexTrigger:["/","="],kind:"infix",associativity:"right",precedence:w},{name:"EqualEqual",latexTrigger:["=","="],kind:"infix",associativity:"right",precedence:w},{name:"EqualEqualEqual",latexTrigger:["=","=","="],kind:"infix",associativity:"right",precedence:w+5},{name:"TildeFullEqual",latexTrigger:["\\cong"],kind:"infix",associativity:"right",precedence:w},{name:"NotTildeFullEqual",latexTrigger:["\\ncong"],kind:"infix",associativity:"right",precedence:w},{name:"Approx",latexTrigger:["\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"NotApprox",latexTrigger:["\\not","\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"ApproxEqual",latexTrigger:["\\approxeq"],kind:"infix",associativity:"right",precedence:w},{name:"NotApproxEqual",latexTrigger:["\\not","\\approxeq"],kind:"infix",associativity:"right",precedence:250},{name:"NotEqual",latexTrigger:["\\ne"],kind:"infix",associativity:"right",precedence:255},{name:"Unequal",latexTrigger:["!","="],kind:"infix",associativity:"right",precedence:w},{name:"GreaterEqual",latexTrigger:["\\ge"],kind:"infix",associativity:"right",precedence:242},{latexTrigger:["\\geq"],kind:"infix",associativity:"right",precedence:242,parse:"GreaterEqual"},{latexTrigger:[">","="],kind:"infix",associativity:"right",precedence:243,parse:"GreaterEqual"},{latexTrigger:["\\geqslant"],kind:"infix",associativity:"right",precedence:w+5,parse:"GreaterEqual"},{name:"GreaterNotEqual",latexTrigger:["\\gneqq"],kind:"infix",associativity:"right",precedence:w},{name:"NotGreaterNotEqual",latexTrigger:["\\ngeqq"],kind:"infix",associativity:"right",precedence:w},{latexTrigger:[">"],kind:"infix",associativity:"right",precedence:245,parse:"Greater"},{name:"Greater",latexTrigger:["\\gt"],kind:"infix",associativity:"right",precedence:245},{name:"NotGreater",latexTrigger:["\\ngtr"],kind:"infix",associativity:"right",precedence:244},{latexTrigger:["\\not",">"],kind:"infix",associativity:"right",precedence:244,parse:"NotGreater"},{name:"RingEqual",latexTrigger:["\\circeq"],kind:"infix",associativity:"right",precedence:w},{name:"TriangleEqual",latexTrigger:["\\triangleq"],kind:"infix",associativity:"right",precedence:w},{name:"DotEqual",latexTrigger:["\\doteq"],kind:"infix",associativity:"right",precedence:w+5},{name:"DotEqualDot",latexTrigger:["\\doteqdot"],kind:"infix",associativity:"right",precedence:w+5},{name:"FallingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:w+5},{name:"RisingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:w+5},{name:"QuestionEqual",latexTrigger:["\\questeq"],kind:"infix",associativity:"right",precedence:w},{name:"MuchLess",latexTrigger:["\\ll"],kind:"infix",associativity:"right",precedence:w},{name:"MuchGreater",latexTrigger:["\\gg"],kind:"infix",associativity:"right",precedence:w},{name:"Precedes",latexTrigger:["\\prec"],kind:"infix",associativity:"right",precedence:w},{name:"Succeeds",latexTrigger:["\\succ"],kind:"infix",associativity:"right",precedence:w},{name:"PrecedesEqual",latexTrigger:["\\preccurlyeq"],kind:"infix",associativity:"right",precedence:w},{name:"SucceedsEqual",latexTrigger:["\\curlyeqprec"],kind:"infix",associativity:"right",precedence:w},{name:"NotPrecedes",latexTrigger:["\\nprec"],kind:"infix",associativity:"right",precedence:w},{name:"NotSucceeds",latexTrigger:["\\nsucc"],kind:"infix",associativity:"right",precedence:w},{name:"Between",latexTrigger:["\\between"],kind:"infix",associativity:"right",precedence:w+5}];function Nn(n){return typeof n!="string"?!1:pu.some(e=>e.name===n)}var fs=[{name:"Matrix",serialize:(n,e)=>{let i=N(p(e,1))??[];return ls(n,i,z(p(e,2)),z(p(e,3)))}},{name:"Vector",serialize:(n,e)=>{let i=N(e)??[];return ls(n,i.map(t=>["List",t]),z(p(e,2)),z(p(e,3)))}},{kind:"environment",identifierTrigger:"pmatrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:"()"},{str:e}]:[i,t]}},{kind:"environment",identifierTrigger:"bmatrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:"[]"},{str:e}]:[i,t,{str:"[]"}]}},{kind:"environment",identifierTrigger:"Bmatrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:"{}"},{str:e}]:[i,t,{str:"{}"}]}},{kind:"environment",identifierTrigger:"vmatrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:"||"},{str:e}]:[i,t,{str:"||"}]}},{kind:"environment",identifierTrigger:"Vmatrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:"\u2016\u2016"},{str:e}]:[i,t,{str:"\u2016\u2016"}]}},{kind:"environment",identifierTrigger:"smallmatrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:"()"},{str:e}]:[i,t]}},{kind:"environment",identifierTrigger:"array",parse:n=>{let e=Sn(n,!1),[i,t]=_n(n);return e?[i,t,{str:".."},{str:e}]:[i,t,{str:".."}]}},{kind:"environment",identifierTrigger:"matrix",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:".."},{str:e}]:[i,t,{str:".."}]}},{kind:"environment",identifierTrigger:"matrix*",parse:n=>{let e=Sn(n),[i,t]=_n(n);return e?[i,t,{str:".."},{str:e}]:[i,t,{str:".."}]}},{name:"ConjugateTranspose",kind:"postfix",latexTrigger:["^","\\star"]},{kind:"postfix",latexTrigger:["^","\\H"],parse:"ConjugateTranspose"},{kind:"postfix",latexTrigger:["^","\\dagger"],parse:(n,e)=>["ConjugateTranspose",e]},{kind:"postfix",latexTrigger:["^","\\ast"],parse:(n,e)=>["ConjugateTranspose",e]},{kind:"postfix",latexTrigger:["^","\\top"],parse:(n,e)=>["Transpose",e]},{kind:"postfix",latexTrigger:["^","\\intercal"],parse:(n,e)=>["Transpose",e]},{name:"Transpose",kind:"postfix",latexTrigger:["^","T"]},{name:"PseudoInverse",kind:"postfix",latexTrigger:["^","+"]},{name:"Trace",kind:"function",identifierTrigger:"tr"},{name:"Determinant",kind:"function",identifierTrigger:"det"}];function _n(n){let e=n.parseTabular();return e?["Matrix",["List",...e.map(i=>["List",...i])]]:["",null]}function Sn(n,e=!0){let i=n.parseStringGroup(e)?.trim();if(!i)return"";let t="";for(let r of i)r==="c"&&(t+="="),r==="l"&&(t+="<"),r==="r"&&(t+=">"),r==="|"&&(t+="|"),r===":"&&(t+=":");return t}function ls(n,e,i,t){i??(i="()");let[r,u]=["",""];typeof i=="string"&&i.length===2&&([r,u]=i);let o="";if(t)for(let f of t)f==="<"?o+="l":f===">"?o+="r":f==="="?o+="c":f==="|"?o+="|":f===":"&&(o+=":");let s=[];for(let f of e??[]){let d=[];for(let c of N(f)??[])d.push(n.serialize(c));s.push(d.join(" & "))}let a=s.join(`\\\\
`),l=o.length>0?`[${o}]`:"";return r==="("&&u===")"?F(["\\begin{pmatrix}",l,a,"\\end{pmatrix}"]):r==="["&&u==="]"?F(["\\begin{bmatrix}",l,a,"\\end{bmatrix}"]):r==="{"&&u==="}"?F(["\\begin{Bmatrix}",l,a,"\\end{Bmatrix}"]):r==="|"&&u==="|"?F(["\\begin{vmatrix}",l,a,"\\end{vmatrix}"]):r==="\u2016"&&u==="\u2016"?F(["\\begin{Vmatrix}",l,a,"\\end{Vmatrix}"]):r==="{"&&u==="."?F(["\\begin{dcases}",l,a,"\\end{dcases}"]):r==="."&&u==="}"?F(["\\begin{rcases}",l,a,"\\end{rcases}"]):o||r!=="."||u!=="."?F(["\\left",Bi[r]??r,"\\begin{array}",`{${o}}`,a,"\\end{array}","\\right",Bi[u]??u]):F(["\\begin{matrix}",a,"\\end{matrix}"])}var ds=[{name:"True",kind:"symbol",latexTrigger:["\\top"]},{kind:"symbol",latexTrigger:"\\mathrm{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\operatorname{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\mathsf{T}",parse:"True"},{name:"False",kind:"symbol",latexTrigger:["\\bot"]},{kind:"symbol",latexTrigger:"\\operatorname{False}",parse:"False"},{kind:"symbol",latexTrigger:"\\mathsf{F}",parse:"False"},{name:"And",kind:"infix",latexTrigger:["\\land"],precedence:317},{kind:"infix",latexTrigger:["\\wedge"],parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\&",parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\operatorname{and}",parse:"And",precedence:317},{name:"Or",kind:"infix",latexTrigger:["\\lor"],precedence:310},{kind:"infix",latexTrigger:["\\vee"],parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\parallel",parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\operatorname{or}",parse:"Or",precedence:310},{name:"Xor",kind:"infix",latexTrigger:["\\veebar"],precedence:315},{name:"Not",kind:"prefix",latexTrigger:["\\lnot"],precedence:880},{kind:"prefix",latexTrigger:["\\neg"],parse:"Not",precedence:880},{name:"Nand",kind:"infix",latexTrigger:["\\barwedge"],precedence:315},{name:"Nor",kind:"infix",latexTrigger:["\u22BD"],precedence:315},{kind:"function",identifierTrigger:"and",parse:"And"},{kind:"function",identifierTrigger:"or",parse:"Or"},{kind:"function",identifierTrigger:"not",parse:"Not"},{name:"Implies",kind:"infix",precedence:220,associativity:"right",latexTrigger:["\\implies"],serialize:"\\implies"},{latexTrigger:["\\Rightarrow"],kind:"infix",precedence:220,associativity:"right",parse:"Implies"},{name:"Equivalent",latexTrigger:["\\iff"],kind:"infix",associativity:"right",precedence:219},{latexTrigger:["\\Leftrightarrow"],kind:"infix",associativity:"right",precedence:219,parse:"Equivalent"},{latexTrigger:["\\equiv"],kind:"infix",associativity:"right",precedence:219,parse:(n,e,i)=>{let t=n.parseExpression({...i,minPrec:219}),r=n.index,u=n.parseExpression({...i,minPrec:219});return u&&x(u)==="Mod"?["Congruent",e,t,O(p(u,1))]:(n.index=r,["Equivalent",e,O(t)])}},{name:"Proves",kind:"infix",latexTrigger:["\\vdash"],precedence:220,associativity:"right",serialize:"\\vdash"},{name:"Entails",kind:"infix",latexTrigger:["\\vDash"],precedence:220,associativity:"right",serialize:"\\vDash"},{name:"Satisfies",kind:"infix",latexTrigger:["\\models"],precedence:220,associativity:"right",serialize:"\\models"},{name:"ForAll",kind:"prefix",latexTrigger:["\\forall"],precedence:200,serialize:"\\forall",parse:Du("ForAll")},{name:"Exists",kind:"prefix",latexTrigger:["\\exists"],precedence:200,serialize:"\\exists",parse:Du("Exists")},{name:"ExistsUnique",kind:"prefix",latexTrigger:["\\exists","!"],precedence:200,serialize:"\\exists!",parse:Du("ExistsUnique")}];function Du(n){return(e,i)=>{let t=e.index,r=e.parseSymbol(i);if(r){if(e.skipSpace(),e.match(",")||e.match("\\mid")||e.match(".")){let o=e.parseExpression(i);return[n,r,O(o)]}if(e.match("(")){let o=e.parseExpression(i);return e.match(")")?[n,r,O(o)]:(e.index=t,null)}}e.index=t;let u=e.parseExpression(i);if(!u)return e.index=t,null;if(e.skipSpace(),e.matchAny([",","\\mid",":","\\colon"])){let o=e.parseExpression(i);return[n,u,O(o)]}if(e.match("(")){let o=e.parseExpression(i);return e.match(")")?[n,u,O(o)]:(e.index=t,null)}return e.index=t,null}}function Oe(n){return e=>{let i=e.parseGroup();return i===null?[n]:[n,i]}}var cs=[{name:"Overscript",latexTrigger:["\\overset"],kind:"infix",precedence:700},{name:"Underscript",latexTrigger:["\\underset"],kind:"infix",precedence:700},{name:"Increment",latexTrigger:["+","+"],kind:"postfix",precedence:880},{name:"Decrement",latexTrigger:["-","-"],kind:"postfix",precedence:880},{name:"PreIncrement",latexTrigger:["+","+"],kind:"prefix",precedence:880},{name:"PreDecrement",latexTrigger:["-","-"],kind:"prefix",precedence:880},{name:"Ring",latexTrigger:["\\circ"],kind:"infix",precedence:265},{name:"StringJoin",latexTrigger:["\\lt","\\gt"],kind:"infix",precedence:780},{name:"Starstar",latexTrigger:["\\star","\\star"],kind:"infix",precedence:780},{name:"PartialDerivative",latexTrigger:["\\partial"],kind:"prefix",parse:n=>{let e=!1,i="Nothing",t="Nothing";for(;!e;)n.skipSpace(),n.match("_")?t=n.parseGroup()??n.parseToken():n.match("^")?i=n.parseGroup()??n.parseToken():e=!0;let r=Jt(t);if(r&&(t=["List",...r]),t===null||i===null)return null;let u=n.parseGroup()??"Nothing";if(u!=="Nothing"&&!se(u)){let o=n.parseArguments()??["Nothing"];u=[u,...o]}return["PartialDerivative",u,t,i]},serialize:(n,e)=>{let i="\\partial",t=p(e,1),r=p(e,2),u=p(e,3);return r!==null&&r!=="Nothing"&&(x(r)==="List"?i+="_{"+n.serialize(["Sequence",...N(r)??[]])+"}":i+="_{"+n.serialize(r)+"}"),u!==null&&u!=="Nothing"&&(i+="^{"+n.serialize(u)+"}"),t!==null&&t!=="Nothing"&&(i+=n.serialize(t)),i},precedence:740},{name:"OverBar",latexTrigger:["\\overline"],parse:Oe("OverBar")},{name:"UnderBar",latexTrigger:["\\underline"],parse:Oe("UnderBar")},{name:"OverVector",latexTrigger:["\\vec"],parse:Oe("OverVector")},{name:"OverTilde",latexTrigger:["\\tilde"],parse:Oe("OverTilde")},{name:"OverHat",latexTrigger:["\\hat"],parse:Oe("OverHat")},{name:"OverRightArrow",latexTrigger:["\\overrightarrow"],parse:Oe("OverRightArrow")},{name:"OverLeftArrow",latexTrigger:["\\overleftarrow"],parse:Oe("OverLeftArrow")},{name:"OverRightDoubleArrow",latexTrigger:["\\Overrightarrow"],parse:Oe("OverRightDoubleArrow")},{name:"OverLeftHarpoon",latexTrigger:["\\overleftharpoon"],parse:Oe("OverLeftHarpoon")},{name:"OverRightHarpoon",latexTrigger:["\\overrightharpoon"],parse:Oe("OverRightHarpoon")},{name:"OverLeftRightArrow",latexTrigger:["\\overleftrightarrow"],parse:Oe("OverLeftRightArrow")},{name:"OverBrace",latexTrigger:["\\overbrace"],parse:Oe("OverBrace")},{name:"OverLineSegment",latexTrigger:["\\overlinesegment"],parse:Oe("OverLineSegment")},{name:"OverGroup",latexTrigger:["\\overgroup"],parse:Oe("OverGroup")},{latexTrigger:["\\displaystyle"],parse:()=>["Sequence"]},{latexTrigger:["\\textstyle"],parse:()=>["Sequence"]},{latexTrigger:["\\scriptstyle"],parse:()=>["Sequence"]},{latexTrigger:["\\scriptscriptstyle"],parse:()=>["Sequence"]},{latexTrigger:["\\tiny"],parse:()=>["Sequence"]},{latexTrigger:["\\scriptsize"],parse:()=>["Sequence"]},{latexTrigger:["\\footnotesize"],parse:()=>["Sequence"]},{latexTrigger:["\\small"],parse:()=>["Sequence"]},{latexTrigger:["\\normalsize"],parse:()=>["Sequence"]},{latexTrigger:["\\large"],parse:()=>["Sequence"]},{latexTrigger:["\\Large"],parse:()=>["Sequence"]},{latexTrigger:["\\LARGE"],parse:()=>["Sequence"]},{latexTrigger:["\\huge"],parse:()=>["Sequence"]},{latexTrigger:["\\Huge"],parse:()=>["Sequence"]},{name:"Style",serialize:(n,e)=>{let i=n.serialize(p(e,1)),t=ri(p(e,2));if(t===null)return i;z(t.display)==="block"?i=F(["{\\displaystyle",i,"}"]):z(t.display)==="inline"?i=F(["{\\textstyle",i,"}"]):z(t.display)==="script"?i=F(["{\\scriptstyle",i,"}"]):z(t.display)==="scriptscript"&&(i=F(["{\\scriptscriptstyle",i,"}"]));let r=k(t.size);return r!==null&&r>=1&&r<=10&&(i=F(["{",{1:"\\tiny",2:"\\scriptsize",3:"\\footnotesize",4:"\\small",5:"\\normalsize",6:"\\large",7:"\\Large",8:"\\LARGE",9:"\\huge",10:"\\Huge"}[r],i,"}"])),i}},{latexTrigger:["\\!"],parse:()=>["HorizontalSpacing",-3]},{latexTrigger:["\\ "],parse:()=>["HorizontalSpacing",6]},{latexTrigger:["\\:"],parse:()=>["HorizontalSpacing",4]},{latexTrigger:["\\enskip"],parse:()=>["HorizontalSpacing",9]},{latexTrigger:["\\quad"],parse:()=>["HorizontalSpacing",18]},{latexTrigger:["\\qquad"],parse:()=>["HorizontalSpacing",36]},{latexTrigger:["\\,"],parse:()=>["HorizontalSpacing",3]},{latexTrigger:["\\;"],parse:()=>["HorizontalSpacing",5]},{latexTrigger:["\\enspace"],parse:()=>["HorizontalSpacing",9]},{name:"HorizontalSpacing",serialize:(n,e)=>{if(p(e,2))return n.serialize(p(e,1));let i=k(p(e,1));return i===null?"":{"-3":"\\!",6:"\\ ",3:"\\,",4:"\\:",5:"\\;",9:"\\enspace",18:"\\quad",36:"\\qquad"}[i]??""}}];function W(n){return(e,i)=>{let t={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arctan","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arcsech":"Arcsech","\\arccsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"},r=t[n??""]??n??"";if(e.atTerminator(i))return r;let u=r;do{let l=e.parsePostfixOperator(u,i);if(l===null)break;u=l}while(!0);let o=null;e.match("^")&&(o=e.parseGroup()??e.parseToken());let s=e.parseArguments("implicit",{minPrec:we,condition:l=>t[l.peek]||(i?.condition?.(l)??!1)}),a=s===null?u:typeof u=="string"?[u,...s]:["Apply",u,...s];return o===null?a:["Power",a,o]}}var ms=[{name:"Arcsin",latexTrigger:["\\arcsin"],parse:W("Arcsin")},{name:"Arccos",latexTrigger:["\\arccos"],parse:W("Arccos")},{name:"Arctan",latexTrigger:["\\arctan"],parse:W("Arctan")},{latexTrigger:["\\arctg"],parse:W("Arctan")},{name:"Arccot",latexTrigger:["\\arcctg"],parse:W("Arccot")},{name:"Arcsec",latexTrigger:"arcsec",parse:W("Arcsec")},{name:"Arccsc",latexTrigger:["\\arccsc"],parse:W("Arccsc")},{name:"Arsinh",latexTrigger:["\\arsinh"],parse:W("Arsinh")},{name:"Arcosh",latexTrigger:["\\arcosh"],parse:W("Arcosh")},{name:"Artanh",latexTrigger:["\\artanh"],parse:W("Artanh")},{name:"Arsech",latexTrigger:["\\arsech"],parse:W("Arsech")},{name:"Arcsch",latexTrigger:["\\arcsch"],parse:W("Arcsch")},{latexTrigger:["\\ch"],parse:W("Cosh")},{name:"Cosec",latexTrigger:["\\cosec"],parse:W("Cosec")},{name:"Cosh",latexTrigger:["\\cosh"],parse:W("Cosh")},{name:"Cot",latexTrigger:["\\cot"],parse:W("Cot")},{latexTrigger:["\\cotg"],parse:W("Cot")},{name:"Coth",latexTrigger:["\\coth"],parse:W("Coth")},{name:"Csc",latexTrigger:["\\csc"],parse:W("Csc")},{latexTrigger:["\\ctg"],parse:W("Cot")},{latexTrigger:["\\cth"],parse:W("Cotanh")},{name:"Sec",latexTrigger:["\\sec"],parse:W("Sec")},{name:"Sinh",latexTrigger:["\\sinh"],parse:W("Sinh")},{latexTrigger:["\\sh"],parse:W("Sinh")},{name:"Tan",latexTrigger:["\\tan"],parse:W("Tan")},{latexTrigger:["\\tg"],parse:W("Tan")},{name:"Tanh",latexTrigger:["\\tanh"],parse:W("Tanh")},{latexTrigger:["\\th"],parse:W("Tanh")},{name:"Cos",latexTrigger:["\\cos"],parse:W("Cos")},{name:"Sin",latexTrigger:["\\sin"],parse:W("Sin")}];var Ds=[{name:"AlgebraicNumbers",latexTrigger:"\\bar\\Q"},{name:"ComplexNumbers",latexTrigger:["\\C"]},{latexTrigger:"\\mathbb{C}",parse:"ComplexNumbers"},{name:"ImaginaryNumbers",latexTrigger:["\\imaginaryI","\\R"]},{name:"ExtendedComplexNumbers",latexTrigger:["\\bar","\\C"]},{name:"EmptySet",latexTrigger:["\\emptyset"]},{latexTrigger:["\\varnothing"],parse:"EmptySet"},{name:"Integers",latexTrigger:["\\Z"]},{latexTrigger:"\\mathbb{Z}",parse:"Integers"},{name:"RationalNumbers",latexTrigger:["\\Q"]},{name:"RealNumbers",latexTrigger:["\\R"]},{latexTrigger:"\\mathbb{R}",parse:"RealNumbers"},{name:"ExtendedRealNumbers",latexTrigger:["\\bar","\\R"]},{name:"TranscendentalNumberss",latexTrigger:"\\R-\\bar\\Q"},{latexTrigger:"\\R\\backslash\\bar\\Q",parse:"TranscendentalNumbers"},{name:"NegativeNumbers",latexTrigger:"\\R^-"},{latexTrigger:"\\R^{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R_-",parse:"NegativeNumbers"},{latexTrigger:"\\R_{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{\\lt}",parse:"NegativeNumbers"},{name:"PositiveNumbers",latexTrigger:"\\R^+"},{latexTrigger:"\\R^{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R_+",parse:"PositiveNumbers"},{latexTrigger:"\\R_{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{\\gt}",parse:"PositiveNumbers"},{name:"NonPositiveNumbers",latexTrigger:"\\R^{0-}"},{latexTrigger:"\\R^{-0}",parse:"NonPositiveNumbers"},{latexTrigger:"\\R^{\\leq}",parse:"NonPositiveNumbers"},{name:"NegativeIntegers",latexTrigger:"\\Z^-"},{latexTrigger:"\\Z^-",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z_-",parse:"NegativeIntegers"},{latexTrigger:"\\Z_{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{\\lt}",parse:"NegativeIntegers"},{name:"PositiveIntegers",latexTrigger:"\\Z^+"},{latexTrigger:"\\Z^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z_+",parse:"PositiveIntegers"},{latexTrigger:"\\Z_{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt0}",parse:"PositiveIntegers"},{latexTrigger:"\\N^+",parse:"PositiveIntegers"},{latexTrigger:"\\N^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\N^*",parse:"PositiveIntegers"},{latexTrigger:"\\N^{*}",parse:"PositiveIntegers"},{latexTrigger:"\\N^\\star",parse:"PositiveIntegers"},{latexTrigger:"\\N^{\\star}",parse:"PositiveIntegers"},{latexTrigger:"\\N_1",parse:"PositiveIntegers"},{latexTrigger:"\\N_{1}",parse:"PositiveIntegers"},{name:"NonNegativeIntegers",latexTrigger:["\\N"]},{latexTrigger:"\\Z^{+0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{0+}",parse:"NonNegativeIntegers"},{latexTrigger:"\\mathbb{N}",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_0",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_{0}",parse:"NonNegativeIntegers"},{name:"CartesianProduct",latexTrigger:["\\times"],kind:"infix",associativity:"right",precedence:390,parse:(n,e,i)=>{if(390<i.minPrec)return null;let t=n.computeEngine;if(!t||!t.box(e).domain?.isCompatible("Sets"))return null;let r=n.index,u=n.parseExpression({...i,minPrec:390});return u===null||t.box(e).domain?.isCompatible("Sets")!==!0?(n.index=r,null):["CartesianProduct",e,u]}},{latexTrigger:["^","\\complement"],kind:"postfix",parse:(n,e)=>["Complement",e]},{name:"Complement",latexTrigger:["^","<{>","\\complement","<}>"],kind:"postfix"},{name:"Intersection",latexTrigger:["\\cap"],kind:"infix",precedence:350},{name:"Interval",serialize:ps},{name:"Multiple",serialize:ps},{name:"Union",latexTrigger:["\\cup"],kind:"infix",precedence:350},{name:"Set",kind:"matchfix",openTrigger:"{",closeTrigger:"}",parse:(n,e)=>e===null||se(e)?"EmptySet":(x(e)=="Delimiter"&&z(p(e,2))===","&&(e=p(e,1)),x(e)!=="Sequence"?["Set",e]:["Set",...N(e)??[]]),serialize:(n,e)=>F(["\\lbrace",(N(e)??[]).map(i=>n.serialize(i)).join(", "),"\\rbrace"])},{name:"SetMinus",latexTrigger:["\\setminus"],kind:"infix",precedence:650},{name:"SymmetricDifference",latexTrigger:["\\triangle"],kind:"infix",precedence:w},{latexTrigger:["\\ni"],kind:"infix",associativity:"none",precedence:160,parse:(n,e,i)=>{let t=n.parseExpression(i);return t===null?null:["Element",t,e]}},{name:"Element",latexTrigger:["\\in"],kind:"infix",precedence:240},{name:"NotElement",latexTrigger:["\\notin"],kind:"infix",precedence:240},{name:"NotSubset",latexTrigger:["\\nsubset"],kind:"infix",associativity:"none",precedence:240},{name:"NotSuperset",latexTrigger:["\\nsupset"],kind:"infix",associativity:"none",precedence:240},{name:"NotSubsetNotEqual",latexTrigger:["\\nsubseteq"],kind:"infix",associativity:"none",precedence:240},{name:"NotSupersetNotEqual",latexTrigger:["\\nsupseteq"],kind:"infix",associativity:"none",precedence:240},{name:"SquareSubset",latexTrigger:["\\sqsubset"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSubsetEqual",latexTrigger:["\\sqsubseteq"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSuperset",latexTrigger:["\\sqsupset"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSupersetEqual",latexTrigger:["\\sqsupseteq"],kind:"infix",associativity:"none",precedence:265},{name:"Subset",latexTrigger:["\\subset"],kind:"infix",associativity:"none",precedence:240},{latexTrigger:["\\subsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Subset"},{latexTrigger:["\\varsubsetneqq"],kind:"infix",associativity:"none",precedence:240,parse:"Subset"},{name:"SubsetEqual",latexTrigger:["\\subseteq"],kind:"infix",associativity:"none",precedence:240},{name:"Superset",latexTrigger:["\\supset"],kind:"infix",associativity:"none",precedence:240},{latexTrigger:["\\supsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Superset"},{latexTrigger:["\\varsupsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Superset"},{name:"SupersetEqual",latexTrigger:["\\supseteq"],kind:"infix",associativity:"none",precedence:240}];function ps(n,e){if(e===null)return"";let i=x(e);if(i===null)return"";if(i==="Set")return G(e)===0?"\\emptyset":G(e)===2&&x(p(e,2))==="Condition"?F(["\\left\\lbrace",n.serialize(p(e,1)),"\\middle\\mid",n.serialize(p(e,2)),"\\right\\rbrace"]):F(["\\left\\lbrace",...(N(e)??[]).map(r=>n.serialize(r)+" ,"),"\\right\\rbrace"]);if(i==="Range")return F(["\\mathopen\\lbrack",n.serialize(p(e,1)),", ",n.serialize(p(e,2)),"\\mathclose\\rbrack"]);if(i==="Interval"){let r=p(e,1),u=p(e,2),o=!1,s=!1;return x(r)==="Open"&&(r=p(r,1),o=!0),x(u)==="Open"&&(u=p(u,1),s=!0),F([`\\mathopen${o?"\\rbrack":"\\lbrack"}`,n.serialize(r),", ",n.serialize(u),`\\mathclose${s?"\\lbrack":"\\rbrack"}`])}let t=n.numericSetStyle(e,n.level);return""}function vi(n,e=1){return i=>{i.skipSpace();let t=null,r=null;for(;!(r!==null&&t!==null)&&(i.peek==="_"||i.peek==="^");)i.match("_")?r=i.parseGroup()??i.parseToken():i.match("^")&&(t=i.parseGroup()??i.parseToken()),i.skipSpace();(r==="Nothing"||se(r))&&(r=null),(t==="Nothing"||se(t))&&(t=null);let[u,o]=$f(i,e);if(u&&!o){if(x(u)==="Add"||x(u)==="Subtract"){let s=[],a=[];for(let l of N(u)??[])if(o)a.push(l);else{let f;[f,o]=pn(l),s.push(f??l)}if(o!==null&&a.length>0)return["Add",hs(i,n,["Add",...s],[{index:o,sub:r,sup:t}]),...a]}else if(x(u)==="Divide"){let s;[s,o]=pn(p(u,1)),s!==null&&o!==null&&(u=["Divide",s,p(u,2)])}}return hs(i,n,u,[{index:o,sub:r,sup:t}])}}function hs(n,e,i,t){if(i&&t.length===0)return[e,i];if(i??(i="Nothing"),n.computeEngine){let r=n.computeEngine,u=!1,o={};for(let s of t)s.index&&(u=!0,o[s.index]={domain:"ExtendedRealNumbers"});u&&r.pushScope().declare(o),i=r.box(i).json,u&&r.popScope()}return[e,i,...t.map(r=>Vf(r))]}function Vf(n){let e=n.index?["Hold",n.index]:"Nothing";return n.sup!==null?["Tuple",e,n.sub??"Nothing",n.sup]:n.sub!==null?["Tuple",e,n.sub]:e}function $f(n,e=1){let i=n.index,t=!1,r=n.parseExpression({minPrec:266,condition:()=>((n.matchAll(["\\mathrm","<{>","d","<}>"])||n.matchAll(["\\operatorname","<{>","d","<}>"]))&&(t=!0),t)});if(t||(n.index=i,r=n.parseExpression({minPrec:266,condition:()=>(n.match("d")&&(t=!0),t)})),r&&!t)return pn(r);let u=zf(n,e);return[r,u[0]??null]}function zf(n,e=1){n.skipSpace();let i=[],t=V(n.parseSymbol());return t===null?[]:(i.push(t),i)}function pn(n){let e=x(n),i=p(n,1);if(!i)return[n,null];if(e==="Sequence"&&G(n)===1)return pn(i);if(e==="Multiply"||e==="InvisibleOperator"){let t=N(n);if(t&&t.length>1){let r=V(t[t.length-2]);if(r==="d"||r==="d_upright")return t.length===2?[null,V(t[1])]:t.length===3?[t[0],V(t[2])]:[["Multiply",...t.slice(0,-2)],V(t[t.length-1])];let[u,o]=pn(t[t.length-1]);if(u)return[["Multiply",...t.slice(0,-1),u],o]}}else if(e==="Delimiter"){let[t,r]=pn(i);if(r)return t?[["Delimiter",["Sequence",t],...N(n).slice(1)],r]:[null,r]}else if(e==="Add"){let t=N(n);if(t&&t.length>0){let[r,u]=pn(t[t.length-1]);if(u){if(r)return[["Add",...t.slice(0,-1),r],u];if(t.length>2)return[["Add",...t.slice(0,-1)],u];if(t.length>2)return[t[0],u]}}}else if(e==="Negate"){let[t,r]=pn(i);if(r)return[t?["Negate",t]:null,r]}else if(e==="Divide"){let[t,r]=pn(i);if(r)return[["Divide",t??1,p(n,2)],r]}else{let t=N(n);if(t?.length===1){let[r,u]=pn(t[0]);if(u)return[[x(n),r],u]}}return[n,null]}function gs(n){return(e,i)=>{if(!p(i,1))return n;let t=p(i,2),r=x(t),u=null;r==="Tuple"||r==="Triple"||r==="Pair"||r==="Single"?u=p(t,1):r==="Hold"?u=p(t,1):(u=p(t,1)??"x",t=null),x(u)==="Hold"&&(u=p(u,1));let o=u!==null?V(u):null,s=p(i,1);if(x(s)==="Lambda"&&p(s,1)&&(s=nt(p(s,1),{_:o??"x",_1:o??"x"})),!t)return!o||o==="Nothing"?F([n,"\\!",e.serialize(s)]):F([n,"\\!",e.serialize(s),"\\,\\operatorname{d}",e.serialize(o)]);let a=p(t,2)?V(p(t,2)):null,l=t&&a!=="Nothing"?e.serialize(p(t,2)):"";l.length>0&&(l=`_{${l}}`);let f="",d=p(t,3)?V(p(t,3)):null;return p(t,3)&&d!=="Nothing"&&(f=`^{${e.serialize(p(t,3))}}`),F([n,f,l,"\\!",e.serialize(s),...o&&V(o)!=="Nothing"?["\\,\\operatorname{d}",e.serialize(o)]:[]])}}var xs=[{kind:"expression",name:"Integrate",latexTrigger:["\\int"],parse:vi("Integrate"),serialize:gs("\\int")},{kind:"expression",latexTrigger:["\\iint"],parse:vi("Integrate",2)},{kind:"expression",latexTrigger:["\\iiint"],parse:vi("Integrate",3)},{kind:"expression",name:"CircularIntegrate",latexTrigger:["\\oint"],parse:vi("CircularIntegrate"),serialize:gs("\\oint")},{kind:"expression",latexTrigger:["\\oiint"],parse:vi("CircularIntegrate",2)},{kind:"expression",latexTrigger:["\\oiiint"],parse:vi("CircularIntegrate",3)}];var rn=[["alpha","\\alpha",945],["beta","\\beta",946],["gamma","\\gamma",947],["delta","\\delta",948],["epsilon","\\epsilon",949],["epsilonSymbol","\\varepsilon",1013],["zeta","\\zeta",950],["eta","\\eta",951],["theta","\\theta",952],["thetaSymbol","\\vartheta",977],["iota","\\iota",953],["kappa","\\kappa",954],["kappaSymbol","\\varkappa",1008],["lambda","\\lambda",955],["mu","\\mu",956],["nu","\\nu",957],["xi","\\xi",958],["omicron","\\omicron",959],["pi","\\pi",960],["piSymbol","\\varpi",982],["rho","\\rho",961],["rhoSymbol","\\varrho",1009],["sigma","\\sigma",963],["finalSigma","\\varsigma",962],["tau","\\tau",964],["phi","\\phi",981],["phiLetter","\\varphi",966],["upsilon","\\upsilon",965],["chi","\\chi",967],["psi","\\psi",968],["omega","\\omega",969],["Alpha","\\Alpha",913],["Beta","\\Beta",914],["Gamma","\\Gamma",915],["Delta","\\Delta",916],["Epsilon","\\Epsilon",917],["Zeta","\\Zeta",918],["Eta","\\Eta",919],["Theta","\\Theta",920],["Iota","\\Iota",921],["Kappa","\\Kappa",922],["Lambda","\\Lambda",923],["Mu","\\Mu",924],["Nu","\\Nu",925],["Xi","\\Xi",926],["Omicron","\\Omicron",927],["Rho","\\Rho",929],["Sigma","\\Sigma",931],["Tau","\\Tau",932],["Phi","\\Phi",934],["Upsilon","\\Upsilon",933],["Chi","\\Chi",935],["Psi","\\Psi",936],["Omega","\\Omega",937],["digamma","\\digamma",989],["aleph","\\aleph",8501],["bet","\\beth",8502],["gimel","\\gimel",8503],["dalet","\\daleth",8504],["ell","\\ell",8499],["turnedCapitalF","\\Finv",8498],["turnedCapitalG","\\Game",8513],["weierstrass","\\wp",8472],["eth","\\eth",240],["invertedOhm","\\mho",8487],["hBar","\\hbar",295],["hSlash","\\hslash",8463],["blackClubSuit","\\clubsuit",9827],["whiteHeartSuit","\\heartsuit",9825],["blackSpadeSuit","\\spadesuit",9824],["whiteDiamondSuit","\\diamondsuit",9826],["sharp","\\sharp",9839],["flat","\\flat",9837],["natural","\\natural",9838]],Es=[...rn.map(([n,e,i])=>({kind:"symbol",name:n,latexTrigger:[e],parse:n})),...rn.map(([n,e,i])=>({kind:"symbol",latexTrigger:[String.fromCodePoint(i)],parse:n}))];var bs=[{name:"Real",kind:"function",latexTrigger:["\\Re"]},{name:"Imaginary",kind:"function",latexTrigger:["\\Im"]},{name:"Argument",kind:"function",latexTrigger:["\\arg"]},{name:"Conjugate",latexTrigger:["^","\\star"],kind:"postfix"}];var ys=[{name:"Mean",kind:"function",identifierTrigger:"mean"},{name:"Median",kind:"function",identifierTrigger:"median"},{name:"StandarDeviation",kind:"function",identifierTrigger:"stddev"},{latexTrigger:["\\bar"],kind:"expression",parse:(n,e)=>{let i=n.parseGroup()??n.parseToken();return!i||!V(i)?null:["Mean",i]}}];var Fs={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","|":"\\vert","||":"\\Vert","\\lceil":"\\lceil","\\lfloor":"\\lfloor","\\rceil":"\\rceil","\\rfloor":"\\rfloor"};function Cs(n,e,i){let t=Uf(e,i);if(t===null)return;let r="kind"in e?e.kind:"expression",u=t.latexTrigger;typeof u=="string"&&(n.lookahead=Math.max(n.lookahead,Ht(u)));let o=$(u??"",[]);if(o.length===2&&/[_^]/.test(o[0])&&o[1]!=="<{>"&&r!=="function"&&r!=="environment"&&r!=="matchfix"){let s=e.parse;!s&&e.name&&(r==="postfix"||r==="prefix"?s=(a,l)=>[e.name,l]:s=e.name),Cs(n,{...e,kind:r,name:void 0,serialize:void 0,parse:s,latexTrigger:[o[0],"<{>",o[1],"<}>"]},i)}n.defs.push(t),t.name!==void 0&&(n.ids.has(t.name)&&i({severity:"warning",message:["invalid-dictionary-entry",t.name,"Duplicate definition. The name (MathJSON identifier) must be unique, but triggers can be shared by multiple definitions."]}),n.ids.set(t.name,t))}function hu(n,e){let i={lookahead:1,ids:new Map,defs:[]};for(let t of n)Cs(i,t,e);return i}function Uf(n,e){if(!Zf(n,e))return null;let i={kind:"kind"in n?n.kind:"expression"},t=null;"latexTrigger"in n&&(typeof n.latexTrigger=="string"?t=$(n.latexTrigger,[]):t=n.latexTrigger);let r=null;"identifierTrigger"in n&&(r=n.identifierTrigger),t!==null&&(i.latexTrigger=mn(t)),r!==null&&(i.identifierTrigger=r),n.name&&(i.name=n.name,i.serialize=Gf(n,t,r)),i.kind==="matchfix"&&xi(n)&&(i.openTrigger=n.openTrigger,i.closeTrigger=n.closeTrigger),i.kind==="symbol"&&Yr(n)&&(i.precedence=n.precedence??1e4),i.kind==="expression"&&Wr(n)&&(i.precedence=n.precedence??1e4),(i.kind==="prefix"||i.kind==="postfix")&&(Ki(n)||Lt(n))&&(t&&(t[0]==="^"||t[0]==="_")?(i.precedence=720,n.precedence):i.precedence=n.precedence??1e4),i.kind==="infix"&&Pt(n)&&(!t||t[0]!=="^"&&t[0]!=="_"||!n.associativity||n.associativity,i.associativity=n.associativity??"none",i.precedence=n.precedence??1e4);let u=jf(n,t,r);return u&&(i.parse=u),i}function Gf(n,e,i){if(typeof n.serialize=="function")return n.serialize;let t=n.kind??"expression";if(t==="environment"){let o=n.identifierTrigger??n.name??"unknown";return(s,a)=>F([`\\begin{${o}}`,s.serialize(p(a,1)),`\\end{${o}}`])}if(xi(n)){let o=typeof n.openTrigger=="string"?Fs[n.openTrigger]:mn(n.openTrigger),s=typeof n.closeTrigger=="string"?Fs[n.closeTrigger]:mn(n.closeTrigger);return(a,l)=>F([o,a.serialize(p(l,1)),s])}let r=n.serialize;if(r===void 0&&e&&(r=mn(e)),r)return t==="postfix"?(o,s)=>F([o.serialize(p(s,1)),r]):t==="prefix"?(o,s)=>F([r,o.serialize(p(s,1))]):t==="infix"?(o,s)=>{let a=G(s);if(a===0)return"";let l=n.precedence??1e4;return F(N(s).flatMap((f,d)=>{let c=o.wrap(f,l+1);return d<a-1?[c,r]:[c]}))}:(o,s)=>x(s)?F([r,o.wrapArguments(s)]):r;let u=i??n.name??"unknown";return t==="postfix"?(o,s)=>F([o.serialize(p(s,1)),o.serializeSymbol(u)]):t==="prefix"?(o,s)=>F([o.serializeSymbol(u),o.serialize(p(s,1))]):t==="infix"?(o,s)=>F([o.serialize(p(s,1)),o.serializeSymbol(u),o.serialize(p(s,2))]):(o,s)=>x(s)?F([o.serializeSymbol(u),o.wrapArguments(s)]):o.serializeSymbol(u)}function jf(n,e,i){if("parse"in n&&typeof n.parse=="function")return n.parse;let t="kind"in n?n.kind:"expression";if(t==="environment"){let r=n.parse??n.name??i;if(r)return(u,o)=>{let s=u.parseTabular();return s===null?null:[r,["List",s.map(a=>["List",...a])]]}}if(t==="function"){let r=n.parse??n.name??i;if(r)return(u,o)=>{let s=u.parseArguments("enclosure",o);return s===null?r:[r,...s]}}if(t==="symbol"){let r=n.parse??n.name??i;if(r)return(u,o)=>r}if(t==="prefix"){let r=n.parse??n.name??i;if(r){let u=n.precedence??1e4;return(o,s)=>{let a=o.parseExpression({...s??[],minPrec:u});return a===null?null:[r,a]}}}if(t==="postfix"){let r=n.parse??n.name;if(r)return(u,o)=>o===null?null:[r,o]}if(t==="infix"){if(/[_^]/.test(e?.[0]??"")){let u=n.name??n.parse;return(o,s)=>[u,O(p(s,1)),O(p(s,2))]}let r=n.parse??n.name??i;if(r){let u=n.precedence??1e4,o=n.associativity??"none";return o==="none"?(s,a,l)=>{if(a===null)return null;let f=O(s.parseExpression({...l,minPrec:u}));return[r,a,f]}:o==="left"?(s,a,l)=>{if(a===null)return null;let f=O(s.parseExpression({...l,minPrec:u+1}));return typeof r!="string"?[r,a,f]:[r,a,f]}:o==="right"?(s,a,l)=>{if(a===null)return null;let f=O(s.parseExpression({...l,minPrec:u}));return typeof r!="string"?[r,a,f]:[r,a,f]}:(s,a,l)=>{if(a===null)return null;let f=O(s.parseExpression({...l,minPrec:u}));return typeof r!="string"?[r,a,f]:Ai(r,a,f)}}}if(t==="matchfix"){let r=n.parse??n.name;if(r)return(u,o)=>o===null||se(o)?null:[r,o]}if(t==="expression"){let r=n.parse??n.name??i;if(r)return()=>r}if("parse"in n){let r=n.parse;return()=>r}}function Zf(n,e){let i=n.name??n.latexTrigger??n.identifierTrigger??n.openTrigger;if(!i)try{i=JSON.stringify(n)}catch{i="???"}if(Array.isArray(i)&&(i=mn(i)),"trigger"in n&&e({severity:"warning",message:["invalid-dictionary-entry",i,"The 'trigger' property is deprecated. Use 'latexTrigger' or 'identifierTrigger' instead"]}),"kind"in n&&!["expression","symbol","function","infix","postfix","prefix","matchfix","environment"].includes(n.kind)&&e({severity:"warning",message:["invalid-dictionary-entry",i,"The 'kind' property must be one of 'expression', 'symbol', 'function', 'infix', 'postfix', 'prefix', 'matchfix', 'environment'"]}),n.serialize!==void 0&&!n.name)return e({severity:"warning",message:["invalid-dictionary-entry",i,"A 'name' property must be provided if a 'serialize' handler is provided"]}),!1;if("identifierTrigger"in n&&(!("kind"in n)||n.kind!=="environment")&&(typeof n.identifierTrigger!="string"||!Ee(n.identifierTrigger))&&e({severity:"warning",message:["invalid-dictionary-entry",i,"The 'identifierTrigger' property must be a valid identifier"]}),"name"in n&&(typeof n.name!="string"?n.name!==void 0&&e({severity:"warning",message:["invalid-dictionary-entry",i,"The 'name' property must be a string"]}):Ee(n.name)||e({severity:"warning",message:["invalid-dictionary-entry",n.name,"The 'name' property must be a valid identifier"]})),xi(n)){if("latexTrigger"in n||"identifierTrigger"in Ki)return e({severity:"warning",message:["invalid-dictionary-entry",i,"'matchfix' operators use a 'openTrigger' and 'closeTrigger' instead of a 'latexTrigger' or 'identifierTrigger'. "]}),!1;if(!n.openTrigger||!n.closeTrigger)return e({severity:"warning",message:["invalid-dictionary-entry",i,"Expected `openTrigger` and a `closeTrigger` for matchfix operator"]}),!1;if(typeof n.openTrigger!=typeof n.closeTrigger)return e({severity:"warning",message:["invalid-dictionary-entry",i,"Expected `openTrigger` and `closeTrigger` to both be strings or array of LatexToken"]}),!1}if(Pt(n)||Lt(n)||Ki(n)){if(Array.isArray(n.latexTrigger)&&(n.latexTrigger[0]==="_"||n.latexTrigger[0]==="^")||typeof n.latexTrigger=="string"&&(n.latexTrigger.startsWith("^")||n.latexTrigger.startsWith("_"))){if(n.precedence!==void 0||n.associativity!==void 0)return e({severity:"warning",message:["invalid-dictionary-entry",i,'Unexpected "precedence" or "associativity" for superscript/subscript operator']}),!1}else if(n.precedence===void 0)return e({severity:"warning",message:["invalid-dictionary-entry",i,`Expected a "precedence" for ${n.kind} operator`]}),!1}else if(n.associativity!==void 0)return e({severity:"warning",message:["invalid-dictionary-entry",i,'Unexpected "associativity" operator']}),!1;return!xi(n)&&!Qr(n)&&!n.latexTrigger&&!n.identifierTrigger&&!n.name?(e({severity:"warning",message:["invalid-dictionary-entry",i,"Expected a 'name', a 'latexTrigger' or a 'identifierTrigger'"]}),!1):n.parse===void 0&&n.name===void 0?(e({severity:"warning",message:["invalid-dictionary-entry",i,"Expected a 'parse' or 'name'"]}),!1):!0}var Ni={algebra:Jo,arithmetic:os,calculus:xs,complex:bs,core:ss,"linear-algebra":fs,logic:ds,relop:pu,other:cs,physics:[{name:"mu0",kind:"symbol",latexTrigger:"\\mu_0"}],sets:Ds,statistics:ys,symbols:Es,trigonometry:ms};var Hf={"\\mathord":"","\\mathop":"","\\mathbin":"","\\mathrel":"","\\mathopen":"","\\mathclose":"","\\mathpunct":"","\\mathinner":"","\\operatorname":"","\\mathrm":"_upright","\\mathit":"_italic","\\mathbf":"_bold","\\mathscr":"_script","\\mathcal":"_calligraphic","\\mathfrak":"_fraktur","\\mathsf":"_sansserif","\\mathtt":"_monospace","\\mathbb":"_doublestruck"},Jf={"\\mathring":"_ring","\\hat":"_hat","\\tilde":"_tilde","\\vec":"_vec","\\overline":"_bar","\\underline":"_underbar","\\dot":"_dot","\\ddot":"_ddot","\\dddot":"_dddot","\\ddddot":"_ddddot","\\acute":"_acute","\\grave":"_grave","\\breve":"_breve","\\check":"_check"};function As(n,e){if(n.atEnd)return null;let i=n.peek,t={"\\_":"_","\\#":"hash"}[i];if(!t&&!e.toplevel&&(t={"+":"plus","-":"minus","\\plusmn":"pm","\\pm":"pm","\\ast":"ast","\\dag":"dag","\\ddag":"ddag","\\bot":"bottom","\\top":"top","\\bullet":"bullet","\\cir":"circle","\\diamond":"diamond","\\times":"times","\\square":"square","\\star":"star"}[i]),t)return n.nextToken(),t;let r=rn.findIndex(u=>u[1]===i);return r>=0?(n.nextToken(),rn[r][0]):n.matchChar()??n.nextToken()}function Qt(n){let e=gu(n),i=n.index,t=Jf[n.peek]??null;if(t){if(n.nextToken(),!n.match("<{>"))return n.index=i,null;let o=Qt(n);if(o===null||!n.match("<}>"))return n.index=i,null;e=`${o}${t}`}if(e===null){for(e="";!n.atEnd;){let o=n.peek;if(o==="<}>"||o==="_"||o==="^")break;let s=As(n,{toplevel:!1});if(s===null)return n.index=i,null;e+=s}for(;!n.atEnd&&/\d/.test(n.peek);)e+=n.nextToken()}for(;!n.atEnd;)if(n.match("\\degree"))e+="_deg";else if(n.matchAll(["^","\\prime"]))e+="_prime";else if(n.matchAll(["^","<{>","\\prime","<}>"]))e+="_prime";else if(n.matchAll(["^","<{>","\\doubleprime","<}>"]))e+="_dprime";else if(n.matchAll(["^","<{>","\\prime","\\prime","<}>"]))e+="_dprime";else break;let r=[],u=[];for(;!n.atEnd;)if(n.match("_")){let o=n.match("<{>"),s=Qt(n);if(o&&!n.match("<}>")||s===null)return n.index=i,null;u.push(s)}else if(n.match("^")){let o=n.match("<{>"),s=Qt(n);if(o&&!n.match("<}>")||s===null)return n.index=i,null;r.push(s)}else break;return r.length>0&&(e+="__"+r.join("")),u.length>0&&(e+="_"+u.join("")),e}function gu(n){let e=n.index,i=Hf[n.peek]??null;if(i===null)return null;if(n.nextToken(),n.match("<{>")){let t="",r={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"}[n.peek]??"";return r&&(t=r,n.nextToken()),t+=Qt(n),t===null||!n.match("<}>")?(n.index=e,null):i==="_upright"&&t.length>1?t:t+i}return n.index=e,null}function xu(n){let e=n.index,i=gu(n);return i===null||Ee(i)?(n.index=e,null):n.error(["invalid-identifier",{str:tn(i)}],e)}function ot(n){if(/^[a-zA-Z]$/.test(n.peek)||/^\p{XIDS}$/u.test(n.peek))return n.nextToken();let e=n.index,i=gu(n);if(!i){for(i="";!n.atEnd&&Fi.test(i+n.peek);)i+=n.nextToken();i||(i=null)}return i??(i=As(n,{toplevel:!0})),i&&(i=i.normalize(),Ee(i))?i:(n.index=e,null)}var Bs={"(":["\\lparen","("],")":["\\rparen",")"],"[":["\\lbrack","\\[","["],"]":["\\rbrack","\\]","]"],"<":["<","\\langle"],">":[">","\\rangle"],"{":["\\{","\\lbrace"],"}":["\\}","\\rbrace"],":":[":","\\colon"],"|":["|","\\|","\\lvert","\\rvert"],"||":["||","\\Vert","\\lVert","\\rVert"],"\\lfloor":["\\lfloor"],"\\rfloor":["\\rfloor"],"\\lceil":["\\lceil"],"\\rceil":["\\rceil"],"\\ulcorner":["\\ulcorner"],"\\urcorner":["\\urcorner"],"\\llcorner":["\\llcorner"],"\\lrcorner":["\\lrcorner"],"\\lgroup":["\\lgroup"],"\\rgroup":["\\rgroup"],"\\lmoustache":["\\lmoustache"],"\\rmoustache":["\\rmoustache"]},Xt={"\\left":"\\right","\\bigl":"\\bigr","\\Bigl":"\\Bigr","\\biggl":"\\biggr","\\Biggl":"\\Biggr","\\big":"\\big","\\Big":"\\Big","\\bigg":"\\bigg","\\Bigg":"\\Bigg"},st={"(":")","[":"]","|":"|","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},Eu={precision:6,positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalMarker:".",groupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",notation:"auto",truncationMarker:"\\ldots",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}",imaginaryUnit:"\\imaginaryI",avoidExponentsInRange:[-7,20]},bu={skipSpace:!0,parseArgumentsOfUnknownLatexCommands:!0,parseNumbers:"auto",parseUnknownIdentifier:(n,e)=>e.computeEngine?.lookupFunction(n)!==void 0?"function":"symbol",preserveLatex:!1},Kt=class{constructor(e,i,t,r){this._index=0;this._boundaries=[];this._lastPeek="";this._peekCounter=0;this._tokens=e,this.options={...Eu,...bu,...i},this._dictionary=t,this.computeEngine=r,this._positiveInfinityTokens=$(this.options.positiveInfinity,[]),this._negativeInfinityTokens=$(this.options.negativeInfinity,[]),this._notANumberTokens=$(this.options.notANumber,[]),this._decimalMarkerTokens=$(this.options.decimalMarker,[]),this._groupSeparatorTokens=$(this.options.groupSeparator,[]),this._exponentProductTokens=$(this.options.exponentProduct,[]),this._beginExponentMarkerTokens=$(this.options.beginExponentMarker,[]),this._endExponentMarkerTokens=$(this.options.endExponentMarker,[]),this._truncationMarkerTokens=$(this.options.truncationMarker,[]),this._beginRepeatingDigitsTokens=$(this.options.beginRepeatingDigits,[]),this._endRepeatingDigitsTokens=$(this.options.endRepeatingDigits,[]),this._imaginaryNumberTokens=$(this.options.imaginaryUnit,[])}get index(){return this._index}set index(e){this._index=e,this._lastPeek="",this._peekCounter=0}updateOptions(e){for(let[i,t]of Object.entries(e))if(i in this.options)this.options[i]=t,typeof t=="string"&&(i==="positiveInfinity"&&(this._positiveInfinityTokens=$(t,[])),i==="negativeInfinity"&&(this._negativeInfinityTokens=$(t,[])),i==="notANumber"&&(this._notANumberTokens=$(t,[])),i==="decimalMarker"&&(this._decimalMarkerTokens=$(t,[])),i==="groupSeparator"&&(this._groupSeparatorTokens=$(t,[])),i==="exponentProduct"&&(this._exponentProductTokens=$(t,[])),i==="beginExponentMarker"&&(this._beginExponentMarkerTokens=$(t,[])),i==="endExponentMarker"&&(this._endExponentMarkerTokens=$(t,[])),i==="truncationMarker"&&(this._truncationMarkerTokens=$(t,[])),i==="beginRepeatingDigits"&&(this._beginRepeatingDigitsTokens=$(t,[])),i==="endRepeatingDigits"&&(this._endRepeatingDigitsTokens=$(t,[])),i==="imaginaryNumber"&&(this._imaginaryNumberTokens=$(t,[])));else throw Error(`Unexpected option "${i}"`)}get atEnd(){return this.index>=this._tokens.length}get peek(){let e=this._tokens[this.index];if(e===this._lastPeek?this._peekCounter+=1:this._peekCounter=0,this._peekCounter>=1024){let i=`Infinite loop detected while parsing "${this.latex(0)}" at "${this._lastPeek}" (index ${this.index})`;throw console.error(i),new Error(i)}return this._lastPeek=e,e}nextToken(){return this._tokens[this.index++]}atTerminator(e){return this.atBoundary||((e?.condition&&e.condition(this))??!1)}get atBoundary(){if(this.atEnd)return!0;let e=this.index;for(let i of this._boundaries)if(this.matchAll(i.tokens))return this.index=e,!0;return!1}addBoundary(e){this._boundaries.push({index:this.index,tokens:e})}removeBoundary(){this._boundaries.pop()}matchBoundary(){let e=this._boundaries[this._boundaries.length-1],i=e&&this.matchAll(e.tokens);return i&&this._boundaries.pop(),i}boundaryError(e){let i=this._boundaries[this._boundaries.length-1];return this._boundaries.pop(),this.error(e,i.index)}latex(e,i){return mn(this._tokens.slice(e,i))}latexAhead(e){return this.latex(this.index,this.index+e)}lookAhead(){let e=Math.min(this._dictionary.lookahead,this._tokens.length-this.index);if(e<=0)return[];let i=[];for(;e>0;)i.push([e,this.latexAhead(e--)]);return i}peekDefinitions(e){if(this.atEnd)return[];let i=[],t=[...this.getDefs(e)];for(let r of t)r.latexTrigger===""&&i.push([r,0]);for(let[r,u]of this.lookAhead())for(let o of t)o.latexTrigger===u&&i.push([o,r]);for(let r of t)if(r.identifierTrigger){let u=Wf(this,r.identifierTrigger);u>0&&i.push([r,u])}return i}skipSpaceTokens(){for(;this.match("<space>"););}skipSpace(){if(!this.atEnd&&this.peek==="<{>"){let i=this.index;for(this.nextToken();this.match("<space>"););if(this.nextToken()==="<}>")return this.skipSpace(),!0;this.index=i}if(!this.options.skipSpace)return!1;let e=!1;for(;this.match("<space>");)e=!0;return e&&this.skipSpace(),e}skipVisualSpace(){this.options.skipSpace&&(this.skipSpace(),["\\!","\\,","\\:","\\;","\\enskip","\\enspace","\\space","\\quad","\\qquad"].includes(this.peek)&&(this.nextToken(),this.skipVisualSpace()),this.skipSpace())}match(e){return this._tokens[this.index]===e?(this.index++,!0):!1}matchAll(e){if(Array.isArray(e),e.length===0)return!1;let i=!0,t=0;do i=this._tokens[this.index+t]===e[t++];while(i&&t<e.length);return i&&(this.index+=t),i}matchAny(e){return e.includes(this._tokens[this.index])?this._tokens[this.index++]:""}matchChar(){let e=this.index,i=0;for(;this.match("^");)i+=1;if(i<2&&(this.index=e),i>=2){let t="",r=0;for(;r!=i;){let u=this.matchAny(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"]);if(!u)break;t+=u,r+=1}if(t.length===i)return String.fromCodePoint(Number.parseInt(t,16))}else if(this.match("\\char")){let t=Math.floor(this.matchLatexNumber()??Number.NaN);return(!Number.isFinite(t)||t<0||t>1114111)&&(t=10067),String.fromCodePoint(t)}else if(this.match("\\unicode"))if(this.skipSpaceTokens(),this.match("<{>")){let t=this.matchLatexNumber();if(this.match("<}>")&&t!==null&&t>=0&&t<=1114111)return String.fromCodePoint(t)}else{let t=this.matchLatexNumber();if(t!==null&&t>=0&&t<=1114111)return String.fromCodePoint(t)}return this.index=e,null}matchDelimiter(e,i){if(this.peek==="[")return!1;if(Array.isArray(e))return Array.isArray(i),this.matchAll(e)?(this.addBoundary(i),!0):!1;Array.isArray(i);let t=this.index,r=Xt[this.peek];return r&&this.nextToken(),e==="||"&&this.matchAll(["|","|"])?(this.addBoundary(["|","|"]),!0):(Bs[e]??[e]).includes(this.peek)?(e=this.nextToken(),i=st[e]??i,this.addBoundary(r?[r,i]:[i]),!0):(this.index=t,!1)}parseGroup(){let e=this.index;if(this.skipSpaceTokens(),this.match("<{>")){this.addBoundary(["<}>"]);let i=this.parseExpression();if(this.skipSpace(),this.matchBoundary())return i??["Sequence"];for(;!this.matchBoundary()&&!this.atEnd;)this.nextToken();if(x(i)==="Error")return i;let t=this.error("expected-closing-delimiter",e);return i?["InvisibleOperator",i,t]:t}return this.index=e,null}parseToken(){if(this.skipSpace(),[...'!"#$%&(),/;:?@[]\\`|~'.split(""),"\\left","\\bigl"].includes(this.peek))return null;if(/^[0-9]$/.test(this.peek))return parseInt(this.nextToken());let i=this.parseGenericExpression()??this.parseSymbol();return i||null}parseOptionalGroup(){let e=this.index;if(this.skipSpaceTokens(),this.match("[")){this.addBoundary(["]"]);let i=this.parseExpression();return this.skipSpace(),this.matchBoundary()?i:this.boundaryError("expected-closing-delimiter")}return this.index=e,null}parseTabular(){let e=[],i=[],t=null;for(;!this.atBoundary;)if(this.skipSpace(),this.match("&"))i.push(t??"Nothing"),t=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.parseOptionalGroup(),t!==null&&i.push(t),e.push(i),i=[],t=null;else{let r=[],u=this.peek;for(;u!=="&"&&u!=="\\\\"&&u!=="\\cr"&&!this.atBoundary;)t=this.parseExpression({minPrec:0,condition:o=>{let s=o.peek;return s==="&"||s==="\\\\"||s==="\\cr"}}),t?r.push(t):(r.push(["Error",["'unexpected-token'",u]]),this.nextToken()),this.skipSpace(),u=this.peek;r.length>1?t=["Sequence",...r]:t=r[0]??"Nothing"}return t!==null&&i.push(t),i.length>0&&e.push(i),e}parseStringGroup(e){e===void 0&&(e=!1);let i=this.index;for(;this.match("<space>"););if(this.match(e?"[":"<{>")){this.addBoundary([e?"]":"<}>"]);let t=this.parseStringGroupContent();if(this.matchBoundary())return t;this.removeBoundary()}return this.index=i,null}parseEnvironment(e){let i=this.index;if(!this.match("\\begin"))return null;let t=this.parseStringGroup()?.trim();if(!t)return this.error("expected-environment-name",i);this.addBoundary(["\\end","<{>",...t.split(""),"<}>"]);for(let r of this.getDefs("environment"))if(r.identifierTrigger===t){let u=r.parse(this,e);return this.skipSpace(),this.matchBoundary()?u!==null?this.decorate(u,i):(this.index=i,null):this.boundaryError("unbalanced-environment")}return this.parseTabular(),this.skipSpace(),this.matchBoundary()?this.error(["unknown-environment",{str:t}],i):this.boundaryError("unbalanced-environment")}parseOptionalSign(){let e=!!this.matchAny(["-","\u2212"]);for(;this.matchAny(["+","\uFE62"])||this.skipSpace();)this.matchAny(["-","\u2212"])&&(e=!e);return e?"-":"+"}parseDecimalDigits(e){e??(e={}),e.withGrouping??(e.withGrouping=!0);let i=[],t=!1;for(;!t;){for(;/^[0-9]$/.test(this.peek);)i.push(this.nextToken()),this.skipVisualSpace();if(t=!0,e.withGrouping&&this.options.groupSeparator){let r=this.index;this.skipVisualSpace(),this.matchAll(this._groupSeparatorTokens)&&(this.skipVisualSpace(),/^[0-9]$/.test(this.peek)?t=!1:this.index=r)}}return i.join("")}parseSignedInteger(e){e??(e={}),e.withGrouping??(e.withGrouping=!0);let i=this.index,t=this.parseOptionalSign(),r=this.parseDecimalDigits(e);return r?t==="-"?"-"+r:r:(this.index=i,"")}parseExponent(){let e=this.index;if(this.matchAny(["e","E"])){let i=this.parseSignedInteger({withGrouping:!1});if(i)return i}if(this.index=e,this.match("\\times")&&(this.skipSpaceTokens(),this.match("1")&&this.match("0")&&this.match("^"))){if(/^[0-9]$/.test(this.peek))return this.nextToken();if(this.match("<{>")){this.skipSpaceTokens();let i=this.parseSignedInteger();if(this.skipSpaceTokens(),this.match("<}>")&&i)return i}}if(this.index=e,this.skipSpaceTokens(),this.match("\\%"))return"-2";if(this.index=e,this.matchAll(this._exponentProductTokens)&&(this.skipSpaceTokens(),this.matchAll(this._beginExponentMarkerTokens))){this.skipSpaceTokens();let i=this.parseSignedInteger({withGrouping:!1});if(this.skipSpaceTokens(),this.matchAll(this._endExponentMarkerTokens)&&i)return i}return this.index=e,""}parseRepeatingDecimal(){let e=this.index,i="";return this.match("(")?(i=this.parseDecimalDigits(),i&&this.match(")")?"("+i+")":(this.index=e,"")):(this.index=e,this.matchAll(["\\left","("])?(i=this.parseDecimalDigits(),i&&this.matchAll(["\\right",")"])?"("+i+")":(this.index=e,"")):(this.index=e,this.matchAll(["\\overline","<{>"])?(i=this.parseDecimalDigits(),i&&this.match("<}>")?"("+i+")":(this.index=e,"")):(this.index=e,this.matchAll(this._beginRepeatingDigitsTokens)?(i=this.parseDecimalDigits(),i&&this.matchAll(this._endRepeatingDigitsTokens)?"("+i+")":(this.index=e,"")):(this.index=e,""))))}parseNumber(){if(this.options.parseNumbers===!1||this.options.parseNumbers==="never")return null;let e=this.index;this.skipVisualSpace();let i=1;for(;this.peek==="-"||this.peek==="+";)this.match("-")?i*=-1:this.match("+"),this.skipVisualSpace();let t="",r="",u=!1;if(this.match(".")||this.matchAll(this._decimalMarkerTokens)){let f=this.peek;(f==="\\overline"||f===this._beginRepeatingDigitsTokens[0]||/[0-9\(]/.test(f))&&(u=!0,t="0")}else t=this.parseDecimalDigits();if(!t)return this.index=e,null;let o=this.index,s=!1;(u||this.match(".")||this.matchAll(this._decimalMarkerTokens))&&(r=this.parseDecimalDigits(),s=!0);let a=!1;if(s){let f=this.parseRepeatingDecimal();f?(r+=f,a=!0):this.match("\\ldots")||this.matchAll(this._truncationMarkerTokens)}if(s&&!r)return this.index=o,{num:i<0?"-"+t:t};this.skipVisualSpace();let l=this.parseExponent();if(!a&&this.options.parseNumbers==="rational"){let f=parseInt(t,10);if(!r)return l?["Multiply",i*f,["Power",10,l]]:i*f;let d=parseInt(r,10),c=r.length,m=f*Math.pow(10,c)+d,D=Math.pow(10,c);return l?["Multiply",["Rational",i*m,D],["Power",10,l]]:["Rational",i*m,D]}return{num:(i<0?"-":"")+t+(s?"."+r:"")+(l?"e"+l:"")}}matchLatexNumber(e=!0){let i=!1,t=this.peek;for(;t==="<space>"||t==="+"||t==="-";)t==="-"&&(i=!i),this.nextToken(),t=this.peek;let r=10,u=["0","1","2","3","4","5","6","7","8","9"];if(this.match("'"))r=8,u=["0","1","2","3","4","5","6","7"],e=!0;else if(this.match('"')||this.match("x"))r=16,u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],e=!0;else if(this.match("`"))return t=this.nextToken(),t?t.startsWith("\\")&&t.length===2?(i?-1:1)*(t.codePointAt(1)??0):(i?-1:1)*(t.codePointAt(0)??0):null;let o="";for(;u.includes(this.peek);)o+=this.nextToken();if(!e&&this.match("."))for(o+=".";u.includes(this.peek);)o+=this.nextToken();let s=e?Number.parseInt(o,r):Number.parseFloat(o);return Number.isNaN(s)?null:i?-s:s}parsePrefixOperator(e){e||(e={minPrec:0}),e.minPrec||(e={...e,minPrec:0});let i=this.index;for(let[t,r]of this.peekDefinitions("prefix")){this.index=i+r;let u=t.parse(this,{...e,minPrec:t.precedence+1});if(u)return u}return this.index=i,null}parseInfixOperator(e,i){i??(i={minPrec:0}),i.minPrec,i.minPrec===void 0&&(i={...i,minPrec:0});let t=this.index;for(let[r,u]of this.peekDefinitions("infix"))if(r.precedence>=i.minPrec){this.index=t+u;let o=r.parse(this,e,i);if(o)return o}return this.index=t,null}parseArguments(e="enclosure",i){if(this.atTerminator(i))return null;let t=this.index,r=this.parseEnclosure();if(e==="enclosure")return r===null?null:Jt(r)??[];if(e==="implicit"){if(x(r)==="Delimiter"){if(x(Ne(r))==="Sequence"){let o=Ne(Ne(r));return o?[o]:[]}return Ne(r)?[Ne(r)]:[]}if(r!==null)return[r];let u=this.parseExpression({...i,minPrec:390});return u===null?null:[u]}return this.index=t,null}matchOpenDelimiter(e,i){let t=this.index,r=Xt[this.peek];r&&this.nextToken();let u=Bs[e]??[e],o=r?[r]:[];return u.includes("||")&&this.matchAll(["|","|"])?(o.push("|"),o.push("|"),o):u.includes(this.peek)?(st[e]===i?o.push(st[this.peek]):o.push(i),this.nextToken(),o):(this.index=t,null)}parseEnclosure(){let e=this.getDefs("matchfix"),i=this.index;for(let t of e){if(this.index=i,!this.matchDelimiter(t.openTrigger,t.closeTrigger))continue;let r=this.index;this.skipSpace();let u=this.parseExpression();if(this.skipSpace(),!this.matchBoundary()){let s=this._boundaries[this._boundaries.length-1].tokens;if(this.removeBoundary(),this.index=r,this.skipSpace(),u=this.parseExpression(),this.skipSpace(),!this.matchAll(s)){if(!this.atEnd)continue;return this.index=i,null}}let o=t.parse(this,u??["Sequence"]);if(o!==null)return o}return this.index=i,null}parseGenericExpression(e){if(this.atTerminator(e))return null;let i=this.index,t=null,r=this.peekDefinitions("expression")??[];for(let[u,o]of r)if(this.index=i+o,typeof u.parse=="function"){if(t=u.parse(this,e),t!==null)return t}else return u.name;return this.index=i,null}parseFunction(e){if(this.atTerminator(e))return null;let i=this.index,t=null;for(let[u,o]of this.peekDefinitions("function"))if(this.index=i+o,typeof u.parse=="function"){if(t=u.parse(this,e),t!==null)return t}else{t=u.name;break}if(t===null&&(this.index=i,t=ot(this),!this.isFunctionHead(t)))return this.index=i,null;do{let u=this.parsePostfixOperator(t,e);if(u===null)break;t=u}while(!0);let r=this.parseArguments("enclosure",e);return r===null?t:typeof t=="string"?[t,...r]:["Apply",t,...r]}parseSymbol(e){if(this.atTerminator(e))return null;let i=this.index;for(let[r,u]of this.peekDefinitions("symbol"))if(this.index=i+u,typeof r.parse=="function"){let o=r.parse(this,e);if(o)return o}else return r.name;this.index=i;let t=ot(this);return t===null?null:this.options.parseUnknownIdentifier?.(t,this)==="symbol"?t:(this.index=i,null)}parseSupsub(e){if(this.atEnd)return e;let i=this.index;this.skipSpace();let t=[],r=[],u=i;for(;this.peek==="_"||this.peek==="^";){if(this.match("_"))if(u=this.index,this.match("_")||this.match("^"))r.push(this.error("syntax-error",u));else{let s=this.parseGroup()??this.parseToken()??this.parseStringGroup();if(s===null)return this.error("missing",i);r.push(s)}else if(this.match("^"))if(u=this.index,this.match("_")||this.match("^"))t.push(this.error("syntax-error",u));else{let s=this.parseGroup()??this.parseToken();if(s===null)return this.error("missing",i);t.push(s)}u=this.index,this.skipSpace()}if(t.length===0&&r.length===0)return this.index=i,e;let o=e;if(r.length>0){let s=[...this.getDefs("infix")].filter(a=>a.latexTrigger==="_");if(s){let a=["Subscript",o,r.length===1?r[0]:["List",...r]];for(let l of s)if(typeof l.parse=="function"?o=l.parse(this,a,{minPrec:0}):o=a,o)break}}if(t.length>0){let s=[...this.getDefs("infix")].filter(a=>a.latexTrigger==="^");if(s){let a=t.filter(l=>!(x(l)==="Sequence"&&G(l)===0));if(a.length!==0){let l=a.length===1?a[0]:["List",...a],f=["Superscript",o,l];for(let d of s)if(typeof d.parse=="function"?o=d.parse(this,f,{minPrec:0}):o=f,o)break}}}return o===null&&(this.index=i),o}parsePostfixOperator(e,i){if(e===null||this.atEnd)return null;let t=this.index;for(let[r,u]of this.peekDefinitions("postfix")){this.index=t+u;let o=r.parse(this,e,i);if(o!==null)return o}return this.index=t,null}parseStringGroupContent(){let e=this.index,i="",t=0;for(;!this.atBoundary||t>0;){let r=this.nextToken();if(r==="<$>"||r==="<$$>")return this.index=e,"";r==="<{>"?(t+=1,i+="\\{"):r==="<}>"?(t-=1,i+="\\}"):r==="<space>"?i+=" ":(r[0],i+=r)}return i}parseSyntaxError(){let e=this.index;if(this.peek==="^")return this.index+=1,["Superscript",this.error("missing",e),O(this.parseGroup())];let i=this.peekDefinitions("operator");if(i.length>0){if(i=this.peekDefinitions("postfix"),i.length>0){let[s,a]=i[0];if(this.index+=a,typeof s.parse=="function"){let l=s.parse(this,this.error("missing",e));if(l)return l}return s.name?[s.name,this.error("missing",e)]:this.error("unexpected-operator",e)}if(i=this.peekDefinitions("prefix"),i.length>0){let[s,a]=i[0];if(this.index+=a,typeof s.parse=="function"){let l=s.parse(this,{minPrec:0});if(l)return l}return s.name?[s.name,this.parseExpression()??this.error("missing",e)]:this.error("unexpected-operator",e)}if(i=this.peekDefinitions("infix"),i.length>0){let[s,a]=i[0];this.index+=a;let l=s.parse(this,this.error("missing",e),{minPrec:0});return l||this.error("unexpected-operator",e)}}let t=this.index,r=xu(this);if(r)return r;if(r=ot(this),r)return this.error(["unexpected-identifier",r],t);let u=this.peek;if(!u)return this.error("syntax-error",e);if(u[0]!=="\\")return this.error(["unexpected-token",{str:mn(u)}],e);if(Yf(this))return this.error("unexpected-delimiter",e);let o=this.nextToken();if(this.skipSpaceTokens(),o==="\\end"){let s=this.parseStringGroup();return s===null?this.error("expected-environment-name",e):this.error(["unbalanced-environment",{str:s}],e)}for(;this.match("[");){let s=0;for(;!this.atEnd&&s===0&&this.peek!=="]";)this.peek==="["&&(s+=1),this.peek==="]"&&(s-=1),this.nextToken();this.match("]")}for(;this.match("<{>");){let s=0;for(;!this.atEnd&&s===0&&this.peek!=="<}>";)this.peek==="<{>"&&(s+=1),this.peek==="<}>"&&(s-=1),this.nextToken();this.match("<}>")}return this.error(["unexpected-command",{str:mn(o)}],e)}parsePrimary(e){if(this.atBoundary||this.atTerminator(e))return null;let i=null,t=this.index;if(this.match("<}>"))return this.error("unexpected-closing-delimiter",t);if(i??(i=this.parseGroup()),i??(i=this.parseNumber()),i??(i=this.parseEnclosure()),i??(i=this.parseEnvironment(e)),i===null&&this.matchAll(this._positiveInfinityTokens)&&(i={num:"+Infinity"}),i===null&&this.matchAll(this._negativeInfinityTokens)&&(i={num:"-Infinity"}),i===null&&this.matchAll(this._notANumberTokens)&&(i={num:"NaN"}),i??(i=this.parseGenericExpression(e)??this.parseFunction(e)??this.parseSymbol(e)??xu(this)),i!==null){i=this.decorate(i,t);let r=null,u=this.index;do{if(r=this.parsePostfixOperator(i,e),i=r??i,this.index===u&&r!==null){this.index;break}u=this.index}while(r!==null)}return i!==null&&(i=this.parseSupsub(i)),this.decorate(i,t)}parseExpression(e){this.skipSpace();let i=this.index;if(this.atBoundary)return this.index=i,null;e??(e={minPrec:0}),e.minPrec,e.minPrec===void 0&&(e={...e,minPrec:0});let t=this.parsePrefixOperator({...e,minPrec:0});if(t===null&&(t=this.parsePrimary(e),x(t)==="Sequence"&&G(t)===0&&(t=null)),t){let r=!1;for(;!r&&!this.atTerminator(e);){this.skipSpace();let u=this.parseInfixOperator(t,e);if(u===null&&this.peekDefinitions("operator").length===0){let o=this.parseExpression({...e,minPrec:we});o!==null&&(x(t)==="InvisibleOperator"?x(o)==="InvisibleOperator"?u=["InvisibleOperator",...N(t),...N(o)]:u=["InvisibleOperator",...N(t),o]:x(o)==="InvisibleOperator"?u=["InvisibleOperator",t,...N(o)]:u=["InvisibleOperator",t,o])}u!==null?t=u:r=!0}}return this.decorate(t,i)}decorate(e,i){if(e===null)return null;if(!this.options.preserveLatex)return e;let t=this.latex(i,this.index);return Array.isArray(e)?e={latex:t,fn:e}:typeof e=="number"?e={latex:t,num:Number(e).toString()}:typeof e=="string"?e={latex:t,sym:e}:typeof e=="object"&&e!==null&&(e.latex=t),e}error(e,i){let t;typeof e=="string"?(e.startsWith("'"),t={str:e}):(e[0].startsWith("'"),t=["ErrorCode",{str:e[0]},...e.slice(1)]);let r=this.latex(i,this.index);return r?["Error",t,["LatexString",{str:r}]]:["Error",t]}isFunctionHead(e){if(e===null)return!1;let i=V(e);return i?this.computeEngine?.lookupFunction(i)!==void 0||this.options.parseUnknownIdentifier?.(i,this)==="function":!1}getDefs(e){let i=[];if(e==="operator")for(let t of this._dictionary.defs)/^prefix|infix|postfix/.test(t.kind)&&i.push(t);else for(let t of this._dictionary.defs)t.kind===e&&i.push(t);return i}};function Wf(n,e){let i=n.index,t=ot(n)?.trim();if(t===null)return 0;let r=t!==e?0:n.index-i;return n.index=i,r}function Yf(n){let e=n.peek;return Object.values(st).includes(e)||st[e]?(n.nextToken(),!0):Xt[e]||Object.values(Xt).includes(e)?(n.nextToken(),n.nextToken(),!0):!1}function vs(n,e){let i=n.length,t=n;if(e.beginRepeatingDigits&&e.endRepeatingDigits){n=n.slice(0,-1);for(let u=0;u<n.length-16;u++){let o=n.substring(0,u);for(let s=0;s<17;s++){let a=n.substring(u,u+s+1),l=Math.floor((n.length-o.length)/a.length);if(l<=3)break;if((o+a.repeat(l+1)).startsWith(n))return a==="0"?o.replace(/(\d{3})/g,"$1"+e.groupSeparator):o.replace(/(\d{3})/g,"$1"+e.groupSeparator)+e.beginRepeatingDigits+a+e.endRepeatingDigits}}}let r=i>e.precision-1;return n=t,r&&(n=n.substring(0,e.precision-1)),e.groupSeparator&&(n=n.replace(/(\d{3})/g,"$1"+e.groupSeparator),n.endsWith(e.groupSeparator)&&(n=n.slice(0,-e.groupSeparator.length))),r?n+e.truncationMarker:n}function Ns(n,e){return n?e.beginExponentMarker?e.beginExponentMarker+n+(e.endExponentMarker??""):"10^{"+n+"}":""}function _s(n,e){if(n===null)return"";let i;if(typeof n=="number"||typeof n=="string")i=n;else if(typeof n=="object"&&"num"in n)i=n.num;else return"";if(typeof i=="number"){if(i===1/0)return e.positiveInfinity;if(i===-1/0)return e.negativeInfinity;if(Number.isNaN(i))return e.notANumber;let u;return e.notation==="engineering"?u=er(i.toExponential(),e,3):e.notation==="scientific"&&(u=er(i.toExponential(),e)),u??yu(i.toString(),e)}if(i=i.toLowerCase().replace(/[\u0009-\u000d\u0020\u00a0]/g,""),i==="infinity"||i==="+infinity")return e.positiveInfinity;if(i==="-infinity")return e.negativeInfinity;if(i==="nan")return e.notANumber;if(!/^[-+\.]?[0-9]/.test(i))return"";if(i=i.replace(/[nd]$/,""),/\([0-9]+\)/.test(i)){let[u,o,s,a]=i.match(/(.+)\(([0-9]+)\)(.*)$/)??[];i=o+s.repeat(Math.ceil(e.precision/s.length))+a}let t="";for(i[0]==="-"?(t="-",i=i.substring(1)):i[0]==="+"&&(i=i.substring(1));i[0]==="0";)i=i.substring(1);i.length===0?i="0":i[0]==="."&&(i="0"+i);let r;return e.notation==="engineering"?r=er(i,e,3):e.notation==="scientific"&&(r=er(i,e)),t+(r??yu(i,e))}function er(n,e,i=1){let t=n.match(/^(.*)[e|E]([-+]?[0-9]+)$/);if(!t){let f="";if(n[0]==="-"?(f="-",n=n.substring(1)):n[0]==="+"&&(n=n.substring(1)),n.indexOf(".")<0)n.length===1?n=f+n+"e+0":n=f+n[0]+"."+n.slice(1)+"e+"+(n.length-1).toString();else{let[d,c,m]=n.match(/^(.*)\.(.*)$/);for(m||(m="");c.startsWith("0");)c=c.substring(1);c?n=f+c[0]+"."+c.slice(1)+m+"e+"+(c.length-1).toString():n=f+"0."+m+"e+0"}t=n.match(/^(.*)[e|E]([-+]?[0-9]+)$/)}if(!t)return yu(n,e);let r=parseInt(t[2]),u=t[1];if(Math.abs(r)%i!==0){let f=r>0?r%i:-((i+r)%i);r=r>=0?r-f:r+f;let[d,c,m]=u.match(/^(.*)\.(.*)$/)??["",u,""];u=c+(m+"00000000000000000").slice(0,Math.abs(f))+"."+m.slice(Math.abs(f))}let o=e.avoidExponentsInRange;if(o&&r>=o[0]&&r<=o[1])return;let s="",a=u;t=a.match(/^(.*)\.(.*)$/),t&&(a=t[1],s=t[2]);let l=r!==0?Ns(Number(r).toString(),e):"";return e.groupSeparator&&(a=a.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator),s=vs(s,e)),s&&(s=e.decimalMarker+s),l?a==="1"&&!s?l:a+s+e.exponentProduct+l:a+s}function yu(n,e){let i=n.match(/^(.*)[e|E]([-+]?[0-9]+)$/i),t;i?.[1]&&i[2]&&(t=Ns(i[2],e));let r=i?.[1]??n,u="";return i=(t?i[1]:n).match(/^(.*)\.(.*)$/),i?.[1]&&i[2]&&(r=i[1],u=i[2]),e.groupSeparator&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,e.groupSeparator),u=vs(u,e)),u&&(u=e.decimalMarker+u),t?r==="1"&&!u?t:r+u+e.exponentProduct+t:r+u}var Cu={deg:n=>`${n}\\degree`,prime:n=>`${n}^{\\prime}`,dprime:n=>`${n}^{\\doubleprime}`,ring:n=>`\\mathring{${n}}`,hat:n=>`\\hat{${n}}`,tilde:n=>`\\tilde{${n}}`,vec:n=>`\\vec{${n}}`,bar:n=>`\\overline{${n}}`,underbar:n=>`\\underline{${n}}`,dot:n=>`\\dot{${n}}`,ddot:n=>`\\ddot{${n}}`,tdot:n=>`\\dddot{${n}}`,qdot:n=>`\\ddddot{${n}}`,acute:n=>`\\acute{${n}}`,grave:n=>`\\grave{${n}}`,breve:n=>`\\breve{${n}}`,check:n=>`\\check{${n}}`},Au={upright:n=>`\\mathrm{${n}}`,italic:n=>`\\mathit{${n}}`,bold:n=>`\\mathbf{${n}}`,script:n=>`\\mathscr{${n}}`,fraktur:n=>`\\mathfrak{${n}}`,doublestruck:n=>`\\mathbb{${n}}`,blackboard:n=>`\\mathbb{${n}}`,calligraphic:n=>`\\mathcal{${n}}`,gothic:n=>`\\mathfrak{${n}}`,sansserif:n=>`\\mathsf{${n}}`,monospace:n=>`\\mathtt{${n}}`},nr=class{constructor(e,i,t){this.level=-1;this.options=e,e.invisibleMultiply&&(!/#1/.test(e.invisibleMultiply)||!/#2/.test(e.invisibleMultiply))&&t([{severity:"warning",message:["expected-argument","invisibleMultiply"]}]),this.onError=t,this.dictionary=i,this.canonical=void 0}updateOptions(e){for(let i of Object.keys(this.options))i in e&&(this.options[i]=e[i])}wrap(e,i){if(e===null)return"";if(i===void 0)return this.wrapString(this.serialize(e),this.options.groupStyle(e,this.level+1));if(typeof e=="number"||ti(e)){let r=k(e);return r!==null&&r<0&&i>oe?this.wrap(e):this.serialize(e)}let t=x(e);if(typeof t=="string"&&t!=="Delimiter"&&t!=="Subscript"){let r=this.dictionary.ids.get(t);if(r&&(r.kind==="symbol"||r.kind==="expression"||r.kind==="prefix"||r.kind==="infix"||r.kind==="postfix")&&r.precedence<i)return this.wrapString(this.serialize(e),this.options.applyFunctionStyle(e,this.level))}return this.serialize(e)}wrapShort(e){if(e===null)return"";let i=this.serialize(e);if(V(e)!==null||x(e)==="Delimiter"&&G(e)===1||zn(e)&&!/^(-|\.)/.test(i))return i;let r=x(e);return r!=="Add"&&r!=="Negate"&&r!=="Subtract"&&r!=="PlusMinus"&&r!=="Multiply"?i:this.wrapString(i,this.options.groupStyle(e,this.level+1))}wrapString(e,i,t){if(i==="none")return e;t??(t="()");let r=t?.[0]??".",u=t?.[1]??".";return r==='"'?r="``":r==="|"?r="\\lvert":r=Bi[r]??r,u==='"'?u="''":u==="|"?u="\\rvert":u=Bi[u]??u,r==="."&&u==="."?e:((r==="."||u===".")&&i==="normal"&&(i="scaled"),i==="scaled"?`\\left${r}${e}\\right${u}}`:i==="big"?`${`\\Bigl${r}`}${e}${`\\Bigr${u}`})`:r+e+u)}wrapArguments(e){return this.wrapString((N(e)??[]).map(i=>this.serialize(i)).join(", "),this.options.applyFunctionStyle(e,this.level))}serializeSymbol(e,i){return typeof e=="string"||it(e),i?.kind==="function"?Fu(V(e)??"")??"":i?.serialize?.(this,e)??Fu(V(e))??""}serializeFunction(e,i){if(i?.serialize)return i.serialize(this,e);let t=x(e);if(typeof t=="string")return Fu(t,"auto")+this.wrapArguments(e);if(x(t)==="InverseFunction"||x(t)==="Derivative")return this.serializeFunction(t,this.dictionary.ids.get(x(t)))+this.wrapArguments(e);let r=N(e)??[];if(r.length===1)return F([this.serialize(r[0]),"\\rhd",this.wrapString(this.serialize(t),this.options.applyFunctionStyle(e,this.level))]);let u=this.options.applyFunctionStyle(e,this.level);return F(["\\operatorname{apply}",this.wrapString(this.serialize(t)+", "+this.serialize(["List",...r]),u)])}serializeDictionary(e){return`\\left\\lbrack\\begin{array}{lll}${Object.keys(e).map(i=>`\\textbf{${i}} & \\rightarrow & ${this.serialize(e[i])}`).join("\\\\")}\\end{array}\\right\\rbrack`}serialize(e,i){if(e==null)return"";i??(i={}),i={...i},"canonical"in i||(i.canonical=!0);let t=this.canonical;this.canonical===void 0&&(this.canonical=i.canonical),this.level+=1;try{let r=(()=>{let u=_s(e,this.options);if(u)return u;let o=z(e);if(o!==null)return`\\text{${o}}`;let s=ri(e);if(s!==null)return this.serializeDictionary(s);let a=V(e);if(a!==null)return this.serializeSymbol(e,this.dictionary.ids.get(a));let l=au(e);if(l)return this.serializeFunction(e,this.dictionary.ids.get(l));if(x(e)!==null)return this.serializeFunction(e);this.onError([{severity:"warning",message:["syntax-error",e?JSON.stringify(e):"undefined"]}])})();return this.level-=1,this.canonical=t,r??""}catch{}return this.level-=1,this.canonical=t,""}applyFunctionStyle(e,i){return this.options.applyFunctionStyle(e,i)}groupStyle(e,i){return this.options.groupStyle(e,i)}rootStyle(e,i){return this.options.rootStyle(e,i)}fractionStyle(e,i){return this.options.fractionStyle(e,i)}logicStyle(e,i){return this.options.logicStyle(e,i)}powerStyle(e,i){return this.options.powerStyle(e,i)}numericSetStyle(e,i){return this.options.numericSetStyle(e,i)}};function Qf(n){let e=n.match(/^([^_]+)/)?.[1]??"",i=rn.findIndex(o=>e===o[0]);if(i>=0)return[rn[i][1],n.substring(rn[i][0].length)];let t={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"};if(i=Object.keys(t).findIndex(o=>n.startsWith(o)),i>=0){let o=Object.keys(t)[i];return[t[o],n.substring(o.length)]}let r=n.codePointAt(0);if(i=rn.findIndex(o=>o[2]===r),i>=0)return[rn[i][1],n.substring(1)];let u={plus:"+",minus:"-",pm:"\\pm",ast:"\\ast",dag:"\\dag",ddag:"\\ddag",hash:"\\#",bottom:"\\bot",top:"\\top",bullet:"\\bullet",circle:"\\circ",diamond:"\\diamond",times:"\\times",square:"\\square",star:"\\star"};if(i=Object.keys(u).findIndex(o=>e===o),i>=0){let o=Object.keys(u)[i];return[u[o],n.substring(o.length)]}return[e,n.substring(e.length)]}function Xf(n){let[e,i]=Qf(n),t=[];for(;i.length>0;){let u=i.match(/^_([a-zA-Z]+)(.*)/);if(!u||!Cu[u[1]])break;t.push(u[1]),i=u[2]}let r=[];for(;i.length>0;){let u=i.match(/^_([a-zA-Z]+)(.*)/);if(!u||!Au[u[1]])break;r.push(u[1]),i=u[2]}return[e,t,r,i]}function ir(n,e=!0,i="auto"){let[t,r,u,o]=Xf(n);for(let s of r)Cu[s]&&(t=Cu[s](t));if(e){let s=[],a=[],l=t.match(/^([^\d].*?)(\d+)$/);for(l&&(a.push(l[2]),t=l[1]);o.length>0;)if(o.startsWith("__")){let[f,d]=ir(o.substring(2),!1,"none");s.push(f),o=d}else if(o.startsWith("_")){let[f,d]=ir(o.substring(1),!1,"none");a.push(f),o=d}else break;s.length>0&&(t=`${t}^{${s.join(",")}}`),a.length>0&&(t=`${t}_{${a.join(",")}}`)}for(let s of u)Au[s]&&(t=Au[s](t));if(u.length===0&&i!=="none")switch(i){case"auto":Ht(t)>1&&(t=`\\mathrm{${t}}`);break;case"operator":t=`\\operatorname{${t}}`;break;case"italic":t=`\\mathit{${t}}`;break;case"upright":t=`\\mathrm{${t}}`;break}return[t,o]}function Fu(n,e="auto"){if(n===null)return null;if(Fi.test(n))return n;let i=n.match(/^(_+)(.*)/);if(i){let[u,o]=ir(i[2],!0,"none");return`\\operatorname{${"\\_".repeat(i[1].length)+u+o}}`}let[t,r]=ir(n,!0,e);return r.length>0?`\\operatorname{${n}}`:t}function Ss(n,e){return"normal"}function Ts(n,e){return"normal"}function Is(n,e){return e>2?"solidus":"radical"}function ks(n,e){if(e>3)return"inline-solidus";if(x(n)==="Divide"){let[i,t]=[rt(Ne(n)),rt(nn(n))];if(t<=2&&i>5)return"factor";if(i<=2&&t>5)return"reciprocal"}return"quotient"}function ws(n,e){return"boolean"}function Ms(n,e){return"solidus"}function Os(n,e){return"compact"}var Kf={invisibleMultiply:"",invisiblePlus:"",multiply:"\\times",missingSymbol:"\\blacksquare",applyFunctionStyle:Ss,groupStyle:Ts,rootStyle:Is,fractionStyle:ks,logicStyle:ws,powerStyle:Ms,numericSetStyle:Os},at=class n{constructor(e){let i=r=>{if(typeof window<"u")for(let u of r)console.warn(u.message)};this.onError=e.onError??i,this.computeEngine=e.computeEngine;let t={...e};delete t.dictionary,delete t.onError,this.options={...Eu,...bu,...Kf,...t},this._dictionaryInput=e.dictionary??n.getDictionary(),this._dictionary=hu(this._dictionaryInput,r=>this.onError([r]))}get dictionary(){return this._dictionaryInput}set dictionary(e){this._dictionaryInput=e,this._dictionary=hu(e,i=>this.onError([i]))}updateOptions(e){for(let i of Object.keys(this.options))i in e&&(this.options[i]=e[i]);this.serializer.updateOptions(e)}static getDictionary(e="all"){if(e==="all"){let i=[];for(let t of Object.keys(Ni))Ni[t]&&i.push(...Ni[t]);return i}return Ni[e]?Object.freeze([...Ni[e]]):[]}parse(e){let i=new Kt($(e,[]),this.options,this._dictionary,this.computeEngine),t=i.parseExpression();if(!i.atEnd){let r=i.parseSyntaxError();for(t=t?["Sequence",t,r]:r;!i.atEnd;)i.nextToken()}return t??(t=["Sequence"]),this.options.preserveLatex&&(Array.isArray(t)?t={latex:e,fn:t}:typeof t=="number"?t={latex:e,num:Number(t).toString()}:typeof t=="string"?t={latex:e,sym:t}:typeof t=="object"&&t!==null&&(t.latex=e)),t??["Sequence"]}serialize(e,i){return this.serializer.serialize(e,i)}get serializer(){return this._serializer?this._serializer:(this._serializer=new nr(this.options,this._dictionary,this.onError),this._serializer)}};var Ys=he(De(),1);var or=he(De(),1);var Un=he(De(),1);function Bu(n,e,i={}){let{contract:t=.125,step:r=1,power:u=2,atol:o=1e-16,rtol:s=o>0?0:Math.sqrt(Number.EPSILON),maxeval:a=1e6,breaktol:l=2}=i;if(!isFinite(e))return Bu(g=>n(1/g),1/e,{rtol:s,atol:o,maxeval:a,contract:Math.abs(t)>1?1/t:t,step:1/r,power:u});let f=r,d=Math.pow(1/t,u),c=n(e+f),m=[c],D=1/0,h=1;for(;h<a;){h+=1,f*=t,m.push(n(e+f));let g=d,A=1/0;for(let B=m.length-2;B>=0;B--){let C=m[B];m[B]=m[B+1]+(m[B+1]-m[B])/(g-1);let T=Math.abs(m[B]-C);A=Math.min(A,T),T<D&&(c=m[B],D=T),g*=d}if(A>l*D||!isFinite(A)||D<=Math.max(s*Math.abs(c),o))break}return[c,D]}var Ls=53,oi=Math.log10(Math.pow(2,Ls)),ed=7,vp=Math.pow(2,-(Ls-ed)),Ii=Math.pow(10,-10),_i=1e6,tr=1e6,lt=200;var vu=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]),qs=7919;function Nu(n){if(Number.isInteger(n)&&n>=0&&n<Number.MAX_SAFE_INTEGER,n<=3)return{[n]:1};let e={},i=0;for(;n%2===0;)i+=1,n/=2;for(i>0&&(e[2]=i),i=0;n%3===0;)i+=1,n/=3;i>0&&(e[3]=i);let t=!1;for(;!t;){if(n===1)return e;let r=Math.sqrt(n);t=!0;for(let u=6;u<=r+6;u+=6){if(n%(u-1)===0){e[u-1]=(e[u-1]??0)+1,n/=u-1,t=!1;break}if(n%(u+1)===0){e[u+1]=(e[u+1]??0)+1,n/=u+1,t=!1;break}}}return e[n]!==void 0?e[n]+=1:e[n]=1,e}function Gn(n,e){if(n>=Number.MAX_SAFE_INTEGER)return[1,n];if(n===0)return[0,0];Number.isInteger(n)&&n>0&&n<Number.MAX_SAFE_INTEGER;let i=Nu(n),t=1,r=1;for(let u of Object.keys(i)){let o=parseInt(u);t=t*Math.pow(o,Math.floor(i[u]/e)),r=r*Math.pow(o,i[u]%e)}return[t,r]}function Tn(n,e){if(n===0)return e;if(e===0||n===e)return n;if(!Number.isInteger(n)||!Number.isInteger(e))return NaN;for(;e!==0;)[n,e]=[e,n%e];return n<0?-n:n}function rr(n,e){return n*e/Tn(n,e)}function ur(n){if(!Number.isInteger(n)||n<0)return NaN;let e=1;for(let i=2;i<=n;i++)e=e*i;return e}function Vs(n){if(!Number.isInteger(n)||n<0)return NaN;if(n<0)return NaN;if(n<=1)return 1;let e=n;for(;n>2;)n-=2,e*=n;return e}var Rs=7,Ps=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];function ft(n){if(n<0)return NaN;let e=Math.PI,i=n*n*n;return n*Math.log(n)-n-.5*Math.log(n)+.5*Math.log(2*e)+1/(12*n)-1/(360*i)+1/(1260*i*n*n)}function ki(n){if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*ki(1-n));if(n>100)return Math.exp(ft(n));n-=1;let e=Ps[0];for(let t=1;t<Rs+2;t++)e+=Ps[t]/(n+t);let i=n+Rs+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,n+.5)*Math.exp(-i)*e}function E(n){if(n==null)return null;let e=n.numericValue;if(e===null)return null;if(typeof e=="number")return e;if(e instanceof y)return e.toNumber();if(Array.isArray(e)){let[i,t]=e;return typeof i=="number"&&typeof t=="number"?i/t:Number(i)/Number(t)}return!(e instanceof Un.Complex)||e.im,null}function Ge(n){if(n==null)return null;let e=n.numericValue;if(e===null)return null;if(e instanceof y)return e;if(typeof e=="number")return n.engine.bignum(e);if(Array.isArray(e)){let[i,t]=e;return typeof i=="number"&&typeof t=="number"?n.engine.bignum(i/t):n.engine.bignum(i).div(t.toString())}return!(e instanceof Un.Complex)||e.im,null}function q(n){if(n==null)return null;let e=n.numericValue;if(e===null)return null;if(typeof e=="number")return Number.isInteger(e)&&e>=-_i&&e<=_i?e:null;if(e instanceof y){if(e.isInteger()){let t=e.toNumber();if(t>=-_i&&t<=_i)return t}return null}if(n.isCanonical)return null;let i=e;if(Array.isArray(i)){let[t,r]=i,u;return typeof t=="number"&&typeof r=="number"?u=t/r:u=Number(t)/Number(r),Number.isInteger(u)&&u>=-_i&&u<=_i?u:null}return null}function Si(n,e){return typeof n=="number"&&Math.abs(n)<=e||n instanceof y&&n.abs().lte(e)||n instanceof Un.Complex&&Math.abs(n.re)<=e&&Math.abs(n.im)<=e?0:n}function _u(n){let e=.254829592,i=-.284496736,t=1.421413741,r=-1.453152027,u=1.061405429,o=.3275911,s=n<0?-1:1;n=Math.abs(n);let a=1/(1+o*n),l=((((u*a+r)*a+t)*a+i)*a+e)*a;return s*(1-l*Math.exp(-n*n))}function $s(n){let e=Math.PI,i=e*e,t=i*e,r=n*n,u=n*r,o=u*r,s=o*r;return Math.sqrt(e)/2*(n+e/12*u+7*i/480*o+127*t/40320*s+4369*i*i/5806080*s*r+34807*t*i/182476800*s*r*r)}function zs(n,e,i=.1){return(n(e-4*i)/280-4*n(e-3*i)/105+n(e-2*i)/5-4*n(e-i)/5+4*n(e+i)/5-n(e+2*i)/5+4*n(e+3*i)/105-n(e+4*i)/280)/i}function Us(n,e,i,t=1e5){let r=0;if(e===-1/0&&i===1/0)for(let u=0;u<t;u++){let o=Math.random(),s=Math.tan(Math.PI*(o-.5)),a=Math.PI*(1+s*s);r+=n(s)/a}else if(e===-1/0)for(let u=0;u<t;u++){let o=Math.random(),s=i-Math.log(1-o),a=1/(1-o);r+=n(s)/a}else if(i===1/0)for(let u=0;u<t;u++){let o=Math.random(),s=e+Math.log(o),a=1/o;r+=n(s)/a}else for(let u=0;u<t;u++)r+=n(e+Math.random()*(i-e));return r/t*(i-e)}function ui(n,e,i=1){if(i===0){let u=ui(n,e,-1),o=ui(n,e,1);return u===void 0||o===void 0?NaN:Math.abs(u-o)>1e-5?NaN:(u+o)/2}let[t,r]=Bu(n,e,{step:i>0?1:-1});return t}function nd(n){if(n==="N")return[0,""];let e={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},i=0,t=0;n=n.toUpperCase();for(let r=n.length-1;r>=0;r--){let u=e[n[r]];if(u===void 0)return[i,n.slice(r)];u<t?i-=u:i+=u,t=u}return[i,""]}function Ti(n,e){if(n=n.trim(),n.length===0)return[NaN,""];if(n.startsWith("+"))return Ti(n.slice(1),e);if(n.startsWith("-")){let[r,u]=Ti(n.slice(1),e);return[-r,u]}let i=10;if(typeof e=="string"&&(e=e.toLowerCase()),n.startsWith("0x"))i=16,n=n.slice(2);else if(n.startsWith("0b"))i=2,n=n.slice(2);else{if(e==="roman")return nd(n);if(e==="base64"||e==="base-64")try{return[parseInt(btoa(n)),""]}catch{return[NaN,""]}else typeof e=="number"?i=e:typeof e=="string"&&(i=parseInt(e))}let t=0;for(let r=0;r<n.length;r++){let u={" ":-1,"\xA0":-1,"\u2000":-1,"\u2001":-1,"\u2002":-1,"\u2003":-1,"\u2004":-1,"\u2005":-1,"\u2006":-1,"\u2007":-1,"\u2008":-1,"\u2009":-1,"\u200A":-1,"\u200B":-1,"\u202F":-1,"\u205F":-1,_:-1,",":-1,0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35}[n[r]];if(u!==-1){if(u===void 0)return[t,n.substring(r)];if(u>=i)return[t,n.substring(r)];t=t*i+u}}return[t,""]}function si(n,e,i){if(n===e)return 0;let t=n.N(),r=e.N(),u=t.numericValue,o=r.numericValue;if(u===null||o===null){let l=t.sgn,f=r.sgn;return typeof l!="number"||typeof f!="number"?void 0:l===0&&f===0?0:l<0&&f>0?-1:l>0&&f<0?1:void 0}if(i??(i=n.engine.tolerance),u instanceof Un.Complex&&o instanceof Un.Complex)return Si(u.re-o.re,i)===0&&Si(u.im-o.im,i)===0?0:void 0;if(u instanceof Un.Complex||o instanceof Un.Complex)return;if(!U(u)&&U(o),typeof u=="number"&&typeof o=="number")return Si(o-u,i)===0?0:u<o?-1:1;let s=n.engine,a=s.bignum(o).sub(s.bignum(u));return Si(a,i)===0?0:a.isPos()?1:-1}function Su(n){if(typeof n=="number")return Number.isInteger(n)?BigInt(n):null;if(n==null||!zn(n))return null;let e=ti(n)?n.num:n;if(typeof e=="number")return Number.isInteger(e)?BigInt(e):null;if(typeof e!="string")return null;let i=e.toLowerCase().replace(/[0-9][nd]$/,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,"");return i==="nan"||i==="infinity"||i==="+infinity"||i==="-infinity"||i.includes(".")?null:R(i)}function R(n){if(typeof n=="bigint")return n;if(n instanceof Ue)return R(n.toString());let e=n.toString().toLowerCase();if(e==="nan")return NaN;if(e==="infinity"||e==="+infinity")return 1/0;if(e==="-infinity")return-1/0;let i=e.match(/([^\.]+)(?:\.([0-9]+))?e(.+)$/);return i&&(e=i[1]+(i[2]??"")+"0".repeat(parseInt(i[3])-(i[2]?i[2].length:0))),BigInt(e)}function Gs(n,e){for(;e!==BigInt(0);)[n,e]=[e,n%e];return n<0?-n:n}var id=[BigInt(4),BigInt(2),BigInt(4),BigInt(2),BigInt(4),BigInt(6),BigInt(2),BigInt(6)];function td(n){if(n<Number.MAX_SAFE_INTEGER){let f=Nu(Number(n)),d=new Map;for(let c of Object.keys(f))d.set(R(c),f[c]);return d}let e=n,i=new Map,t=0,r=0,u=0,o=BigInt(10);for(;e%o===BigInt(0);)t+=1,u+=1,e=e/o;for(o=BigInt(5);e%o===BigInt(0);)u+=1,e=e/o;for(o=BigInt(3);e%o===BigInt(0);)r+=1,e=e/o;for(o=BigInt(2);e%o===BigInt(0);)t+=1,e=e/o;t>0&&i.set("2",t),r>0&&i.set("3",r),u>0&&i.set("5",u),o=BigInt(7);let s="",a=0;for(;o*o<e;)e%o===BigInt(0)?(s||(s=o.toString()),i.set(s,(i.get(s)??0)+1),e=e/o):(o=o+id[a],s="",a=a<7?a+1:0);e!==BigInt(1)&&i.set(e.toString(),(i.get(e.toString())??0)+1);let l=new Map;for(let[f,d]of i)l.set(R(f),d);return l}function ai(n,e){let i=td(n),t=BigInt(1),r=BigInt(1),u=R(e);for(let[o,s]of i){let a=R(s);t=t*o**(a/u),r=r*o**(a%u)}return[t,r]}function U(n){return n!==null&&Array.isArray(n)}function H(n){return n!==null&&Array.isArray(n)&&typeof n[0]=="number"}function K(n){return n!==null&&Array.isArray(n)&&typeof n[0]=="bigint"}function Ze(n){return n[0]==0}function te(n){return n[0]===n[1]}function js(n){return n[1]===1||n[1]===BigInt(1)}function wi(n){return n[0]===-n[1]}function Re(n){return Number(n[0])}function Dn(n){return Number(n[1])}function Tu(n){return n[0]<0}function Ce(n){return[-n[0],n[1]]}function In(n){return n[0]<0?[-n[1],-n[0]]:[n[1],n[0]]}function J(n){let e=n.numericValue;if(Array.isArray(e))return e;if(e!==null){if(typeof e=="number"&&Number.isInteger(e))return e>1e9||e<-1e9?[R(e),BigInt(1)]:[e,1];if(e instanceof y&&e.isInteger())return[R(e),BigInt(1)]}}function dt(n,e){if(Array.isArray(e)||e.numericValue!==null&&e.numericValue instanceof or.Complex,typeof n[0]=="number"&&!Number.isFinite(n[0]))return n;let i=Array.isArray(e)?e:e.numericValue;if(i===null)return n;if(Array.isArray(i)){if(K(i))return n=[BigInt(n[0]),BigInt(n[1])],[i[1]*n[0]+i[0]*n[1],i[1]*n[1]];if(!Number.isFinite(i[0]))return i;if(K(n)){let t=[BigInt(i[0]),BigInt(i[1])];return[t[1]*n[0]+t[0]*n[1],t[1]*n[1]]}return[i[1]*n[0]+i[0]*n[1],i[1]*n[1]]}return i instanceof y?i.isNaN()?[Number.NaN,1]:i.isFinite()?(i.isInteger(),H(n)&&(n=[BigInt(n[0]),BigInt(n[1])]),[n[0]+n[1]*R(i.toString()),n[1]]):[i.isNegative()?-1/0:1/0,1]:i instanceof or.Complex?[Number.NaN,1]:(!Number.isFinite(i)||Number.isInteger(i),Number.isFinite(i)?H(n)?[n[0]+n[1]*i,n[1]]:[n[0]+n[1]*R(i),n[1]]:[i,1])}function Y(n,e){if(Array.isArray(e)||e.numericValue!==null&&e instanceof or.Complex,Array.isArray(e))return H(n)&&H(e)?[n[0]*e[0],n[1]*e[1]]:(H(n)&&(n=[R(n[0]),R(n[1])]),H(e)&&(e=[R(e[0]),R(e[1])]),[n[0]*e[0],n[1]*e[1]]);let i=e.numericValue;return i!==null&&typeof i=="number"?(Number.isInteger(i),H(n)?[n[0]*i,n[1]]:[n[0]*R(i),n[1]]):i instanceof y?(i.isInteger(),H(n)?[R(i.toString())*R(n[0]),R(n[1])]:[R(i.toString())*n[0],n[1]]):Array.isArray(i)?K(i)?[i[0]*R(n[0]),i[1]*R(n[1])]:H(n)?[n[0]*i[0],n[1]*i[1]]:[n[0]*R(i[0]),n[1]*R(i[1])]:n}function Zs(n,e){return Y(n,In(e))}function sr(n,e){if(Number.isInteger(e),e===0)return[1,1];if(e<0&&(n=In(n),e=-e),e===1)return n;if(H(n))return[Math.pow(n[0],e),Math.pow(n[1],e)];let i=R(e);return[n[0]**i,n[1]**i]}function Hs(n){let e=Math.sqrt(Number(n[0])),i=Math.sqrt(Number(n[1]));if(Number.isInteger(e)&&Number.isInteger(i))return[e,i]}function je(n){if(H(n)){if(n[0]===1||n[1]===1)return n;if(n[1]<0&&(n=[-n[0],-n[1]]),!Number.isFinite(n[1]))return[0,1];let i=Tn(n[0],n[1]);return i<=1?n:[n[0]/i,n[1]/i]}if(n[0]===BigInt(1)||n[1]===BigInt(1))return n;n[1]<0&&(n=[-n[0],-n[1]]);let e=Gs(n[0],n[1]);return e<=1?n:[n[0]/e,n[1]/e]}function Js(n){if(!Number.isFinite(n)||n%1===0)return n;let i=1e-15,t=Math.floor(n),r=1,u=0,o=t,s=1;for(;n-t>i*s*s;){n=1/(n-t),t=Math.floor(n);let a=r;r=o;let l=u;u=s,o=a+t*r,s=l+t*u}return[o,s]}function Ws(n){if(K(n)){let[s,a]=n,[l,f]=ai(s,2),[d,c]=ai(a,2);return[je([l,d]),je([f,c])]}let[e,i]=n,[t,r]=Gn(e,2),[u,o]=Gn(i,2);return[je([t,u]),je([r,o])]}function Qs(n){if(typeof n=="number"&&!isNaN(n))return isFinite(n)?Number.isInteger(n)?n>0?"PositiveIntegers":n<0?"NegativeIntegers":"Integers":n>0?"PositiveNumbers":n<0?"NegativeNumbers":"RealNumbers":"ExtendedRealNumbers";if(n instanceof y)return n.isNaN()?"Numbers":n.isFinite()?n.isInteger()?n.isPositive()?"PositiveIntegers":n.isNegative()?"NegativeIntegers":"Integers":n.isPositive()?"PositiveNumbers":n.isNegative()?"NegativeNumbers":"RealNumbers":"ExtendedRealNumbers";if(n instanceof Ys.Complex){let e=n;return e.im,e.re===0?"ImaginaryNumbers":"ComplexNumbers"}if(U(n)){let[e,i]=n;return typeof e!="number"||!Number.isNaN(e)&&Number.isNaN(i),"RationalNumbers"}return"Numbers"}function ct(n){n.ctor;let e=n.engine,i=n.params,t=[],r=[],u,o=e.domain(i[i.length-1]);for(let s of i.slice(0,-1))if(x(s)==="OptArg"){if(r.length>0)throw Error(`Unexpected multiple OptArg in domain ${n}`);if(u)throw Error(`Unexpected OptArg after VarArg in domain ${n}`);if(G(s)===0)throw Error(`Unexpected empty OptArg in domain ${n}`);for(let a of N(s)){if(x(a)==="OptArg")throw Error(`Unexpected OptArg of OptArg in domain ${n}`);if(x(a)==="VarArg")throw Error(`Unexpected superfluous OptArg of VarArg in domain ${n}`);r.push(e.domain(a))}}else if(x(s)==="VarArg"){let a=N(s);if(a.length!==1)throw Error(`Invalid VarArg in domain ${n}`);if(x(a[0])==="OptArg")throw Error(`Unexpectedf VarArg of OptArg in domain ${n}`);if(x(a[0])==="VarArg")throw Error(`Unexpected VarArg of VarArg in domain ${n}`);u=e.domain(a[0])}else{if(r.length>0)throw Error(`Unexpected required parameter after OptArg in domain ${n}`);if(u)throw Error(`Unexpected required parameter after VarArg in domain ${n}`);t.push(e.domain(s))}return[t,r,u,o]}function mt(n){let[e,i,t,r]=ct(n);return{params:e.map(u=>u.json),optParams:i.map(u=>u.json),restParam:t?.json,result:r.json}}function ar(n,e){let i=[...e.params];return e.optParams.length>0&&i.push(["OptArg",...e.optParams]),e.restParam&&i.push(["VarArg",e.restParam]),typeof e.result=="function"?i.push(e.result(n,[])??n.symbol("Undefined")):i.push(e.result),n.domain(["FunctionOf",...i])}function Mi(n){return n.string!==null||(n.symbolDefinition?.value?.string??null)!==null?!0:(n.functionDefinition??n.symbolDefinition?.value?.functionDefinition)?.iterator!==void 0}function lr(n){return n.string!==null||(n.symbolDefinition?.value?.string??null)!==null?!0:(n.functionDefinition??n.symbolDefinition?.value?.functionDefinition)?.at!==void 0}function le(n){if(n.string!==null||(n.symbolDefinition?.value?.string??null)!==null)return!0;let e=n.functionDefinition??n.symbolDefinition?.value?.functionDefinition;return e?e.at!==void 0&&Number.isFinite(e.size?.(n)??1/0):!1}function Q(n){let e=[],i=rd(n);if(!i)return e.push(n),e;let t=n.engine.iterationLimit,r=0;for(;;){let{done:u,value:o}=i.next();if(u)return e;if(r++>t)return e.push(n.engine.error("iteration-limit-exceeded")),e;e.push(o)}}function rd(n){let e=n.functionDefinition??n.symbolDefinition?.value?.functionDefinition;if(e?.iterator)return e.iterator(n);let i=n.string??n.symbolDefinition?.value?.string??null;if(i!==null){if(i.length===0)return{next:()=>({done:!0,value:void 0})};let t=0;return{next:()=>({value:n.engine.string(i.charAt(t++)),done:t>i.length})}}}function Xs(n,e){let i=n.functionDefinition??n.symbolDefinition?.value?.functionDefinition;if(i?.at)return i.at(n,e);let t=n.string;if(t)return e<1?n.engine.string(t.charAt(t.length+e)):n.engine.string(t.charAt(e-1))}function re(n,e){if(!e||n.every(t=>!t.ops||t.head!==e))return n;let i=[];for(let t of n)!t.ops||t.head!==e?i.push(t):i.push(...re(t.ops,e));return i.length,n.length,i.length===n.length?n:i}function ue(n){if(n.every(i=>i.head!=="Sequence"&&i.head!=="Delimiter"))return n;let e=[];for(let i of n)if(!i.isValid)e.push(i);else if(i.head==="Delimiter")if(i.op1.head==="Sequence"){let t=i.op1.ops??[];t.length===0?e.push(i.engine.box(["Tupple"])):e.push(...ue(t))}else e.push(i.op1);else i.head==="Sequence"?i.ops&&e.push(...i.ops):e.push(i);return e}function Iu(n,e){return e===void 0?n._fn("Tuple",[]):e.head==="Delimiter"?Iu(n,e.op1):e.head==="Sequence"?e:e.ops?n._fn("Tuple",e.ops):e}var Dt=he(De(),1);function hn(n){return typeof n=="object"&&n!==null&&"engine"in n}function P(n){return n.numericMode==="bignum"||n.numericMode==="auto"}function ae(n){return n.numericMode==="auto"||n.numericMode==="complex"}function fr(n){return typeof n=="string"?n.startsWith("$")&&n.endsWith("$"):!1}function Oi(n){return typeof n!="string"?null:n.startsWith("$$")&&n.endsWith("$$")?n.slice(2,-2):n.startsWith("$")&&n.endsWith("$")?n.slice(1,-1):null}function Ae(n){let e=0;for(let i=0;i<n.length;i++)e=Math.imul(31,e)+n.charCodeAt(i)|0;return Math.abs(e)}function pt(n){let e=n.numericValue;return typeof e=="number"&&Number.isInteger(e)?R(e):e instanceof y&&e.isInteger()?R(e):null}function ku(n){if(n.head==="Negate")return[-1,n.op1];let e=n.numericValue;if(e===null)return[1,n];let i=n.engine;return typeof e=="number"&&e<0?[-1,i.number(-e)]:e instanceof y&&e.isNegative()?[-1,i.number(e.neg())]:e instanceof Dt.Complex&&e.re<0?[-1,i.number(i.complex(-e.re,-e.im))]:H(e)&&e[0]<0?[-1,i.number([-e[0],e[1]])]:K(e)&&e[0]<0?[-1,i.number([-e[0],e[1]])]:[1,n]}function ud(n,e,i,t){let r=n.numericValue,u=n.engine;return typeof r=="number"?P(u)&&i?u.chop(i(u.bignum(r))):u.chop(e(r)):r instanceof y?u.chop(i?.(r)??e(r.toNumber())):H(r)?!P(u)||!i?u.chop(e(r[0]/r[1])):u.chop(i(u.bignum(r[0]).div(r[1]))):K(r)?i?u.chop(i(u.bignum(r[0]).div(u.bignum(r[1])))):u.chop(e(Number(r[0])/Number(r[1]))):r instanceof Dt.Complex?!t||!ae(u)?NaN:u.chop(t(r)):NaN}function ne(n,e,i,t){if((n?.numericValue??null)!==null)return n.engine.number(ud(n,e,i,t))}function od(n,e,i,t,r){n.numericValue!==null&&e.numericValue;let u=n.engine,o=n.numericValue;H(o)&&(o=o[0]/o[1]);let s=e.numericValue;if(H(s)&&(s=s[0]/s[1]),!P(u)&&typeof o=="number"&&typeof s=="number")return i(o,s);let a;o instanceof y?a=o:K(o)?a=u.bignum(o[0]).div(u.bignum(o[1])):o!==null&&typeof o=="number"&&(a=u.bignum(o));let l;return s instanceof y?l=s:K(s)?a=u.bignum(s[0]).div(u.bignum(s[1])):s!==null&&typeof s=="number"&&(l=u.bignum(s)),a&&l?t?.(a,l)??i(a.toNumber(),l.toNumber()):o instanceof Dt.Complex||s instanceof Dt.Complex?!r||!ae(u)?NaN:r(u.complex(o??a?.toNumber()??NaN),u.complex(s??l?.toNumber()??NaN)):NaN}function jn(n,e,i,t,r){if(!(n.numericValue===null||e.numericValue===null))return n.engine.number(od(n,e,i,t,r))}function kn(n,e,i){return n==="all"?!0:n==="none"?!1:n==="first"?i===0:n==="rest"?i!==0:n==="last"?i===e:n==="most"?i!==e:!0}function fe(n){return n.every(e=>e.isCanonical)?n:n.map(e=>e.canonical)}function Be(n,e,i){if(e=fe(e),e=ue(e),!n.strict||e.length===i)return e;let t=[...e.slice(0,i)],r=Math.min(i,e.length);for(;r<i;)t.push(n.error("missing")),r+=1;for(;r<e.length;)t.push(n.error("unexpected-argument",e[r])),r+=1;return t}function Pe(n,e,i){let t=typeof i=="number"?i:i?.count,r=typeof i=="number"||(i?.flatten??!0);if(e=fe(e),r&&(e=ue(e)),typeof r=="string"&&re(e,r),!n.strict){for(let s of e)le(s)||s.infer(n.Numbers);return e}let u=!0;t??(t=e.length);let o=[];for(let s=0;s<=Math.max(t-1,e.length-1);s++){let a=e[s];if(s>t-1)u=!1,o.push(n.error("unexpected-argument",a));else if(a===void 0)u=!1,o.push(n.error("missing"));else if(a.symbol&&!n.lookupSymbol(a.symbol)&&!n.lookupFunction(a.symbol))o.push(a);else if(a.isNumber||a.domain?.isNumber)o.push(a);else if(!a.isValid)u=!1,o.push(a);else if(!a.domain)o.push(a);else if(le(a)){for(let l of Q(a))if(!l.isNumber&&!l.domain?.isNumber){u=!1;break}u?o.push(a):o.push(n.domainError("Numbers",a.domain,a))}else a.symbolDefinition?.inferredDomain&&a.domain.isCompatible(n.Numbers,"contravariant")||a.functionDefinition?.signature.inferredSignature&&a.domain.isCompatible(n.Numbers,"contravariant")?o.push(a):(u=!1,o.push(n.domainError("Numbers",a.domain,a)))}if(u)for(let s of o)if(le(s))for(let a of Q(s))a.infer(n.Numbers);else s.infer(n.Numbers);return o}function Le(n,e,i){return e==null?n.error("missing"):i===void 0?n.error("unexpected-argument",e):(e=e.canonical,e.head==="Sequence"&&(e=e.op1),!e.isValid||!e.domain||e.domain.isCompatible(i)?e:n.domainError(i,e.domain,e))}function Ks(n,e){return e==null?n.error("missing"):(e=e.canonical,!e.isValid||e.isPure?e:n.error("expected-pure-expression",e))}function dr(n,e,i){if(e.length===i.length&&e.every((r,u)=>!r.domain||r.domain.isCompatible(i[u])))return e;let t=[];for(let r=0;r<=i.length-1;r++)t.push(Le(n,e[r],i[r]));for(let r=i.length;r<=e.length-1;r++)t.push(n.error("unexpected-argument",e[r]));return t}function ea(n,e,i,t,r,u,o){if(!n.strict)return null;let s=[],a=!0,l=0;for(let f of r){let d=e[l++];if(!d){s.push(n.error("missing")),a=!1;continue}if(kn(i,r.length,l-1)){s.push(d);continue}if(!d.isValid){s.push(d),a=!1;continue}if(!d.domain){s.push(d);continue}if(t&&le(d)){s.push(d);continue}if(d.symbolDefinition?.inferredDomain&&d.domain.isCompatible(f,"contravariant")){s.push(d);continue}if(d.functionDefinition?.signature.inferredSignature&&d.domain.isCompatible(f,"contravariant")){s.push(d);continue}if(!d.domain.isCompatible(f)){s.push(n.domainError(f,d.domain,d)),a=!1;continue}s.push(d)}for(let f of u){let d=e[l];if(!d)break;if(kn(i,r.length,l)){s.push(d);continue}if(!d.isValid){s.push(d),a=!1,l+=1;continue}if(!d.domain){s.push(d),l+=1;continue}if(t&&le(d)){s.push(d);continue}if(d.symbolDefinition?.inferredDomain&&d.domain.isCompatible(f,"contravariant")){s.push(d);continue}if(!d.domain.isCompatible(f)){s.push(n.domainError(f,d.domain,d)),a=!1,l+=1;continue}s.push(d),l+=1}if(o)for(let f of e.slice(l)){if(l+=1,kn(i,r.length,l-1)){s.push(f);continue}if(!f.isValid){s.push(f),a=!1;continue}if(!f.domain){s.push(f);continue}if(t&&le(f)){s.push(f);continue}if(f.symbolDefinition?.inferredDomain&&f.domain.isCompatible(o,"contravariant")){s.push(f);continue}if(!f.domain.isCompatible(o)){s.push(n.domainError(o,f.domain,f)),a=!1;continue}s.push(f)}if(l<e.length)for(let f of e.slice(l))s.push(n.error("unexpected-argument",f)),a=!1;if(!a)return s;l=0;for(let f of r)kn(i,r.length,l)||(!t||!le(e[l]))&&e[l].infer(f),l+=1;for(let f of u)(!t||!le(e[l]))&&e[l]?.infer(f),l+=1;if(o)for(let f of e.slice(l))kn(i,r.length,l)||(!t||!le(f))&&f.infer(o),l+=1;return null}var na={Congruent:{commutative:!1,complexity:11e3,numeric:!0,signature:{simplify:(n,e)=>{if(!(e.length<3))return n._fn("Equal",[n.box(["Mod",e[0],e[2]]).simplify(),n.box(["Mod",e[1],e[2]]).simplify()]).simplify()},evaluate:(n,e)=>{if(e.length<3)return;let[i,t,r]=e,u=i.value,o=t.value,s=r.value;if(typeof u=="number"&&typeof o=="number"&&typeof s=="number")return u%s===o%s?n.True:n.False}}},IsSame:{description:"Compare two expressions for structural equality",hold:"all",signature:{domain:"RelationalOperators",evaluate:(n,e)=>{if(e.length!==2)return;let[i,t]=e;return i.isSame(t)===!0?n.True:n.False}}},Equal:{commutative:!0,complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"Equal",e),evaluate:(n,e)=>{if(e.length<2)return n.True;let i;for(let t of e)if(!i)i=t;else if(i.isEqual(t)!==!0)return n.False;return n.True}}},NotEqual:{wikidata:"Q28113351",commutative:!0,complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"NotEqual",e),evaluate:(n,e)=>{if(e.length<2)return n.False;let i;for(let t of e)if(!i)i=t;else if(i.isEqual(t)===!0)return n.False;return n.True}}},Less:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"Less",e),evaluate:(n,e)=>{if(e.length<2)return n.True;let i;for(let t of e){if(!t.isNumber)return;if(!i)i=t;else{let r=n.box(["Subtract",t,i]).N().sgn;if(r==null)return;if(r<=0)return n.False;i=t}}return n.True}}},NotLess:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"Less",e)])}},Greater:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"Less",[...e].reverse()),evaluate:(n,e)=>{if(e.length<2)return n.True;let i;for(let t of e){if(!t.isNumber)return;if(!i)i=t;else{let r=n.box(["Subtract",t,i]).N().sgn;if(r==null)return;if(r>=0)return n.False;i=t}}return n.True}}},NotGreater:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[n._fn("Greater",e)])}},LessEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"LessEqual",e),evaluate:(n,e)=>{if(e.length<2)return n.True;let i;for(let t of e){if(!t.isNumber)return;if(!i)i=t;else{let r=n.box(["Subtract",t,i]).N().sgn;if(r==null)return;if(r<0)return n.False;i=t}}return n.True}}},NotLessNotEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"LessEqual",e)])}},GreaterEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"LessEqual",[...e].reverse()),evaluate:(n,e)=>{if(e.length<2)return n.True;let i;for(let t of e){if(!t.isNumber)return;if(!i)i=t;else{let r=n.box(["Subtract",t,i]).N().sgn;if(r==null)return;if(r>0)return n.False;i=t}}return n.True}}},NotGreaterNotEqual:{complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"GreaterEqual",e)])}},TildeFullEqual:{description:"Indicate isomorphism, congruence and homotopic equivalence",signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"TildeFullEqual",e)}},NotTildeFullEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"TildeFullEqual",e)])}},TildeEqual:{description:"Approximately or asymptotically equal",complexity:11e3,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"TildeEqual",e)}},NotTildeEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"TildeEqual",e)])}},Approx:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"Approx",e)}},NotApprox:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"Approx",e)])}},ApproxEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"ApproxEqual",e)}},NotApproxEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"ApproxEqual",e)])}},ApproxNotEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"ApproxNotEqual",e)}},NotApproxNotEqual:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"ApproxNotEqual",e)])}},Precedes:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"Precedes",e)}},NotPrecedes:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"Precedes",e)])}},Succeeds:{signature:{domain:"RelationalOperators",canonical:(n,e)=>de(n,"Succeeds",e)}},NotSucceeds:{complexity:11100,signature:{domain:"RelationalOperators",canonical:(n,e)=>n._fn("Not",[de(n,"Succeeds",e)])}}};function de(n,e,i){i=re(ue(fe(i)),e);let t=[],r=[];for(let u of i)Nn(u)?(t.push(u),r.push(u.ops[u.ops.length-1])):r.push(u);return r=r.map(u=>Ks(n,u)),t.length===0?n._fn(e,r):n._fn("And",[n._fn(e,r),...t])}function wu(n){let e=n.head;return typeof e!="string"?!1:["Equal","Less","LessEqual","Greater","GreaterEqual"].includes(e)}function ht(n,e,i){let t=[];for(let r of e){let u=Mu(r,n,i);u!==null&&(t.some(o=>o.isEqual(u))||t.push(u))}return t}function li(n,e){let i=new Set;for(let{match:t,replace:r,condition:u,priority:o,id:s}of e){let a;if(typeof u=="string"){let l=Oi(u);if(l){let f=n.parse(l,{canonical:!1});a=(d,c)=>f.subs(d).evaluate()?.symbol==="True"}}else a=u;i.add({match:n.box(t,{canonical:!1}),replace:typeof r=="function"?r:n.box(r,{canonical:!1}),priority:o??0,condition:a,id:s??n.box(t,{canonical:!1}).toString()+(typeof r=="function"?"  ->  function":"  ->  "+n.box(r,{canonical:!1}).toString())})}return i}function Mu(n,e,i,t){let{match:r,replace:u,condition:o,id:s}=n,a=!1;if(e.ops&&t?.recursive){let f=e.engine,c=e.ops.map(m=>{let D=Mu(n,m,{},t);return D&&(a=!0),D??m});a&&(e=f.function(e.head,c,{canonical:!1}))}let l=e.match(r,{substitution:i,...t});return l===null?a?e:null:typeof o=="function"&&!o(l,e.engine)?null:typeof u=="function"?u(e,l):u.subs(l,{canonical:e.isCanonical})}function cr(n,e,i){let t=i?.iterationLimit??1,r=0,u=i?.once??!1;e instanceof Set||(e=n.engine.rules(Array.isArray(e)?e:[e]));let o=!1,s=!1;try{for(;!o&&r<t;){o=!0;for(let a of e){let l=Mu(a,n,{},i);if(l!==null&&l!==n){if(u)return l;o=!1,s=!0,n=l}}r+=1}}catch(a){console.error(a)}return s?n:null}var Na=he(De(),1);var Ri=["InvalidDomain","DictionaryOf","FunctionOf","ListOf","TupleOf","Intersection","Union","OptArg","VarArg"],mr={Functions:["FunctionOf",["VarArg","Anything"],"Anything"],NumericFunctions:["FunctionOf","Numbers",["VarArg","Numbers"],"Numbers"],RealFunctions:["FunctionOf","ExtendedRealNumbers",["VarArg","ExtendedRealNumbers"],"ExtendedRealNumbers"],LogicOperators:["FunctionOf","Booleans",["VarArg","Booleans"],"Booleans"],Predicates:["FunctionOf","Anything",["VarArg","Anything"],"Booleans"],RelationalOperators:["FunctionOf","Anything","Anything","Booleans"]},Zn={Anything:[],Values:"Anything",Domains:"Anything",Void:"NothingDomain",NothingDomain:["Booleans","Strings","Symbols","Tuples","Lists","Dictionaries","ImaginaryNumbers","TranscendentalNumbers","PositiveIntegers","NegativeIntegers","NonPositiveIntegers","NonNegativeIntegers","PositiveNumbers","NegativeNumbers","NonPositiveNumbers","NonNegativeNumbers","LogicOperators","RelationalOperators"],Booleans:"Values",Strings:"Values",Symbols:"Values",Collections:"Values",Lists:"Collections",Dictionaries:"Collections",Sequences:"Collections",Tuples:"Collections",Sets:"Collections",Functions:"Anything",Predicates:"Functions",LogicOperators:"Predicates",RelationalOperators:"Predicates",NumericFunctions:"Functions",RealFunctions:"NumericFunctions",Numbers:"Values",ExtendedComplexNumbers:"Numbers",ComplexNumbers:"ExtendedComplexNumbers",ImaginaryNumbers:"ComplexNumbers",ExtendedRealNumbers:"ExtendedComplexNumbers",RealNumbers:["ComplexNumbers","ExtendedRealNumbers"],PositiveNumbers:"NonNegativeNumbers",NonNegativeNumbers:"RealNumbers",NonPositiveNumbers:"NegativeNumbers",NegativeNumbers:"RealNumbers",TranscendentalNumbers:"RealNumbers",AlgebraicNumbers:"RealNumbers",RationalNumbers:"AlgebraicNumbers",Integers:"RationalNumbers",PositiveIntegers:"NonNegativeIntegers",NonNegativeIntegers:"Integers",NonPositiveIntegers:"NegativeIntegers",NegativeIntegers:"Integers"},gt;function fi(n){return n?Zn[n]!==void 0:!1}function He(n){if(gt||(gt={},He("Void")),gt[n])return Array.from(gt[n]);let e=[];if(typeof n!="string"||!Zn[n]){if(!Array.isArray(n))throw Error(`Unknown domain literal ${n}`);if(!Ri.includes(n[0]))throw Error(`Unknown domain constructor ${n[0]}`);return n[0]==="FunctionOf"?He("Functions"):n[0]==="TupleOf"?He("Tuples"):n[0]==="ListOf"?He("Lists"):n[0]==="DictionaryOf"?He("Dictionaries"):n[0]==="OptArg"||n[0]==="VarArg"?He(n[1]):n[0]==="Literal"?["Anything"]:n[0]==="Union"?["Anything"]:n[0]==="Intersection"?["Anything"]:["Anything"]}if(typeof Zn[n]=="string")e=[Zn[n],...He(Zn[n])];else if(Array.isArray(Zn[n]))for(let i of Zn[n])e.push(i),e.push(...He(i));return gt[n]=new Set(e),e}function ia(){let n={};for(let e of Object.keys(Zn))n[e]={domain:"Domains",value:["Domain",e]};n.InvalidDomain={signature:{domain:["FunctionOf","Domains","Domains"],canonical:(e,i)=>e.domain(["InvalidDomain",i[0]])}};for(let e of["DictionaryOf","FunctionOf","ListOf","TupleOf"])n[e]={signature:{domain:["FunctionOf",["VarArg","Domains"],"Domains"],canonical:(i,t)=>i.domain([e,...t])}};for(let e of["OptArg","VarArg"])n[e]={signature:{domain:["FunctionOf","Domains","Domains"],canonical:(i,t)=>i.domain([e,t[0]])}};return n}var ua=he(De(),1);function pr(n){if(!n)return;let e=n.engine,i=[],t=n.ops?.length==3,r=n.ops[0].ops[0].ops,u=r?.length??0,o=null;if(!(t&&(o=n.ops[2].ops[0].ops,r?.length!=o?.length))){for(let s=0;s<u;s++){let a,l,f=null,d=null;l=r[s].canonical,r&&r[s].head==="Equal"&&(l=r[s].op1.canonical,f=r[s].op2.canonical),o&&(d=o[s].canonical),d&&f?a=Hn(e.tuple([l,f,d])):d?a=Hn(e.tuple([l,e.One,d])):f?a=Hn(e.tuple([l,f])):a=Hn(l),a&&i.push(a)}return i}}function Hn(n){if(!n)return;let e=n.engine,i=null,t=null,r=null;return n.head!=="Tuple"&&n.head!=="Triple"&&n.head!=="Pair"&&n.head!=="Single"?i=n:(i=n.ops[0]??null,t=n.ops[1]?.canonical??null,r=n.ops[2]?.canonical??null),i.head==="Hold"&&(i=i.op1),i.symbol&&(e.declare(i.symbol,{domain:"Integers"}),i.bind()),t&&t.isFinite&&(t=Le(e,t,"Integers")),r&&r.isFinite&&(r=Le(e,r,"Integers")),t&&r?e.tuple([i,t,r]):r?e.tuple([i,e.One,r]):t?e.tuple([i,t]):i}function Jn(n){let e=1,i=e+tr,t,r=!0;if(n&&(n.head==="Tuple"||n.head==="Triple"||n.head==="Pair"||n.head==="Single")){if(t=(n.op1.head==="Hold"?n.op1.op1.symbol:n.op1.symbol)??"Nothing",e=q(n.op2)??1,Number.isFinite(e)||(r=!1),n.op3.isNothing||n.op3.isInfinity)r=!1;else{let u=q(n.op3);u===null?r=!1:(i=u,Number.isFinite(i)||(r=!1))}!r&&Number.isFinite(e)&&(i=e+tr)}else n&&(t=(n.head==="Hold"?n.op1.symbol:n.symbol)??"Nothing",e=1,i=e+tr);return[t,e,i,r]}function Pi(n,e){return n.flatMap(i=>e.map(t=>[i,t]))}function gn(n,e){return Array.from({length:e-n+1},(i,t)=>n+t)}var sd={Add:["+",11],Negate:["-",14],Subtract:["-",11],Multiply:["*",12],Divide:["/",13],Equal:["===",8],NotEqual:["!==",8],LessEqual:["<=",9],GreaterEqual:[">=",9],Less:["<",9],Greater:[">",9],And:["&&",4],Or:["||",3],Not:["!",14]},ad={Abs:"Math.abs",Add:(n,e)=>n.length===1?e(n[0]):`(${n.map(i=>e(i)).join(" + ")})`,Arccos:"Math.acos",Arcosh:"Math.acosh",Arsin:"Math.asin",Arsinh:"Math.asinh",Arctan:"Math.atan",Artanh:"Math.atanh",Ceiling:"Math.ceil",Chop:"_SYS.chop",Cos:"Math.cos",Cosh:"Math.cosh",Exp:"Math.exp",Floor:"Math.floor",Gamma:"_SYS.gamma",GCD:"_SYS.gcd",LCM:"_SYS.lcm",Limit:(n,e)=>`_SYS.limit(${e(n[0])}, ${e(n[1])})`,Ln:"Math.log",List:(n,e)=>`[${n.map(i=>e(i)).join(", ")}]`,Log:(n,e)=>n.length===1?`Math.log(${e(n[0])})`:`(Math.log(${e(n[0])}) / Math.log(${e(n[1])}))`,LogGamma:"_SYS.lngamma",Lb:"Math.log2",Max:"Math.max",Min:"Math.min",Power:(n,e)=>{let i=n[0];if(i===null)throw new Error("Power: no argument");let t=E(n[1]);return t===.5?`Math.sqrt(${e(i)})`:t===1/3?`Math.cbrt(${e(i)})`:t===1?e(i):t===-1?`1 / (${e(i)})`:t===-.5?`1 / Math.sqrt(${e(i)})`:`Math.pow(${e(i)}, ${e(n[1])})`},Range:(n,e)=>{if(n.length===0)return"[]";if(n.length===1)return`Array.from({length: ${e(n[0])}}, (_, i) => i)`;let i=e(n[0]),t=e(n[1]),r=n[2]?e(n[2]):"1";if(i===null)throw new Error("Range: no start");if(t===null&&(t=i,i="1"),r==="0")throw new Error("Range: step cannot be zero");if(parseFloat(r)===1){let u=parseFloat(t),o=parseFloat(i);return u!==null&&o!==null?u-o<50?`[${Array.from({length:u-o+1},(s,a)=>o+a).join(", ")}]`:`Array.from({length: ${u-o+1} 
        }, (_, i) => ${i} + i)`:`Array.from({length: ${t} - ${i} + 1
      }, (_, i) => ${i} + i)`}return`Array.from({length: Math.floor((${t} - ${i}) / ${r}) + 1}, (_, i) => ${i} + i * ${r})`},Root:(n,e)=>{let i=n[0];if(i===null)throw new Error("Root: no argument");let t=n[1];return t===null?`Math.sqrt(${e(i)})`:`Math.pow(${e(i)}, 1 / (${e(t)}))`},Random:"Math.random",Round:"Math.round",Square:(n,e)=>{let i=n[0];if(i===null)throw new Error("Square: no argument");return`Math.pow(${e(i)}, 2)`},Sgn:"Math.sign",Sin:"Math.sin",Sinh:"Math.sinh",Sqrt:"Math.sqrt",Tan:"Math.tan",Tanh:"Math.tanh"},Ou=class extends Function{constructor(i){super("_SYS","_",`return ${i}`);this.sys={factorial:ur,gamma:ki,lngamma:ft,gcd:Tn,lcm:rr,chop:Si,limit:ui};return new Proxy(this,{apply:(t,r,u)=>super.apply(r,[this.sys,...u]),get:(t,r)=>r==="toString"?()=>i:t[r]})}};function ld(n,e){let i=ge(n,e);return new Ou(i)}function ta(n){let e=n.unknowns;return ld(n,{operators:i=>sd[i],functions:i=>ad[i],var:i=>{let t={Pi:"Math.PI",ExponentialE:"Math.E",NaN:"Number.NaN",ImaginaryUnit:"Number.NaN",Half:"0.5",MachineEpsilon:"Number.EPSILON",GoldenRatio:"((1 + Math.sqrt(5)) / 2)",CatalanConstant:"0.91596559417721901",EulerGamma:"0.57721566490153286"}[i];if(t!==void 0)return t;if(e.includes(i))return`_.${i}`},string:i=>JSON.stringify(i),number:i=>i.toString(),indent:0,ws:i=>i??""})}function ra(n,e,i,t){if(n==="Error")throw new Error("Error");if(n==="Sequence")return e.length===0?"":`(${e.map(u=>ge(u,t,i)).join(", ")})`;if(n==="Sum"||n==="Product")return fd(n,e,t);if(e.every(u=>!Mi(u))){let u=t.operators?.(n);if(Nn(n)&&e.length>2&&u){let o=[];for(let s=0;s<e.length-1;s++)o.push(ra(n,[e[s],e[s+1]],u[1],t));return`(${o.join(") && (")})`}if(u!==void 0){if(e===null)return"";let o;return e.length===1?o=`${u[0]}${ge(e[0],t,u[1])}`:o=e.map(s=>ge(s,t,u[1])).join(` ${u[0]} `),u[1]<i?`(${o})`:o}}if(n==="Function"){let u=e.slice(1).map(o=>o.symbol);return`((${u.join(", ")}) => ${ge(e[0].canonical,{...t,var:o=>u.includes(o)?o:t.var(o)})})`}if(n==="Declare")return`let ${e[0].symbol}`;if(n==="Assign")return`${e[0].symbol} = ${ge(e[1],t)}`;if(n==="Return")return`return ${ge(e[0],t)}`;if(n==="If"){if(e.length!==3)throw new Error("If: wrong number of arguments");return`((${ge(e[0],t)}) ? (${ge(e[1],t)}) : (${ge(e[2],t)}))`}if(n==="Block"){let u=[];for(let s of e)s.head==="Declare"&&u.push(s.ops[0].symbol);if(e.length===1&&u.length===0)return ge(e[0],t);let o=e.map(s=>ge(s,{...t,var:a=>u.includes(a)?a:t.var(a)}));return o[o.length-1]=`return ${o[o.length-1]}`,`(() => {${t.ws(`
`)}${o.join(`;${t.ws(`
`)}`)}${t.ws(`
`)}})()`}let r=t.functions?.(n);if(!r)throw new Error(`Unknown function ${n}`);if(typeof r=="function"){if(e.length===1&&le(e[0])){let u=Li();return`(${ge(e[0],t)}).map((${u}) => ${r(e[0].engine.box(u),o=>ge(o,t))})`}return r(e,u=>ge(u,t))}if(e===null)return`${r}()`;if(e.length===1&&le(e[0])){let u=Li();return`(${ge(e[0],t)}).map((${u}) => ${r}(${ge(e[0].engine.box(u),t)}))`}return`${r}(${e.map(u=>ge(u,t)).join(", ")})`}function ge(n,e,i=0){if(n===void 0)return"";if(!n.isValid)throw new Error("Invalid expression");let t=E(n);if(t!==null)return e.number(t);let r=n.symbol;if(r!==null)return e.var?.(r)??r;if(n.string!==null)return e.string(r);let o=n.keys;if(o!==null){let a=[];for(let l of o){let f=n.getKey(l);f&&a.push(`${l}: ${ge(f,e,0)}`)}return`{${a.join(", ")}}`}let s=n.head;return typeof s=="string"?ra(s,n.ops,i,e):""}function fd(n,e,i){if(e===null)throw new Error("Sum/Product: no arguments");if(!e[0])throw new Error("Sum/Product: no body");let[t,r,u,o]=Jn(e[1]),s=n==="Sum"?"+":"*";if(!t){let d=Li(),c=Li();return`${ge(e[0],i)}.reduce((${c}, ${d}) => ${c} ${s} ${d}, ${s==="+"?"0":"1"})`}let a=ge(e[0],{...i,var:d=>d===t?t:i.var(d)}),l=Li(),f=Li();return`(() => {
  let ${f} = ${s==="+"?"0":"1"};
  let ${t} = ${r};
  const _fn = () => ${a};
  while (${l} <= ${u}) {
    ${f} ${s}= _fn();
    ${l}++;
  }
  return ${f};
})()`}function Li(){return`_${Math.random().toString(36).substring(2)}`}var L=class{constructor(e,i){this.engine=e,i?.latex!==void 0&&(this._latex=i.latex)}valueOf(){return this.symbol==="True"?!0:this.symbol==="False"?!1:this.head&&typeof this.head=="string"&&["List","Set","Sequence","Tuple","Pair","Single","Triple"].includes(this.head)?this.ops?.map(e=>e.valueOf()):E(this)??this.string??this.symbol??JSON.stringify(this.json)}toString(){if(this.symbol)return this.symbol;if(this.string)return`"${this.string}"`;let e=this.numericValue;if(e!==null){if(typeof e=="number"||e instanceof y)return e.toString();if(H(e))return`(${e[0].toString()}/${e[1].toString()})`;if(K(e))return`(${e[0].toString()}/${e[1].toString()})`;if(e instanceof ua.Complex){let i=e.im===1?"":e.im===-1?"-":e.im.toString();return e.re===0?i+"i":e.im<0?`${e.re.toString()}${i}i`:`(${e.re.toString()}+${i}i)`}}return this.head&&typeof this.head=="string"?this.head==="List"?`[${this.ops?.map(i=>i.toString())??""}]`:this.head==="Domain"?JSON.stringify(this.json):`${this.head}(${this.ops?.map(i=>i.toString()).join(", ")??""})`:JSON.stringify(this.json)}print(){let e=console.log;e?.(this.toString())}[Symbol.toPrimitive](e){if(e==="number"){let i=this.valueOf();return typeof i=="number"?i:null}return this.toString()}toJSON(){return this.json}get rawJson(){return this.json}get scope(){return null}is(e){return e==null?!1:this.isSame(this.engine.box(e))}get canonical(){return this}get latex(){return this._latex??this.engine.serialize(this)}set latex(e){this._latex=e}get symbol(){return null}get isNothing(){return!1}get string(){return null}getSubexpressions(e){return Ru(this,e)}get subexpressions(){return this.getSubexpressions("")}get symbols(){let e=new Set;return hr(this,e),Array.from(e)}get unknowns(){let e=new Set;return gr(this,e),Array.from(e)}get freeVariables(){let e=new Set;return Dr(this,e),Array.from(e)}get errors(){return this.getSubexpressions("Error")}get ops(){return null}get nops(){return 0}get op1(){return this.engine.Nothing}get op2(){return this.engine.Nothing}get op3(){return this.engine.Nothing}get isValid(){return!0}get isPure(){return!1}get isExact(){return!1}get isConstant(){return!1}get isNaN(){}get isZero(){}get isNotZero(){}get isOne(){}get isNegativeOne(){}get isInfinity(){}get isFinite(){}get isEven(){}get isOdd(){}get isPrime(){}get isComposite(){}get numericValue(){return null}get sgn(){return null}get shape(){return[]}get rank(){return 0}subs(e,i){return i?.canonical?this.canonical:this}solve(e){return null}replace(e){return null}has(e){return!1}isLess(e){}isLessEqual(e){}isGreater(e){}isGreaterEqual(e){}get isPositive(){}get isNonNegative(){}get isNegative(){}get isNonPositive(){}isCompatible(e,i){return!1}get description(){if(this.baseDefinition&&this.baseDefinition.description)return typeof this.baseDefinition.description=="string"?[this.baseDefinition.description]:this.baseDefinition.description}get url(){return this.baseDefinition?.url??void 0}get wikidata(){return this.baseDefinition?.wikidata??void 0}get complexity(){}get baseDefinition(){}get symbolDefinition(){}get functionDefinition(){}infer(e){return!1}bind(){}reset(){}get keys(){return null}get keysCount(){return 0}getKey(e){}hasKey(e){return!1}get value(){return this.N().valueOf()}set value(e){throw new Error(`Can't change the value of \\(${this.latex}\\)`)}get domain(){}set domain(e){throw new Error(`Can't change the domain of \\(${this.latex}\\)`)}get isNumber(){}get isInteger(){}get isRational(){}get isAlgebraic(){return!1}get isReal(){}get isExtendedReal(){}get isComplex(){}get isImaginary(){}get isExtendedComplex(){}simplify(e){return this}evaluate(e){return this.simplify()}N(e){return this.evaluate({numericMode:!0})}compile(e="javascript",i){if(e!=="javascript")return;i??(i={optimize:["simplify"]});let t=this;return i.optimize.includes("simplify")&&(t=t.simplify()),i.optimize.includes("evaluate")&&(t=t.evaluate()),ta(t)}};function Dr(n,e){if(n.head,n.symbol){let i=n.engine.lookupSymbol(n.symbol);if(i&&i.value!==void 0)return;let t=n.engine.lookupFunction(n.symbol);if(t&&(t.signature.evaluate||t.signature.N))return;e.add(n.symbol);return}if(n.head&&typeof n.head!="string"&&Dr(n.head,e),n.ops)for(let i of n.ops)Dr(i,e);if(n.keys)for(let i of n.keys)Dr(n.getKey(i),e)}function hr(n,e){if(n.symbol){e.add(n.symbol);return}if(n.head&&typeof n.head!="string"&&hr(n.head,e),n.ops)for(let i of n.ops)hr(i,e);if(n.keys)for(let i of n.keys)hr(n.getKey(i),e)}function gr(n,e){if(n.symbol){let i=n.symbol;if(i==="Unknown"||i==="Undefined"||i==="Nothing")return;let t=n.engine.lookupSymbol(i);if(t&&t.value!==void 0)return;let r=n.engine.lookupFunction(i);if(r&&(r.signature.evaluate||r.signature.N))return;e.add(i);return}if(n.head&&typeof n.head!="string"&&gr(n.head,e),n.ops)for(let i of n.ops)gr(i,e);if(n.keys)for(let i of n.keys)gr(n.getKey(i),e)}function Ru(n,e){let i=!e||n.head===e?[n]:[];if(n.ops)for(let t of n.ops)i.push(...Ru(t,e));else if(n.keys)for(let t of n.keys)i.push(...Ru(n.getKey(t),e));return i}function oa(n){let e=[],i=(t,r=[])=>{if(t.length===0)e.push(r);else for(let u=0;u<t.length;u++){let o=t.slice(),s=o.splice(u,1);i(o.slice(),r.concat(s))}};return i(n),e}var qe=he(De(),1);function Pu(n,e){for(n.isInteger()&&e.isInteger();!e.isZero();)[n,e]=[e,n.modulo(e)];return n.abs()}function aa(n,e){return n.mul(e).div(Pu(n,e))}function Lu(n,e){if(!e.isInteger()||e.isNegative())return n._BIGNUM_NAN;if(e.lessThan(10))return n.bignum([1,1,2,6,24,120,720,5040,40320,362880,3628800][e.toNumber()]);if(e.gt(Number.MAX_SAFE_INTEGER)){let u=n._BIGNUM_ONE,o=n._BIGNUM_TWO;for(;o.lessThan(e);)u=u.mul(o),o=o.add(1);return u}if(e.modulo(2).eq(1))return e.times(Lu(n,e.minus(1)));let i=e.toNumber(),t=e,r=e;for(;i>2;)i-=2,t=t.add(i),r=r.mul(t);return r}function la(n,e){if(!e.isInteger()||e.isNegative())return n._BIGNUM_NAN;if(e.lessThan(1))return n._BIGNUM_ONE;let i=e;for(;e.greaterThan(2);)e=e.minus(2),i=i.mul(e);return i}var sa=7;function qu(n,e){if(e.isNegative())return n._BIGNUM_NAN;let i=n.cache("gamma-p-ln",()=>["0.99999999999999709182","57.156235665862923517","-59.597960355475491248","14.136097974741747174","-0.49191381609762019978","0.33994649984811888699e-4","0.46523628927048575665e-4","-0.98374475304879564677e-4","0.15808870322491248884e-3","-0.21026444172410488319e-3","0.2174396181152126432e-3","-0.16431810653676389022e-3","0.84418223983852743293e-4","-0.2619083840158140867e-4","0.36899182659531622704e-5"].map(o=>n.bignum(o))),t=i[0];for(let o=i.length-1;o>0;--o)t=t.add(i[o].div(e.add(o)));let r=n.cache("gamma-g-ln",()=>n.bignum(607).div(128)),u=e.add(r).add(n._BIGNUM_HALF);return n._BIGNUM_NEGATIVE_ONE.acos().mul(n._BIGNUM_TWO).log().mul(n._BIGNUM_HALF).add(u.log().mul(e.add(n._BIGNUM_HALF)).minus(u).add(t.log()).minus(e.log()))}function Vu(n,e){if(e.lessThan(n._BIGNUM_HALF)){let u=n._BIGNUM_NEGATIVE_ONE.acos();return u.div(u.mul(e).sin().mul(Vu(n,n._BIGNUM_ONE.sub(e))))}if(e.greaterThan(100))return qu(n,e).exp();e=e.sub(1);let i=n.cache("lanczos-7-c",()=>["0.99999999999980993227684700473478","676.520368121885098567009190444019","-1259.13921672240287047156078755283","771.3234287776530788486528258894","-176.61502916214059906584551354","12.507343278686904814458936853","-0.13857109526572011689554707","9.984369578019570859563e-6","1.50563273514931155834e-7"].map(u=>n.bignum(u))),t=i[0];for(let u=1;u<sa+2;u++)t=t.add(i[u].div(e.add(u)));let r=e.add(sa).add(n._BIGNUM_HALF);return n._BIGNUM_NEGATIVE_ONE.acos().times(n._BIGNUM_TWO).sqrt().mul(t.mul(r.neg().exp()).mul(r.pow(e.add(n._BIGNUM_HALF))))}function xr(n){return n.isFinite()?n.d.length>3||n.d.length===3&&n.d[0]>=90?!1:(n.precision()<=16,n.e<308&&n.e>-306):!0}var dd=0x3ffffffffffe5;function Wn(n){if(!Number.isInteger(n)||!Number.isFinite(n)||Number.isNaN(n)||n<=1)return!1;if(n<=qs)return vu.has(n);for(let e of vu)if(n%e===0)return!1;return n>=dd?md(n,30)?void 0:!1:n===cd(n)}function cd(n){if(n===1)return 1;if(n%2===0)return 2;if(n%3===0)return 3;if(n%5===0)return 5;let e=Math.floor(Math.sqrt(n)),i=7;for(;i<=e;){if(n%i===0)return i;if(n%(i+4)===0)return i+4;if(n%(i+6)===0)return i+6;if(n%(i+10)===0)return i+10;if(n%(i+12)===0)return i+12;if(n%(i+16)===0)return i+16;if(n%(i+22)===0)return i+22;if(n%(i+24)===0)return i+24;i+=30}return n}function md(n,e){let i=0,t=n-1;for(;t%2===0;)t/=2,++i;e:do{let r=Math.pow(2+Math.floor(Math.random()*(n-3)),t)%n;if(!(r===1||r===n-1)){for(let u=i-1;u--;){if(r=r*r%n,r===1)return!1;if(r===n-1)continue e}return!1}}while(--e);return!0}var Xu=he(De(),1);var Qu=he(De(),1);var Hu=he(De(),1);function Et(n){if(n.head==="Power"&&n.op2.numericValue!==null){let e=q(n.op2);return e!==null&&e>0?e:1}if(n.head==="Multiply"){let e=1;for(let i of n.ops){let t=Et(i);t>1&&(e=e+t)}return e}return 1}function $u(n){if(n.head==="Power"&&n.op2.numericValue!==null){let e=q(n.op2);return e!==null&&e>0?e:1}if(n.head==="Multiply"){let e=1;for(let i of n.ops)e=Math.max(e,Et(i));return e}return 1}function xt(n){return n.symbol?n.symbol:n.ops?(typeof n.head=="string"?n.head:xt(n.head))+'"'+n.ops.map(i=>xt(i)).filter(i=>i.length>0).join('"'):""}var ba=he(De(),1);var fa=[];function zu(n){if(n.head==="N"&&typeof n.op1.head=="string"){let u={Integrate:"NIntegrate",Limit:"NLimit"}[n.op1.head];u&&(n=n.engine._fn(u,n.op1.ops))}if(n.head==="Function")return n;let e=n.unknowns;e.includes("_")&&(n=n.subs({_:"_1"}),e=n.unknowns);let i=0;for(let u of e)if(u.startsWith("_")){let o=Number(u.slice(1));o>i&&(i=o)}let t=n.engine;return t._fn("Function",[n,...Array.from({length:i},(u,o)=>t.symbol(`_${o+1}`))])}function Uu(n){let e=n.engine,i=n.symbol?e.lookupFunction(n.symbol):void 0;if(i){let s=i.signature.N??i.signature.evaluate;return s?a=>s(e,a)??e._fn(n,a):a=>e._fn(n,a)}let t=zu(n);if(!t)return;t.head;let r=t.ops.slice(1).map(s=>s.symbol??"Nothing");e.pushScope();for(let s of r)e.declare(s,{inferred:!0,domain:void 0});let u=t.op1.canonical;u.bind(),e.popScope();let o=u.scope;return r.length===0?()=>{let s=e.swapScope(o);e.resetContext();let a=u.N()??u.evaluate();return e.swapScope(s),a}:s=>{if(e.strict&&(s=Be(e,s,r.length),!s.every(d=>d.isValid)))return;s=s.map(d=>d.evaluate());let a=e.swapScope(o);e.resetContext();let l=0;for(let d of r)e.assign(d,s[l++]);let f=u.N()??u.evaluate();if(e.swapScope(a),!!f.isValid)return f}}function di(n,e){return Uu(n)?.(e)??n.engine._fn(n,e)}function ci(n){return Uu(n)??(e=>n.engine._fn(n.N(),e).N())}function Gu(n){let e=n.engine,i=Uu(n);return i?t=>i([e.number(t)])?.value??NaN:t=>e._fn(n.evaluate(),[e.number(t)]).value}function ju(n){let e=n.match(/(.+)\((.*)\)/);if(!e)return[n,void 0];let i=e[1],t=e[2].split(",").map(r=>r.trim());return[i,t]}var qi=he(De(),1);function wn(n,e,i,t){if(i.symbol==="ComplexInfinity")return n.NaN;if(i.isZero)return n.One;if(i.isOne)return e;if(i.isNegativeOne)return n.inv(e);if(i.numericValue!==null&&e.numericValue!==null){if(e.isOne)return n.One;if(e.isZero){if(i.isPositive)return n.Zero;if(i.isNegative)return n.ComplexInfinity}if(i.isNegativeOne)return n.inv(e);let r=E(i);if(r===.5||r===-.5){if(J(e)){let o=n._fn("Sqrt",[e],t);return r>0?o:n._fn("Divide",[n.One,o],t)}return n._fn("Power",[e,i],t)}if(e.isInfinity){if(i.numericValue instanceof qi.Complex){let u=i.numericValue.re;if(u===0)return n.NaN;if(u<0)return n.Zero;if(u>0)return n.ComplexInfinity}if(e.isNegative){if(i.isInfinity)return n.NaN}else if(e.isPositive){if(i.isNegativeOne)return n.Zero;if(i.isInfinity)return i.isNegative?n.Zero:n.PositiveInfinity}}if(i.isInfinity&&(e.isOne||e.isNegativeOne))return n.NaN}if(e.head==="Power"&&e.op1.isReal){let r=q(i);if(r!==null){let u=q(e.op2);if(u!==null)return n.pow(e.op1,n.number(r*u))}if(e.op1.isNonNegative){let u=J(i);if(u){let o=J(e.op2);if(o)return n.pow(e.op1,n.number(Y(u,o)))}}}return n._fn("Power",[e,i],t)}function da(n,e,i){if(e.numericValue===null||i.numericValue===null)return;if(e.numericValue instanceof qi.Complex)return i.numericValue instanceof qi.Complex?n.number(e.numericValue.pow(i.numericValue)):n.number(e.numericValue.pow(E(i)??NaN));if(i.numericValue instanceof qi.Complex){let o=E(e)??null;return o!==null?n.number(n.complex(o).pow(i.numericValue)):void 0}let t=pd(i);if(P(n)||e.numericValue instanceof y||i.numericValue instanceof y){let o=Ge(e),s=Ge(i);if(!o||!s)return;if(t===2)return o.isNeg()?ae(n)?n.number(n.complex(0,o.neg().sqrt().toNumber())):n.NaN:n.number(o.sqrt());if(!s.isInteger()&&o.isNeg()){if(!ae(n))return n.NaN;let a=n.complex(o.toNumber()),l=n.complex(s.toNumber());return n.number(a.pow(l))}return n.number(o.pow(s))}let r=E(i)??NaN,u=E(e)??NaN;if(t===2)return u<0?ae(n)?n.mul(n.I,n.number(Math.sqrt(-u))):n.NaN:n.number(Math.sqrt(u));if(!Number.isInteger(r)&&u<0){if(!ae(n))return n.NaN;let o=n.complex(u),s=n.complex(r);return n.number(o.pow(s))}return n.number(Math.pow(u,r))}function mi(n,e,i,t){if(t!=="simplify"&&e.symbol==="ExponentialE"&&i instanceof qi.Complex){let r=i.im,u=i.re,o;if(u===0)o=this.number(this.complex(Math.cos(r),Math.sin(r)));else{if(r===0)return this.number(Math.exp(u));{let s=Math.exp(u);o=this.number(this.complex(s*Math.cos(r),s*Math.sin(r)))}}return t==="N"?o.N():o}if(e.head==="Multiply"){let r=P(n)?[BigInt(1),BigInt(1)]:[1,1],u=r,o=[];for(let s of e.ops){let a=J(s);if(a)r=Y(r,a);else{let l=Zu(s);l?u=Y(u,l):o.push(s)}}if(!te(r)||!te(u)){let s=mi(n,n.number(r),i,t),a=mi(n,n.number(u),n.div(i,n.number(2)),t),l=n.mul(...o),f=mi(n,l,i,t)??n._fn("Power",[l,i]);if(s&&a&&f)return n.mul(s,a,f)}}if(e.head==="Power"){if(q(e.op2)===-1&&q(i)===-1)return e.op1;let r=J(e.op2),u=J(i);if(r&&u){let o=Y(r,u);return n.pow(e.op1,o)}if(t==="N"){let o=E(e.op2),s=E(i);if(o!==null&&s!==null){let a=o*s;return a===0?n.One:a===1?e.op1:n.pow(e.op1,a)}}}if(t!=="N"&&e.numericValue!==null&&e.isInteger){if(e.isOne)return n.One;if(q(i))return da(n,e,i);let u=J(i);if(u){let[o,s]=[Re(u),Dn(u)];if((o===1||o===-1)&&(s===2||s===3)){if(P(n)||e.numericValue instanceof y){let a=pt(e);if(s%2===0&&a<0&&!ae(n))return n.NaN;let l=a<0?s%2===0?n.I:n.NegativeOne:n.One,[f,d]=ai(a>0?a:-a,s);if(d===BigInt(1)&&f===BigInt(1))return l;if(f!==BigInt(1))return d===BigInt(1)?n.mul(l,n.number(o>=0?f:[BigInt(1),f])):n.mul(l,n.number(f),n.pow(n.number(d),i))}else if(typeof e.numericValue=="number"){if(e.numericValue<0&&s%2===0&&!ae(n))return n.NaN;let[a,l]=Gn(Math.abs(e.numericValue),s),f=e.numericValue<0?s%2===0?n.I:n.NegativeOne:n.One;if(l===1&&a===1)return f;if(a!==1)return l===1?n.mul(f,n.number(o>=0?a:[1,a])):n.mul(f,n.number(a),n.pow(n.number(l),i))}}return e.isNegative?ae?n.mul(n.I,n.box(["Sqrt",n.neg(e)])):n.NaN:void 0}}if(t!=="N"&&U(e.numericValue)){let[r,u]=e.numericValue;return n.div(n.pow(n.number(r),i),n.pow(n.number(u),i))}if(t!=="simplify"&&e.numericValue!==null&&i.numericValue!==null)return da(n,e,i)}function Vi(n,e,i){if(e.isOne)return n.One;if(e.isZero)return n.Zero;if(e.isNegativeOne)return ae(n)?n.I:n.NaN;if(e.isNegative&&!ae(n))return n.NaN;let t=J(e);if(i==="N"||i==="evaluate"&&!t)return ne(e,u=>u<0?n.complex(u).sqrt():Math.sqrt(u),u=>u.isNeg()?n.complex(u.toNumber()).sqrt():u.sqrt(),u=>u.sqrt());let r=q(e);if(r!==null){let[u,o]=Gn(Math.abs(r),2);return u===1?n._fn("Sqrt",[e]):r<0?o===1?n.number(n.complex(0,u)):n.mul(n.number(n.complex(0,u)),n.sqrt(n.number(o))):o===1?n.number(u):n.mul(n.number(u),n.sqrt(n.number(o)))}if(t){if(H(t)&&!P(n)){let[u,o]=t;if(Math.abs(u)<Number.MAX_SAFE_INTEGER&&o<Number.MAX_SAFE_INTEGER){let[s,a]=Gn(Math.abs(u),2),[l,f]=Gn(o,2);if(u<0)return n.mul(n.number([s,l]),n.sqrt(n.number([a,f])),n.I);let d=n.number([s,l]);return d.isOne?n._fn("Sqrt",[n.number([a,f])]):n.mul(d,n.sqrt(n.number([a,f])))}}if(K(t)||P(n)){let u=R(t[0]),[o,s]=ai(u>0?u:-u,2),[a,l]=ai(R(t[1]),2);if(u<0)return n.mul(n.number([o,a]),n.sqrt(n.number([s,l])),n.I);let f=n.number([o,a]);return f.isOne?n._fn("Sqrt",[n.number([s,l])]):n.mul(f,n.sqrt(n.number([s,l])))}}}function pd(n){if(typeof n.numericValue=="number"){let t=1/n.numericValue;return Number.isInteger(t)?t:null}if(n.numericValue instanceof y){let t=n.engine._BIGNUM_ONE.div(n.numericValue);return t.isInt()?t.toNumber():null}if(!U(n.numericValue))return null;let[e,i]=[Re(n.numericValue),Dn(n.numericValue)];return e!==1&&e!==-1?null:e*i}function $i(n){return n.head==="Sqrt"||n.head==="Power"&&E(n.op2)===.5}function Zu(n){return $i(n)?J(n.op1)??null:null}var ca=he(De(),1);function ma(n){let e=n.numericValue;return e===null?null:(typeof e=="number"?e=-e:e instanceof y||e instanceof ca.Complex?e=e.neg():Array.isArray(e)&&(e=Ce(e)),n.engine.number(e))}function bt(n){let e=-1;for(;n.head==="Negate";)n=n.op1,e=-e;if(e===1)return n;if(n.numericValue!==null)return ma(n);let i=n.engine;if(n.head==="Subtract")return i.add(n.op2,bt(n.op1));if(n.head==="Add"){let t=n.ops.map(r=>bt(r));return i.add(...t)}return n.head==="Multiply"?Dd(i,n.ops):n.head==="Divide"?i.div(bt(n.op1),n.op2):i._fn("Negate",[n])}function ce(n){let e=-1;for(;n.head==="Negate";)n=n.op1,e=-e;if(e===1)return n;let i=n.engine;if(n.head==="Add"){let t=n.ops.map(r=>ce(r));return Mn(i,re(ue(t),"Add"))}return n.numericValue!==null?ma(n):i._fn("Negate",[n])}function Dd(n,e){let i=[],t=!1;for(let r of e)!t&&r.head==="Negate"?(t=!0,i.push(r.op1)):i.push(r);if(t)return n.mul(...i);i=[];for(let r of e)t||r.numericValue===null||!r.isInteger?i.push(r):(t=!0,i.push(ce(r)));if(t)return n.mul(...i);i=[];for(let r of e)t||r.numericValue===null||!r.isNumber?i.push(r):(t=!0,i.push(ce(r)));return t?n.mul(...i):n._fn("Negate",[n._fn("Multiply",e)])}function Er(n,e,i="simplify"){return ce(e)}var zi=he(De(),1);function Je(n){n.isCanonical;let e=n.engine;if(n.head==="Multiply"){let r=[],u=[1,1];for(let o of n.ops){let s=J(o);s?u=Y(u,s):r.push(o)}return te(u)?[u,n]:[u,e.mul(...r)]}if(n.head==="Divide"){let[r,u]=Je(n.op1),[o,s]=Je(n.op2),a=Y(r,In(o));return s.isOne?[a,u]:te(a)?[a,n]:[a,e.div(u,s)]}if(n.head==="Power"){if(n.op2.numericValue===null)return[[1,1],n];let[r,u]=Je(n.op1);if(te(r))return[r,n];let o=E(n.op2);return typeof o=="number"&&Number.isInteger(o)?[sr(r,o),e.pow(u,n.op2)]:[[1,1],n]}if(n.head==="Sqrt"){let[r,u]=Je(n.op1),o=Hs(r);return o?[o,e.sqrt(u)]:[[1,1],n]}if(n.head,n.head==="Negate"){let[r,u]=Je(n.op1);return[Ce(r),u]}let i=n.numericValue;if(i instanceof zi.default&&i.re<0)return[[-1,1],e.number(e.complex(-i.re,-i.im))];let t=J(n);return t?[t,e.One]:[[1,1],n]}function Da(n,e){if(te(e))return n;if(Ze(e))return 0;if(n===null)return null;if(wi(e))return typeof n=="number"?-n:n instanceof Ue||n instanceof zi.default?n.neg():Ce(n);if(U(n))return Y(n,e);if(K(e)){let[i,t]=e;if(typeof n=="number")return Number.isInteger(n)?[BigInt(n)*i,BigInt(n)*t]:new Ue(n).mul(i.toString()).div(t.toString());if(n instanceof Ue){let[r,u]=[new Ue(i.toString()),new Ue(t.toString())];return n.isInteger()?t===BigInt(1)?n.mul(r):[BigInt(n.mul(r).toString()),t]:n.mul(r).div(u)}if(n instanceof zi.default)return n.mul(Number(i)).div(Number(t))}else{let[i,t]=e;if(typeof n=="number")return Number.isInteger(n)?[n*i,t]:n*i/t;if(n instanceof Ue)return n.isInteger()?[BigInt(n.mul(i).toString()),BigInt(t)]:n.mul(i).div(t);if(n instanceof zi.default)return n.mul(i).div(t)}return null}function pi(n){let e=n.engine,i=n.head;if(Nn(i))return e.function(i,[pi(n.ops[0]),pi(n.ops[1])]);if(i==="Divide")return e.div(n.ops[0],n.ops[1]);if(i==="Add"){let[t,r]=n.ops.reduce((u,o)=>(o.head==="Divide"?(u[0].push(o.ops[0]),u[1].push(o.ops[1])):u[0].push(o),u),[[],[]]);return e.div(e.add(...t),e.add(...r))}return i==="Negate"?e.neg(pi(n.ops[0])):n}function pa(n,e){let i=[],t=n.engine;for(let u of n.factors){let o=e.find(u.factor);if(o!==-1)if(u.exponent.isSame(e.factors[o].exponent))i.push(u);else{let s=E(u.exponent),a=E(e.factors[o].exponent);if(s!==null&&a!==null){if(s>0&&a>0){let l=Math.min(s,a);i.push({factor:u.factor,exponent:t.number(l)})}else if(s<0&&a<0){let l=Math.max(s,a);i.push({factor:u.factor,exponent:t.number(l)})}}}}let r=n.integerCoefficient();if(r!==null){let u=e.integerCoefficient();u!==null&&i.push({factor:t.number(Tn(r,u)),exponent:t.One})}return i.length===0?t.One:t.mul(...i.map(u=>t.pow(u.factor,u.exponent)))}function ha(n){let e=n.head;if(Nn(e)){let t=new Yn(n.op1),r=new Yn(n.op2);t.reduceExactNumbers(),r.reduceExactNumbers();let u=pa(t,r);return u.isOne||(t.div(u),r.div(u)),n.engine.function(e,[t.asExpression(),r.asExpression()])}if(e==="Add"){let t=null;for(let r of n.ops)if(!t)t=new Yn(r),t.reduceExactNumbers();else{let u=new Yn(r);u.reduceExactNumbers(),t=new Yn(pa(t,u)),t.reduceExactNumbers()}return t?.asExpression()??n.engine.One}let i=new Yn(pi(n));return i.reduceExactNumbers(),i.asExpression()}var Yn=class{constructor(e){this.factors=[];this.hasNaN=!1;this.hasZero=!1;this.hasInfinity=!1;this.sign=1;this.engine=e.engine,this.mul(pi(e))}div(e){if(!e.isOne){if(e.isNegativeOne){this.sign*=-1;return}this.mul(e,this.engine.NegativeOne)}}mul(e,i){if(i??(i=e.engine.One),e.head==="Negate"&&(this.sign*=-1,e=e.ops[0]),e.head==="Divide"){this.mul(e.ops[0],i),this.mul(e.ops[1],this.engine.neg(i));return}if(e.head==="Multiply"){for(let r of e.ops)this.mul(r,i);return}if(e.head==="Power"){this.mul(e.ops[0],this.engine.mul(e.ops[1],i));return}if(e.head==="Sqrt"){this.mul(e.ops[0],this.engine.mul(this.engine.Half,i));return}if(e.isNegative&&(this.sign*=-1,e=this.engine.neg(e)),i.isZero||e.isOne)return;if(e.isNaN){this.hasNaN=!0;return}if(e.isZero){i.isNonNegative?this.hasZero=!0:this.hasNaN=!0;return}if(e.isInfinity&&i.isNonNegative){i.isNonNegative?this.hasInfinity=!0:this.hasNaN=!0;return}let t=this.find(e);t===-1?this.factors.push({factor:e,exponent:i}):this.factors[t].exponent=this.engine.add(this.factors[t].exponent,i)}find(e){return this.factors.findIndex(i=>i.factor.isSame(e))}has(e){return this.find(e)!==-1}reduceNumbers(){let e=this.factors;this.factors=[];let i=this.engine,t=i.One;for(let r of e){let u=r.factor.N();u.numericValue!==null?t=i.mul(t,i.pow(u,r.exponent)):this.factors.push(r)}t.isOne||this.factors.push({factor:t,exponent:i.One})}reduceExactNumbers(){let e=this.engine;for(let l of this.factors){let f=l.factor;if(f.numericValue!==null&&!f.isExact)return this.reduceNumbers()}let i=this.factors;this.factors=[];let t=[1,1],r=1,u=0,o=[1,1];for(let l of i){let f=E(l.exponent);if(f===null){this.factors.push(l);continue}if(Number.isInteger(2*f)){let m=J(l.factor);if(m){o=Y(o,sr(m,2*f));continue}}let d=J(l.factor);if(d){t=Y(t,sr(d,f));continue}let c=l.factor.numericValue;if(c!==null&&c instanceof zi.default&&Number.isInteger(c.re)&&Number.isInteger(c.im)&&Number.isInteger(f)){c=c.pow(f),t=Y(t,[c.re,1]),c.im!==0&&(r*=c.im,u+=f);continue}this.factors.push(l)}let[s,a]=Ws(o);t=Y(t,s),u!==0&&(u%2===0?t=Y(t,[r,1]):js(t)?(this.factors.push({factor:e.number(e.complex(Re(t),r)),exponent:e.One}),t=[1,1]):this.factors.push({factor:e.number(e.complex(0,r)),exponent:e.One})),te(t)||this.factors.push({factor:e.number(t),exponent:e.One}),te(a)||this.factors.push({factor:e.sqrt(e.number(a)),exponent:e.One})}integerCoefficient(){let e=null;for(let i of this.factors){let t=E(i.factor);if(t!==null&&Number.isInteger(t)){let r=E(i.exponent);r!==null&&(e=(e??1)*Math.pow(t,r));continue}}return e}asExpression(){let e=this.engine;if(this.factors.length===0)return e.One;if(this.hasNaN)return e.NaN;if(this.hasInfinity)return this.sign>0?e.PositiveInfinity:e.NegativeInfinity;if(this.hasZero)return e.Zero;if(this.factors.length===1){let{factor:u,exponent:o}=this.factors[0];return e.pow(u,o)}let i=this.factors.filter(u=>u.exponent.isPositive&&!u.factor.isOne).map(u=>e.pow(u.factor,u.exponent)),t;i.length===0?t=this.sign>0?e.One:e.NegativeOne:i.length===1?this.sign<0?t=e.neg(i[0]):t=i[0]:(t=e._fn("Multiply",i),this.sign<0&&(t=e.neg(t)));let r=this.factors.filter(u=>u.exponent.isNegative&&!u.factor.isOne).map(u=>e.pow(u.factor,e.neg(u.exponent)));return r.length===0?t:r.length===1?e.div(t,r[0]):e.div(t,e._fn("Multiply",r))}};function un(n,e,i){if(!e.isValid||!i.isValid)return n._fn("Divide",[e,i]);if(e.head==="Negate"&&i.head==="Negate"&&(e=e.op1,i=i.op1),e.numericValue!==null&&i.numericValue!==null){if(i.isOne)return e;if(i.isNegativeOne)return n.neg(e);if(e.isOne)return n.inv(i);if(e.isNegativeOne)return n.neg(n.inv(i));let m=J(e),D=J(i);if(m&&D&&!Ze(D))return n.number(Y(m,In(D)))}if(e.head==="Divide"&&i.head==="Divide")return un(n,n.mul(e.op1,i.op2),n.mul(e.op2,i.op1));if(e.head==="Divide")return un(n,e.op1,n.mul(e.op2,i));if(i.head==="Divide")return un(n,n.mul(e,i.op2),i.op1);let t=e.numericValue;if(t!==null){if(H(t)){let[m,D]=t;return un(n,n.number(m),n.mul(n.number(D),i))}if(K(t)){let[m,D]=t;return un(n,n.number(m),n.mul(n.number(D),i))}}let r=i.numericValue;if(r!==null){if(H(r)){let[m,D]=r;return un(n,n.mul(e,n.number(D)),n.number(m))}if(K(r)){let[m,D]=r;return un(n,n.mul(e,n.number(D)),n.number(m))}}let[u,o]=Je(e),[s,a]=Je(i);if(!te(u)||!te(s)){let[m,D]=Zs(u,s),[h,g]=[n.mul(n.number(m),o),n.mul(n.number(D),a)];return g.isNegative&&(g=n.neg(g),h=n.neg(h)),g.head==="Negate"&&(g=g.op1,h=n.neg(h)),h.isZero?n.Zero:g.isOne?h:n._fn("Divide",[h,g])}let[l,f]=ku(e),[d,c]=ku(i);return f=f.canonical,c=c.canonical,c.numericValue!==null&&c.isOne?l*d<0?ce(f):f:l*d>0?n._fn("Divide",[f,c]):f.numericValue?n._fn("Divide",[ce(f),c]):ce(n._fn("Divide",[f,c]))}function br(n,e,i){if(e.numericValue!==null&&i.numericValue!==null){let t=J(e),r=J(i);if(t&&r&&!Ze(r))return n.number(Y(t,In(r)))}return new On(n,[e,n.inv(i)]).asRationalExpression()}function yr(n,e,i){let t=br(n,e,i);return t?.head==="Divide"&&(!t.op1.isExact||!t.op2.isExact)&&(t=jn(e,i,(r,u)=>r/u,(r,u)=>r.div(u),(r,u)=>r.div(u))??t),t!==void 0?t:n._fn("Divide",[e,i])}function yt(n,e){if(e.every(o=>o.isCanonical),e.length===0)return n.One;if(e.length===1)return e[0];let i=[],t=1,r,u=0;for(let o of e)if(!o.isOne){if(o.isNegativeOne){t=-t;continue}if(o.head==="Negate"){t=-t,i.push(o.op1);continue}if(r===void 0&&typeof o.numericValue=="number"){r=o.numericValue,r<0&&(t=-t,r=-r);continue}if(o.numericValue!==null&&o.isNegative){t=-t,i.push(n.neg(o));continue}if(o.symbol==="ImaginaryUnit"){u++;continue}i.push(o)}return u>0&&(u%2===0?t=-t:(i.push(n.number(n.complex(0,t*(r??1)))),t=1,r=void 0)),typeof r=="number"&&(i.push(n.number(t*r)),t=1),t<0?i.length===0?n.NegativeOne:i.length===1?n.neg(i[0]):n.neg(n._fn("Multiply",i.sort(on))):i.length===0?n.One:i.length===1?i[0]:n._fn("Multiply",i.sort(on))}function ga(n,e){e.every(t=>t.head!=="Multiply");let i=new On(n);for(let t of e){if(t=t.simplify(),t.isNaN||t.symbol==="Undefined")return n.NaN;i.addTerm(t)}return i.asExpression()}function Ft(n,e,i="evaluate"){if(e.length===1)return e[0];if(i==="N"&&(e=e.map(t=>t.N()),(n.numericMode==="machine"||n.numericMode==="auto")&&e.every(t=>typeof t.numericValue=="number"))){let t=1;for(let r of e)t*=r.numericValue;return n.number(t)}for(let t of e){if(t.isNaN||t.symbol==="Undefined")return n.NaN;t.numericValue!==null&&!t.isExact&&(i="N")}return e.every(t=>t.head!=="Multiply"),i==="N"?e=e.map(t=>t.N()):e=e.map(t=>t.evaluate()),new On(n,e).asExpression(i)}function xa(n,e,i){n.pushScope(),e??(e=n.error("missing"));var t=void 0;if(i&&i.ops&&i.ops[0]?.head==="Delimiter"){var r=pr(i);if(!r)return null;var u=[e.canonical];r.forEach(s=>{u.push(s)}),t=n._fn("Product",u)}else{var o=Hn(i);t=o?n._fn("Product",[e.canonical,o]):n._fn("Product",[e.canonical])}return n.popScope(),t}function Fr(n,e,i){let t=e[0],r=[];if(e){r=[];for(let m=1;m<e.length;m++)r.push(e[m])}let u=null;if(r?.length===0){let m=i==="simplify"?t.simplify():t.evaluate({numericMode:i==="N"});if(P(n)){let D=n.bignum(1);for(let h of Q(m)){let g=Ge(h);if(g===null){u=void 0;break}if(g.isFinite()===!1){D=g;break}D=D.mul(g)}u===null&&(u=n.number(D))}else{let D=1;for(let h of Q(m)){let g=E(h);if(g===null){u=void 0;break}if(g===null||!Number.isFinite(g)){D=g;break}D*=g}u===null&&(u=n.number(D))}return u??void 0}let o=t,s=n.swapScope(o.scope);n.pushScope();var a=[];let l=[],f=[],d=[];r.forEach(m=>{let[D,h,g,A]=Jn(m.evaluate());D&&(n.declare(D,{holdUntil:"simplify",domain:"Numbers"}),a.push(D),l.push(h),f.push(g),d.push(A))}),o.bind();for(let m=0;m<a.length;m++){let D=a[m],h=l[m],g=f[m],A=d[m];if(h>=g||i!=="N"&&(h>=g||g-h>=lt))return;if(i==="simplify"){let B=[];for(let C=h;C<=g;C++)n.assign({[D]:C}),B.push(o.simplify());u=n.mul(...B).simplify()}}let c=[];if(a.length>1)for(let m=0;m<a.length-1;m++)c.length===0?c=Pi(gn(l[m],f[m]),gn(l[m+1],f[m+1])):c=Pi(c.map(D=>D[0]),gn(l[m+1],f[m+1]));else c=gn(l[0],f[0]).map(m=>[m]);if(i==="evaluate"){let m=[];for(let D of c){let h=a.map((g,A)=>(n.assign(g,D[A]),g));m.push(o.evaluate())}u=n.mul(...m).evaluate()}if(i==="N")for(let m=0;m<a.length;m++){let D=a[m],h=l[m],g=f[m],A=d[m];if(u===null&&A){if(P(n)){let j=n.bignum(1);for(let Z=h;Z<=g;Z++){n.assign({[D]:Z});let _e=Ge(o.N());if(_e===null||_e.isFinite()===!1){u=_e!==null?n.number(_e):void 0;break}j=j.mul(_e)}u===null&&(u=n.number(j))}let B=1,C=n.numericMode,T=n.precision;n.numericMode="machine";for(let j=h;j<=g;j++){n.assign({[D]:j});let Z=E(o.N());if(Z===null||!Number.isFinite(Z)){u=Z!==null?n.number(Z):void 0;break}B*=Z}n.numericMode=C,n.precision=T,u===null&&(u=n.number(B))}if(u===null){n.assign({[D]:1e3});let B=o.N();n.assign({[D]:999});let C=o.N(),T=E(n.div(B,C).N());if(T!==null&&Number.isFinite(T)&&Math.abs(T)>1)u=n.PositiveInfinity;else{let j=1,Z=n.numericMode,_e=n.precision;n.numericMode="machine";for(let ze=h;ze<=g;ze++){n.assign({[D]:ze});let ke=E(o.N());if(ke===null){u=void 0;break}if(Math.abs(1-ke)<Number.EPSILON||!Number.isFinite(ke))break;j*=ke}u===null&&(u=n.number(j)),n.numericMode=Z,n.precision=_e}}}for(let m=0;m<a.length;m++)n.assign(a[m],void 0);return n.popScope(),n.swapScope(s),u??void 0}var X=class n extends L{constructor(i,t,r,u){u??(u={}),u.canonical??(u.canonical=!1);super(i,u.metadata);this._result=void 0;this._head=t,this._ops=r,u.canonical&&(this._canonical=this,this.bind()),i._register(this)}get hash(){if(this._hash!==void 0)return this._hash;let i=0;for(let t of this._ops)i=i<<1^t.hash|0;return typeof this._head=="string"?i=i^Ae(this._head)|0:i=i^this._head.hash|0,this._hash=i,i}infer(i){let t=this._def;return!t||!t.signature.inferredSignature?!1:(typeof t.signature.result!="function"&&(t.signature.result=At(t.signature.result,i)),!0)}bind(){this._def=void 0,this._scope=this.engine.context;let i=this._head;if(typeof i!="string"){i.bind();return}this._def=this.engine.lookupFunction(i);for(let t of this._ops)t.bind()}reset(){}get isExact(){return $i(this)&&this.op1.isExact}get isCanonical(){return this._canonical===this}set isCanonical(i){this._canonical=i?this:void 0}get isPure(){if(this._isPure!==void 0)return this._isPure;if(!this.isCanonical)return this._isPure=!1,!1;let i=this.functionDefinition?.pure??!1;return i&&(i=this._ops.every(t=>t.isPure)),this._isPure=i,i}get json(){return this.isValid&&this._canonical===this?ya(this.engine,this._head,this._ops,{latex:this._latex,wikidata:this.wikidata}):M(this.engine,this._head,this._ops,{latex:this._latex,wikidata:this.wikidata})}get rawJson(){return[typeof this._head=="string"?this._head:this._head.rawJson,...this.ops.map(t=>t.rawJson)]}get scope(){return this._scope}get head(){return this._head}get ops(){return this._ops}get nops(){return this._ops.length}get op1(){return this._ops[0]??this.engine.Nothing}get op2(){return this._ops[1]??this.engine.Nothing}get op3(){return this._ops[2]??this.engine.Nothing}get isValid(){return this._head==="Error"||typeof this._head!="string"&&!this._head.isValid?!1:this._ops.every(i=>i?.isValid)}get canonical(){return this._canonical??(this._canonical=this.isValid?Cr(this.engine,this._head,this._ops):this),this._canonical}map(i){let t=[],r=0;for(;r<this._ops.length;)t.push(i(this._ops[r++]));return t[Symbol.iterator]()}subs(i,t){t=t?{...t}:{},"canonical"in t||(t.canonical=!0);let r=this._ops.map(u=>u.subs(i,t));return t.canonical&&r.every(u=>u.isValid)?Cr(this.engine,this._head,r):new n(this.engine,this._head,r,{canonical:!1})}replace(i,t){return cr(this,i,t)}has(i){if(typeof this._head=="string"){if(typeof i=="string"){if(this._head===i)return!0}else if(i.includes(this._head))return!0}for(let t of this._ops)if(t.has(i))return!0;return!1}isSame(i){if(this===i)return!0;if(!(i instanceof n)||this.nops!==i.nops)return!1;if(typeof this.head=="string"){if(this.head!==i.head)return!1}else if(typeof i.head=="string"||!i.head||!this.engine.box(this.head).isSame(this.engine.box(i.head)))return!1;let t=this._ops,r=i._ops;for(let u=0;u<t.length;u++)if(!t[u].isSame(r[u]))return!1;return!0}match(i,t){return Ui(this,i,t)}get complexity(){if(this.isCanonical)return this.functionDefinition?.complexity??xn}get baseDefinition(){return this.functionDefinition}get functionDefinition(){return this._def}isEqual(i){if(this===i)return!0;let t=this.head;if(t==="Equal"||t==="NotEqual"||t==="Unequal")return i.head!==t?!1:!!(this.op1.isEqual(i.op1)&&this.op2.isEqual(i.op2)||this.op1.isEqual(i.op2)&&this.op2.isEqual(i.op1));if(t==="Less")return i.head==="Less"?!!(this.op1.isEqual(i.op1)&&this.op2.isEqual(i.op2)):i.head==="Greater"?!!(this.op1.isEqual(i.op2)&&this.op2.isEqual(i.op1)):!1;if(t==="Greater")return i.head==="Greater"?!!(this.op1.isEqual(i.op1)&&this.op2.isEqual(i.op2)):i.head==="Less"?!!(this.op1.isEqual(i.op2)&&this.op2.isEqual(i.op1)):!1;if(t==="LessEqual")return i.head==="LessEqual"?!!(this.op1.isEqual(i.op1)&&this.op2.isEqual(i.op2)):i.head==="GreaterEqual"?!!(this.op1.isEqual(i.op2)&&this.op2.isEqual(i.op1)):!1;if(t==="GreaterEqual")return i.head==="GreaterEqual"?!!(this.op1.isEqual(i.op1)&&this.op2.isEqual(i.op2)):i.head==="LessEqual"?!!(this.op1.isEqual(i.op2)&&this.op2.isEqual(i.op1)):!1;if(Nn(t))return i.head!==this.head?!1:!!(this.op1.isEqual(i.op1)&&this.op2.isEqual(i.op2));let r=si(this,i);return r===0?!0:r!==void 0?!1:this.engine.add(this,this.engine.neg(i)).simplify().isZero?!0:this.isSame(i)}get isNumber(){return this.domain?.isCompatible("Numbers")}get isInteger(){return this.domain?.isCompatible("Integers")}get isRational(){return this.domain?.isCompatible("RationalNumbers")}get isAlgebraic(){return this.domain?.isCompatible("AlgebraicNumbers")}get isReal(){return this.domain?.isCompatible("RealNumbers")}get isExtendedReal(){return this.domain?.isCompatible("ExtendedRealNumbers")}get isComplex(){return this.domain?.isCompatible("ComplexNumbers")}get isImaginary(){return this.domain?.isCompatible("ImaginaryNumbers")}get domain(){if(this._result!==void 0)return this._result;if(!this.canonical)return;let i=this.engine,t;if(typeof this._head!="string")t=this._head.domain;else if(this._def){let r=this._def.signature;typeof r.result=="function"?t=r.result(i,this._ops):t=r.result}return t??(t=void 0),this._result=t,t}simplify(i){if(!this.isValid)return this;if(!this.isCanonical){let f=this.canonical;return!f.isCanonical||!f.isValid?this:f.simplify(i)}let t=i?.recursive??!0,r;if(t&&(r=sn(this),r!==null))return r=r.simplify({...i,recursive:!1}),Ct(this,r);let u=this.functionDefinition,o=t?Ea(this._ops,u?.hold??"none",u?.associative?u.name:"",f=>f.simplify(i)):this._ops;if(typeof this._head!="string"){let f=di(this._head,o);return typeof f.head!="string"?f:f.simplify(i)}if(u)if(u.inert)r=o[0]?.canonical??this;else{let f=u.signature;f?.simplify&&(r=f.simplify(this.engine,o))}r?r=Ct(this.engine.box([this._head,...o]),r):r=this.engine.box([this._head,...o]),r=Ct(this,r);let s=i?.rules??this.engine.cache("standard-simplification-rules",()=>li(this.engine,fa),f=>{for(let[d,c,m,D]of f)d.reset(),c.reset();return f}),a=0,l=!1;do{let f=r.replace(s);f!==null?(r=Ct(r,f),r===f&&(l=!0)):l=!0,a+=1}while(!l&&a<this.engine.iterationLimit);return Ct(this,r)}evaluate(i){if(!this.isValid)return this;if(i?.numericMode){let s=this.head;if(s==="Integrate"||s==="Limit")return this.engine.box(["N",this],{canonical:!0}).evaluate(i)}if(!this.isCanonical){this.engine.pushScope();let s=this.canonical;return this.engine.popScope(),!s.isCanonical||!s.isValid?this:s.evaluate(i)}let t=this.functionDefinition;if(t?.threadable&&this.ops.some(s=>le(s))){let s=Math.max(...this._ops.map(l=>l.functionDefinition?.size?.(l)??0)),a=[];for(let l=0;l<=s-1;l++){let f=this._ops.map(d=>le(d)?Xs(d,l%s+1)??this.engine.Nothing:d);a.push(this.engine._fn(this.head,f).evaluate(i))}return a.length===0?this.engine.box(["Sequence"]):a.length===1?a[0]:this.engine._fn("List",a)}let r=Ea(this._ops,t?.hold??"none",t?.associative?t.name:"",s=>s.evaluate(i));if(t?.inert)return r[0]??this;let u;typeof this._head!="string"&&(u=di(this._head,r));let o=t?.signature;if(!u&&o){let s=i?.numericMode??!1,a=this.engine.swapScope(this.scope);s&&o.N&&(u=o.N(this.engine,r)),!u&&o.evaluate&&(u=o.evaluate(this.engine,r)),this.engine.swapScope(a)}if(u){let s=u.numericValue;s!==null&&(!ae(this.engine)&&s instanceof ba.Complex?u=this.engine.NaN:!P(this.engine)&&s instanceof y&&(u=this.engine.number(s.toNumber())))}return u??this.engine.box([this._head,...r])}N(i){return this.evaluate({...i,numericMode:!0})}solve(i){return i.length!==1?null:Ar(this.simplify(),i[0])}};function hd(n,e,i,t){let r=[];if(e==="Add"||e==="Multiply")r=Pe(n,n.canonical(i),{flatten:e});else if(e==="Negate"||e==="Square"||e==="Sqrt"||e==="Exp"||e==="Ln")r=Pe(n,n.canonical(i),1);else if(e==="Divide"||e==="Power")r=Pe(n,n.canonical(i),2);else return null;if(!r.every(u=>u.isValid))return n._fn(e,r,t);if(e==="Add")return Mn(n,re(ue(r),"Add"));if(e==="Negate")return ce(r[0]);if(e==="Multiply")return yt(n,re(ue(r),"Multiply"));if(e==="Divide")return un(n,r[0].canonical,r[1].canonical);if(e==="Exp")return wn(n,n.E,r[0].canonical);if(e==="Power")return wn(n,r[0].canonical,r[1].canonical);if(e==="Square")return wn(n,r[0].canonical,n.number(2));if(e==="Sqrt"){let u=r[0].canonical;return U(u.numericValue)?n._fn("Sqrt",[u],t):wn(n,u,n.Half)}return e==="Ln"?n._fn("Ln",r,t):null}function Cr(n,e,i,t){if(typeof e!="string"&&(n.pushScope(),e=e.evaluate().symbol??e,n.popScope()),typeof e=="string"){let l=hd(n,e,i,t);if(l)return l}else if(!e.isValid)return new X(n,e,i.map(l=>n.box(l,{canonical:!1})),{metadata:t,canonical:!1});let r=n.lookupFunction(e);if(!r)return new X(n,e,ue(i.map(l=>n.box(l))),{metadata:t,canonical:!0});let u=[];for(let l=0;l<i.length;l++)if(!kn(r.hold,i.length-1,l))u.push(n.box(i[l]));else{let f=n.box(i[l],{canonical:!1});f.head==="ReleaseHold"?u.push(f.op1.canonical):u.push(f)}let o=r.signature;if(o.canonical){try{let l=o.canonical(n,u);if(l)return l}catch(l){console.error(l)}return new X(n,e,u,{metadata:t,canonical:!1})}let s=ue(u);r.associative&&(s=re(s,e));let a=ea(n,s,r.hold,r.threadable,o.params,o.optParams,o.restParam);if(a)return n._fn(e,a,t);if(s.length===1&&s[0].head===e){if(r.involution)return s[0].op1;r.idempotent&&(s=u[0].ops)}return s.length>1&&r.commutative===!0&&(s=[...s].sort(on)),n._fn(e,s,t)}function Ea(n,e,i,t){if(n.length===0)return[];if(n=re(n,i),e==="all")return n;if(e==="none"){let u=[];for(let o of n){let s=o.head;if(s==="Hold")u.push(o);else{let a=s==="ReleaseHold"?o.op1:o;if(a){let l=t(a);l!==null&&u.push(l)}}}return re(u,i)}let r=[];for(let u=0;u<n.length;u++)if(n[u].head==="Hold")r.push(n[u]);else{let o;if(n[u].head==="ReleaseHold"?o=n[u].op1:kn(e,n.length-1,u)?r.push(n[u]):o=n[u],o){let s=t(o);s!==null&&r.push(s)}}return re(r,i)}function Ct(n,e){if(e==null||n===e)return n;let i=n.engine,t=i.box(e);return i.costFunction(t)<=1.2*i.costFunction(n)?t:n}var xn=1e5;function Ju(n){return[...n].sort((e,i)=>{let t=xt(e),r=xt(i);if(!t&&!r)return on(e,i);if(!t)return 1;if(!r||t<r)return-1;if(t>r)return 1;let u=Et(e),o=Et(i);if(u!==o)return o-u;let s=$u(e),a=$u(i);return s!==a?s-a:on(e,i)})}function on(n,e){if(n===e||n.numericValue!==null&&n.numericValue===e.numericValue)return 0;let i=E(n);if(i!==null){let t=E(e);return t!==null?i-t:-1}if(n.numericValue instanceof Hu.Complex)return e.numericValue instanceof Hu.Complex?n.numericValue.re===e.numericValue.re?Math.abs(n.numericValue.im)===Math.abs(e.numericValue.im)?n.numericValue.im-e.numericValue.im:Math.abs(n.numericValue.im)-Math.abs(e.numericValue.im):n.numericValue.re-e.numericValue.re:e.numericValue!==null?1:-1;if(n.numericValue)return e.numericValue?1:-1;if(n.head==="Sqrt"&&n.op1.numericValue)return e.head==="Sqrt"&&e.op1.numericValue?on(n.op1,e.op1):-1;if(n.symbol)return e.symbol?n.symbol===e.symbol?0:n.symbol>e.symbol?1:-1:e.numericValue!==null?1:-1;if(n.ops){if(e.ops){let t=n.functionDefinition?.complexity??xn,r=e.functionDefinition?.complexity??xn;return t===r?typeof n.head=="string"&&typeof e.head=="string"?n.head===e.head?Gi(n)-Gi(e):n.head<e.head?1:-1:Gi(n)-Gi(e):t-r}return e.numericValue!==null||e.symbol?1:-1}if(n.string)return e.string?n.string.length!==e.string.length?e.string.length-n.string.length:e.string<n.string?-1:n.string>e.string?1:0:e.keys?-1:1;if(n.keys&&e.keys){if(n.keysCount!==e.keysCount)return e.keysCount-n.keysCount;let t=0,r=0;for(let u of e.keys)t+=e.getKey(u).complexity??xn;for(let u of n.keys)r+=n.getKey(u).complexity??xn;return r-t}return(n.complexity??xn)-(e.complexity??xn)}function Wu(n,{recursive:e=!1}){if(n.ops){let i=n.ops;e&&(i=i.map(r=>Wu(r,{recursive:e})));let t=n.engine;return n.head==="Add"?i=Ju(i):(n.head==="Multiply"||(t.lookupFunction(n.head)?.commutative??!1))&&(i=[...i].sort(on)),new X(n.engine,n.head,i,{canonical:n.isCanonical})}return n}function Gi(n){return n.keys!==null?1+n.keysCount:n.ops?(typeof n.head=="string"?1:Gi(n.head))+[...n.ops].reduce((e,i)=>e+Gi(i),0):1}var On=class{constructor(e,i,t){this.options=t;this._terms=[];this._hasInfinity=!1;this._hasZero=!1;this._isCanonical=!0;if(t=t?{...t}:{},"canonical"in t||(t.canonical=!0),this._isCanonical=t.canonical,this.engine=e,this._sign=1,this._rational=P(e)?[BigInt(1),BigInt(1)]:[1,1],this._rationalSqrt=this._rational,this._complex=Qu.Complex.ONE,this._bignum=e._BIGNUM_ONE,this._number=1,i)for(let r of i)this.addTerm(r)}get isEmpty(){return this._isCanonical?this._terms.length===0&&this._hasInfinity===!1&&this._hasZero===!1&&this._sign===1&&this._number===1&&this._complex.re===1&&this._complex.im===0&&this._bignum.eq(this.engine._BIGNUM_ONE)&&te(this._rational)&&te(this._rationalSqrt):this._terms.length===0}addTerm(e){if(e.isCanonical,e.head==="Multiply"){for(let u of e.ops)this.addTerm(u);return}if(this._isCanonical){if(e.isNothing)return;if(e.numericValue!==null){if(e.isOne)return;if(e.isZero){this._hasZero=!0;return}if(e.isNegativeOne){this._sign*=-1;return}if(e.isInfinity){this._hasInfinity=!0,e.isNegative&&(this._sign*=-1);return}let o=e.numericValue;if(typeof o=="number"){o<0&&(this._sign*=-1,o=-o),Number.isInteger(o)?this._rational=Y(this._rational,[o,1]):P(this.engine)?this._bignum=this._bignum.mul(o):this._number*=o;return}if(o instanceof y){o.isNegative()&&(this._sign*=-1,o=o.neg()),o.isInteger()?this._rational=Y(this._rational,[R(o),BigInt(1)]):P(this.engine)?this._bignum=this._bignum.mul(o):this._number*=o.toNumber();return}if(o instanceof Qu.Complex){this._complex=this._complex.mul(o);return}if(U(o)){this._rational=Y(this._rational,o),Tu(this._rational)&&(this._sign*=-1,this._rational=Ce(this._rational));return}}let u=Zu(e);if(u){this._rationalSqrt=Y(this._rationalSqrt,u);return}}let i=e;if(this._isCanonical){let u;[u,i]=Je(e),this._rational=Y(this._rational,u),Tu(this._rational)&&(this._sign*=-1,this._rational=Ce(this._rational))}if(i.numericValue!==null&&i.isOne)return;let t=[1,1];if(i.head==="Power"){let u=J(i.op2);u&&(t=u,i=i.op1)}else i.head==="Divide"&&(this.addTerm(i.op1),t=[-1,1],i=i.op2);let r=!1;for(let u of this._terms)if(u.term.isSame(i)){u.exponent=dt(u.exponent,t),r=!0;break}r||this._terms.push({term:i,exponent:t})}unitTerms(e){let i=this.engine;if(e==="numeric"){if(!ae(i)&&this._complex.im!==0)return null;if(P(i)){let a=i._BIGNUM_ONE;if(te(this._rational)||(K(this._rational)?a=i.bignum(this._rational[0].toString()).div(i.bignum(this._rational[1].toString())):a=i.bignum(this._rational[0]).div(this._rational[1])),a=a.mul(this._bignum).mul(this._sign*this._number),this._complex.im!==0){let l=this._complex.mul(a.toNumber());return l.equals(1)?[]:[{exponent:[1,1],terms:[i.number(l)]}]}return a=a.mul(this._complex.re),a.equals(1)?[]:[{exponent:[1,1],terms:[i.number(a)]}]}let s=1;if(te(this._rational)||(K(this._rational)?s=Number(this._rational[0])/Number(this._rational[1]):s=this._rational[0]/this._rational[1]),s*=this._sign*this._number*this._bignum.toNumber(),this._complex.im!==0){let a=this._complex.mul(s);return a.equals(1)?[]:[{exponent:[1,1],terms:[i.number(a)]}]}return s*=this._complex.re,s===1?[]:[{exponent:[1,1],terms:[i.number(s)]}]}let t=[],r=[];if(this._hasInfinity&&r.push(i.PositiveInfinity),this._rationalSqrt=je(this._rationalSqrt),!te(this._rationalSqrt)){let[s,a]=this._rationalSqrt,l=i.sqrt(i.number(s)),f=i.sqrt(i.number(a));if(f.isOne){let d=J(l);d?this._rational=Y(this._rational,d):r.push(l)}else l.isInteger&&f.isInteger?(this._rational=Y(Y(this._rational,l),i.inv(f)),r.push(i._fn("Sqrt",[i.div(l.op1,f.op1)]))):$i(l)&&$i(f)?r.push(i._fn("Sqrt",[i.div(l.op1,f.op1)])):r.push(i._fn("Divide",[l,f]))}(this._complex.re!==1||this._complex.im!==0)&&(this._complex.im===0?this._number*=Math.abs(this._complex.re):r.push(i.number(this._complex)));let u=this._sign*this._number,o=this._bignum;return this._rational=je(this._rational),te(this._rational)||(e==="rational"?(Re(this._rational)!==1&&(K(this._rational)?o=o.mul(i.bignum(this._rational[0])):u*=this._rational[0]),Dn(this._rational)!==1&&t.push({exponent:[-1,1],terms:[i.number(this._rational[1])]})):u===-1?(r.push(i.number(Ce(this._rational))),u=1):r.push(i.number(this._rational))),o.equals(i._BIGNUM_ONE)?u!==1&&r.push(i.number(u)):r.push(i.number(o.mul(u))),r.length>0&&t.push({exponent:[1,1],terms:r}),t}groupedByDegrees(e){e??(e={}),"mode"in e||(e.mode="expression");let i=this.engine;if(e.mode==="numeric"){if(this._complex.im!==0&&!ae(i))return null;if(this._hasInfinity)return[{exponent:[1,1],terms:[i.PositiveInfinity]}]}let t=this.unitTerms(e.mode??"expression");if(t===null)return null;for(let r of this._terms){let u=je(r.exponent);if(u[0]===0)continue;let o=!1;for(let s of t)if(u[0]===s.exponent[0]&&u[1]===s.exponent[1]){s.terms.push(r.term),o=!0;break}o||t.push({exponent:u,terms:[r.term]})}return t}asExpression(e="evaluate"){let i=this.engine;if(this._hasInfinity){if(this._hasZero)return i.NaN;if(this._terms.length===0)return Re(this._rational)>0?i.PositiveInfinity:i.NegativeInfinity}if(this._hasZero)return i.Zero;let t=this.groupedByDegrees({mode:e==="N"?"numeric":"expression"});if(t===null)return i.NaN;let r=Yu(i,t);return r.length===0?i.One:r.length===1?r[0]:this.engine._fn("Multiply",r)}asNumeratorDenominator(){if(this._hasZero)return[this.engine.Zero,this.engine.One];if(this._hasInfinity)return[this.engine.NaN,this.engine.NaN];let e=this.groupedByDegrees({mode:"rational"});if(e===null)return[this.engine.NaN,this.engine.NaN];let i=[],t=[];for(let l of e)l.exponent[0]>=0?i.push(l):t.push({exponent:Ce(l.exponent),terms:l.terms});let r=this.engine,u=Yu(r,i),o=r.One;u.length===1?o=u[0]:u.length>0&&(o=r._fn("Multiply",u));let s=Yu(r,t),a=r.One;return s.length===1?a=s[0]:s.length>0&&(a=r._fn("Multiply",s)),[o,a]}asRationalExpression(){let[e,i]=this.asNumeratorDenominator();if(i.numericValue!==null){if(i.isOne)return e;if(i.isNegativeOne)return this.engine.neg(e)}return this.engine._fn("Divide",[e,i])}};function Fa(n){if(te(n))return 0;let[e,i]=[Re(n),Dn(n)];return e>0&&Number.isInteger(e/i)?1:e>0?2:Number.isInteger(e/i)?3:4}function gd(n,e){let i=Fa(n.exponent),t=Fa(e.exponent);if(i!==t)return i-t;let[r,u]=[Re(n.exponent),Dn(n.exponent)],[o,s]=[Re(e.exponent),Dn(e.exponent)];return r/u-o/s}function Yu(n,e){let i=e.sort(gd).map(t=>{let r=re(t.terms,"Multiply"),u=r.length<=1?r[0]:n._fn("Multiply",[...r].sort(on));return n.pow(u,t.exponent)});return re(i,"Multiply")??i}function Ca(n,e,i,t){if(e.numericValue!==null){if(U(e.numericValue))return Re(e.numericValue)<0?M(n,"Subtract",[i,n.number(Ce(e.numericValue))],t):null;let r=q(e);if(r!==null&&r<0)return M(n,"Subtract",[i,n.number(-r)],t)}return e.head==="Negate"?M(n,"Subtract",[i,e.op1],t):null}function ya(n,e,i,t){let r=n.jsonSerializationOptions.exclude;if(e==="Add"&&i.length===2&&!r.includes("Subtract")){let u=Ca(n,i[0],i[1],t)??Ca(n,i[1],i[0],t);if(u)return u}if(e==="Divide"&&i.length===2&&r.includes("Divide"))return M(n,"Multiply",[i[0],n._fn("Power",[i[1],n.NegativeOne])],t);if(e==="Multiply"&&!r.includes("Negate")&&E(i[0])===-1)return i.length===2?M(n,"Negate",[i[1]]):M(n,"Negate",[n._fn("Multiply",i.slice(1))],t);if(e==="Multiply"&&!r.includes("Divide")){let u=new On(n,i,{canonical:!1}).asRationalExpression();if(u.head==="Divide")return M(n,u.head,u.ops,t)}if(e==="Power"){if(!r.includes("Exp")&&i[0]?.symbol==="ExponentialE")return M(n,"Exp",[i[1]],t);if(i[1]?.numericValue!==null){let u=q(i[1]);if(u===2&&!r.includes("Square"))return M(n,"Square",[i[0]],t);if(u!==null&&u<0&&!r.includes("Divide"))return M(n,"Divide",[n.One,u===-1?i[0]:n.pow(i[0],-u)],t);let o=i[1].numericValue;if(!r.includes("Sqrt")&&o===.5)return M(n,"Sqrt",[i[0]],t);if(!r.includes("Sqrt")&&o===-.5)return M(n,"Divide",[n.One,n._fn("Sqrt",[i[0]])],t);if(U(o)){let s=Re(o),a=Dn(o);if(s===1){if(!r.includes("Sqrt")&&a===2)return M(n,"Sqrt",[i[0]],t);if(!r.includes("Root"))return M(n,"Root",[i[0],n.number(o[1])],t)}if(s===-1){if(!r.includes("Sqrt")&&a===2)return M(n,"Divide",[n.One,n._fn("Sqrt",[i[0]])],t);if(!r.includes("Root"))return M(n,"Divide",[n.One,n._fn("Root",[i[0],n.number(o[1])])],t)}}}}if(e==="Add"&&i.length===2&&!r.includes("Subtract")){if(i[1]?.numericValue!==null){let u=q(i[1]);if(u!==null&&u<0)return M(n,"Subtract",[i[0],n.number(-u)],t)}if(i[1]?.head==="Negate")return M(n,"Subtract",[i[0],i[1].op1],t)}if(e==="Tuple"){if(i.length===1&&!r.includes("Single"))return M(n,"Single",i,t);if(i.length===2&&!r.includes("Pair"))return M(n,"Pair",i,t);if(i.length===3&&!r.includes("Triple"))return M(n,"Triple",i,t)}return M(n,e,i,t)}function M(n,e,i,t){let r=n.jsonSerializationOptions.exclude;if(e==="Negate"&&i.length===1){let a=i[0]?.numericValue;if(a!==null){if(typeof a=="number")return Di(n,-a);if(a instanceof y||a instanceof Xu.Complex)return Di(n,a.neg());if(U(a))return Di(n,Ce(a))}}if(typeof e=="string"&&r.includes(e)){if(e==="Rational"&&i.length===2)return M(n,"Divide",i,t);if(e==="Complex"&&i.length===2)return M(n,"Add",[i[0],n._fn("Multiply",[i[1]??n.symbol("Undefined"),n.I])],t);if(e==="Sqrt"&&i.length===1)return M(n,"Power",[i[0],r.includes("Half")?n.number([1,2]):n.Half],t);if(e==="Root"&&i.length===2&&i[1]?.numericValue!==null){let a=q(i[1]);if(a===2)return M(n,"Sqrt",[i[0]]);if(a!==null)return a<0?M(n,"Divide",[n.One,n._fn("Power",[i[0]??n.symbol("Undefined"),n.number([1,-a])])],t):M(n,"Power",[i[0],n.number([1,-a])],t)}if(e==="Square"&&i.length===1)return M(n,"Power",[i[0],n.number(2)],t);if(e==="Exp"&&i.length===1)return M(n,"Power",[n.E,i[0]],t);if(e==="Pair"||e=="Single"||e==="Triple")return M(n,"Tuple",i,t);if(e==="Subtract"&&i.length===2)return M(n,"Add",[i[0],n._fn("Negate",[i[1]??n.symbol("Undefined")])],t);if(e==="Subtract"&&i.length===1)return M(n,"Negate",i,t)}let o=[typeof e=="string"?e:e.json,...i.map(a=>a?.json??"Undefined")],s={...t??{}};return n.jsonSerializationOptions.metadata.includes("latex")?s.latex=s.latex??n.serialize({fn:o}):s.latex="",n.jsonSerializationOptions.metadata.includes("wikidata")||(s.wikidata=""),!s.latex&&!s.wikidata&&n.jsonSerializationOptions.shorthands.includes("function")?o:s.latex&&s.wikidata?{fn:o,latex:s.latex,wikidata:s.wikidata}:s.latex?{fn:o,latex:s.latex}:s.wikidata?{fn:o,wikidata:s.wikidata}:{fn:o}}function Ba(n,e){return e=e,n.jsonSerializationOptions.shorthands.includes("string")?`'${e}'`:{str:e}}function Br(n,e,i){if(e==="Half"&&n.jsonSerializationOptions.exclude.includes("Half"))return Di(n,[1,2],i);if(i={...i},n.jsonSerializationOptions.metadata.includes("latex")?(i.latex=i.latex??n.serialize({sym:e}),i.latex!==void 0&&(i.latex=i.latex)):i.latex=void 0,n.jsonSerializationOptions.metadata.includes("wikidata")){if(i.wikidata===void 0){let t=n.lookupSymbol(e)?.wikidata;t!==void 0&&(i.wikidata=t)}}else i.wikidata=void 0;return e=e,i.latex===void 0&&i.wikidata===void 0&&n.jsonSerializationOptions.shorthands.includes("symbol")?e:i.latex!==void 0&&i.wikidata!==void 0?{sym:e,latex:i.latex,wikidata:i.wikidata}:i.latex!==void 0?{sym:e,latex:i.latex}:i.wikidata!==void 0?{sym:e,wikidata:i.wikidata}:{sym:e}}function Di(n,e,i){i={...i},n.jsonSerializationOptions.metadata.includes("latex")||(i.latex=void 0);let t=i.latex===void 0&&i.wikidata===void 0&&!n.jsonSerializationOptions.metadata.includes("latex")&&n.jsonSerializationOptions.shorthands.includes("number"),r=n.jsonSerializationOptions.exclude,u="";if(e instanceof y){if(e.isNaN())u="NaN";else if(!e.isFinite())u=e.isPositive()?"+Infinity":"-Infinity";else{if(t&&xr(e))return e.toNumber();if(e.isInteger()&&e.e<e.precision()+4)u=e.toFixed(0);else{let o=n.jsonSerializationOptions.precision,s=o==="max"?e.toString():e.toPrecision(o==="auto"?n.precision:o);if(u=Aa(n,s),t){let a=e.toNumber();if(a.toString()===u)return a}}}return n.jsonSerializationOptions.metadata.includes("latex")&&(i.latex=i.latex??n.serialize({num:u})),i.latex!==void 0?{num:u,latex:i.latex}:t?u:{num:u}}if(e instanceof Xu.Complex)return e.isInfinite()?Br(n,"ComplexInfinity",i):e.isNaN()?(u="NaN",n.jsonSerializationOptions.metadata.includes("latex")&&(i.latex=i.latex??n.serialize({num:u})),i.latex!==void 0?{num:u,latex:i.latex}:{num:u}):M(n,"Complex",[n.number(e.re),n.number(e.im)],{...i,wikidata:"Q11567"});if(U(e)){let o=!r.includes("Rational");return t&&n.jsonSerializationOptions.shorthands.includes("function")&&H(e)?e[0]===1&&e[1]===2&&!r.includes("Half")?Br(n,"Half",i):[o?"Rational":"Divide",e[0],e[1]]:M(n,o?"Rational":"Divide",[n.number(e[0]),n.number(e[1])],{...i})}if(Number.isNaN(e))u="NaN";else if(!Number.isFinite(e))u=e>0?"+Infinity":"-Infinity";else{if(t)return e;u=Aa(n,e.toString())}return n.jsonSerializationOptions.metadata.includes("latex")&&(i.latex=i.latex??n.serialize({num:u})),i.latex!==void 0?{num:u,latex:i.latex}:{num:u}}function Aa(n,e){if(!n.jsonSerializationOptions.repeatingDecimals)return e;let[i,t,r,u]=e.match(/^(.*)\.([0-9]+)([e|E][-+]?[0-9]+)?$/)??[];if(!r)return e.toLowerCase();let o=r[r.length-1];r=r.slice(0,-1);let s=16,a="";for(let l=0;l<r.length-s;l++){a=r.substring(0,l);for(let f=0;f<=s;f++){let d=r.substring(l,l+f+1),c=Math.floor((r.length-a.length)/d.length);if(c<3)break;if((a+d.repeat(c+1)).startsWith(r))return d==="0"?o==="0"?t+"."+a+(u??""):e:t+"."+a+"("+d+")"+(u??"")}}for(r+=o;r.endsWith("0");)r=r.slice(0,-1);return u?`${t}.${r}${u.toLowerCase()}`:`${t}.${r}`}var me=class n extends L{constructor(e,i,t){if(super(e,t?.metadata),typeof i=="number"){this._value=i,this._isCanonical=!0;return}if(U(i)){let[r,u]=i;typeof r!="number"||Number.isInteger(r)&&Number.isInteger(u),!(typeof r=="bigint"&&typeof u=="bigint")||u!==r&&BigInt(1),t?.canonical??!0?(this._value=Ku(e,i),this._isCanonical=!0):(this._value=i,this._isCanonical=!1)}else!(i instanceof qe.Complex)||!Number.isNaN(i.re)&&!Number.isNaN(i.im)&&e.chop(i.im),this._value=Ku(e,i),this._isCanonical=!0}get hash(){if(this._hash!==void 0)return this._hash;let e=0;return typeof this._value=="number"?e=Ae(this._value.toString()):this._value instanceof qe.Complex?e=Ae(this._value.re.toString()+" +i "+this._value.im.toString()):this._value instanceof y?e=Ae(this._value.toString()):e=Ae(this._value[0].toString()+" / "+this._value[1].toString()),this._hash=e,e}get head(){return"Number"}get isPure(){return!0}get isExact(){let e=this._value;return typeof e=="number"?Number.isInteger(e):e instanceof y?e.isInteger():e instanceof qe.Complex?Number.isInteger(e.re)&&Number.isInteger(e.im):U(e)}get isCanonical(){return this._isCanonical}set isCanonical(e){this._isCanonical=e}get complexity(){return 1}get numericValue(){return this._value}get domain(){return this._domain??(this._domain=this.engine.domain(Qs(this._value))),this._domain}get json(){return Di(this.engine,this._value,{latex:this._latex})}get sgn(){if(this._value===0)return 0;if(typeof this._value=="number")return this._value<0?-1:this._value>0?1:null;if(this._value instanceof y)return this._value.isZero()?0:this._value.isNegative()?-1:this._value.isPositive()?1:null;if(Array.isArray(this._value)){let[e,i]=this._value;return e===0&&i!==0?0:e<0?-1:e>0?1:null}return null}isSame(e){if(this===e)return!0;if(!(e instanceof n))return!1;if(typeof this._value=="number")return typeof e._value!="number"?!1:this._value===e._value;if(this._value instanceof y)return e._value instanceof y?this._value.eq(e._value):!1;if(Array.isArray(this._value)){if(!Array.isArray(e._value))return!1;let[i,t]=e._value;return this._value[0]===i&&this._value[1]===t}return this._value instanceof qe.Complex&&e._value instanceof qe.Complex?this._value.equals(e._value):!1}isEqual(e){return this===e||si(this,e)===0}match(e,i){return Ui(this,e,i)}isEqualWithTolerance(e,i){return e instanceof n&&si(this,e,i)===0}isLess(e){let i=si(this,e);if(i!==void 0)return i<0}isLessEqual(e){let i=si(this,e);if(i!==void 0)return i<=0}isGreater(e){return e.isLessEqual(this)}isGreaterEqual(e){return e.isLess(this)}get isPositive(){if(typeof this._value=="number")return this._value>0;let e=this.sgn;if(e!=null)return e>0}get isNonNegative(){if(typeof this._value=="number")return this._value>=0;let e=this.sgn;if(e!=null)return e>=0}get isNegative(){if(typeof this._value=="number")return this._value<0;let e=this.sgn;if(e!=null)return e<0}get isNonPositive(){if(typeof this._value=="number")return this._value<=0;let e=this.sgn;if(e!=null)return e<=0}get isZero(){return this._value===0?!0:this._value instanceof y?this._value.isZero():this._value instanceof qe.Complex?this._value.isZero():!1}get isNotZero(){return this._value===0?!1:this._value instanceof y?!this._value.isZero():this._value instanceof qe.Complex?!this._value.isZero():!0}get isOne(){return this._value===1?!0:typeof this._value=="number"?!1:this._value instanceof y?this._value.equals(this.engine._BIGNUM_ONE):this._value instanceof qe.Complex?this._value.im===0&&this._value.re===1:te(this._value)}get isNegativeOne(){return this._value===-1?!0:typeof this._value=="number"?!1:this._value instanceof y?this._value.equals(this.engine._BIGNUM_NEGATIVE_ONE):this._value instanceof qe.Complex?this._value.im===0&&this._value.re===-1:wi(this._value)}get isOdd(){if(this.isOne||this.isNegativeOne)return!0;if(this.isZero||!this.isInteger)return!1;if(typeof this._value=="number")return this._value%2!==0;if(this._value instanceof y)return!this._value.mod(2).isZero()}get isEven(){if(this.isOne||this.isNegativeOne)return!1;if(this.isZero)return!0;if(!this.isInteger)return!1;if(typeof this._value=="number")return this._value%2===0;if(this._value instanceof y)return this._value.mod(2).isZero()}get isPrime(){if(!this.isInteger||!this.isFinite||this.isNonPositive||this.isOne||this.isZero)return!1;if(typeof this._value=="number")return Wn(this._value);if(this._value instanceof y)return Wn(this._value.toNumber())}get isComposite(){if(!this.isInteger||!this.isFinite||this.isNonPositive||this.isOne||this.isZero)return!1;if(typeof this._value=="number")return!Wn(this._value);if(this._value instanceof y)return!Wn(this._value.toNumber())}get isInfinity(){return typeof this._value=="number"?!Number.isFinite(this._value)&&!Number.isNaN(this._value):this._value instanceof y?!this._value.isFinite()&&!this._value.isNaN():this._value instanceof qe.Complex?!this._value.isFinite()&&!this._value.isNaN():!1}get isNaN(){return typeof this._value=="number"?Number.isNaN(this._value):this._value instanceof y?this._value.isNaN():this._value instanceof qe.Complex?this._value.isNaN():!1}get isFinite(){return!this.isInfinity&&!this.isNaN}get isNumber(){return!0}get isInteger(){return typeof this._value=="number"?Number.isInteger(this._value):this._value instanceof y?this._value.isInteger():!1}get isRational(){return Array.isArray(this._value)?!0:this.isInteger}get isAlgebraic(){if(this.isRational)return!0}get isReal(){return this.isFinite?this._value instanceof qe.Complex?this.engine.chop(this._value.im)===0:!0:!1}get isExtendedReal(){return this.isInfinity||this.isReal}get isComplex(){return!this.isNaN}get isImaginary(){return this._value instanceof qe.Complex?(this._value.im,!0):!1}get isExtendedComplex(){return this.isInfinity||!this.isNaN}get canonical(){return this._isCanonical?this:this.engine.number(Ku(this.engine,this._value))}simplify(e){return this.canonical}evaluate(e){return e?.numericMode?this.N(e):this}N(e){if(!Array.isArray(this._value))return this;let i=this.engine,[t,r]=this._value;return typeof t=="number"&&typeof r=="number"&&!P(i)?i.number(t/r):i.number(i.bignum(t).div(i.bignum(r)))}};function Ku(n,e){if(e instanceof y&&xr(e))return e.toNumber();if(!U(e))return e;if(e=je(e),K(e)){let[r,u]=e;if(r>Number.MIN_SAFE_INTEGER&&r<Number.MAX_SAFE_INTEGER&&u>Number.MIN_SAFE_INTEGER&&u<Number.MAX_SAFE_INTEGER)e=[Number(r),Number(u)];else return u<0&&([r,u]=[-r,-u]),u===BigInt(1)?n.bignum(r):u===BigInt(0)?r===u?NaN:r<0?-1/0:1/0:[r,u]}let[i,t]=e;return Number.isNaN(i)||Number.isNaN(t)?NaN:(t<0&&([i,t]=[-i,-t]),t===1?i:t===0?i===0||!Number.isFinite(i)?NaN:i<0?-1/0:1/0:i===0?i:[i,t])}function an(n){return n.symbol?.startsWith("_")??(n.head==="Wildcard"||n.head==="WildcardSequence"||n.head==="WildcardOptionalSequence")}function ln(n){if(n.symbol?.startsWith("_"))return n.symbol;if(n.nops===1){let e=n.op1;if(n.head==="Wildcard")return`_${e}`;if(n.head==="WildcardSequence")return`__${e}`;if(n.head==="WildcardOptionalSequence")return`___${e}`}return n.head==="Wildcard"?"_":n.head==="WildcardSequence"?"__":n.head==="WildcardOptionalSequence"?"___":null}function vr(n){if(typeof n=="string")return n.startsWith("_");if(an(n))return!0;if(n.ops)return vr(n.head)||n.ops.some(vr);if(n.keys){for(let e of n.keys)if(vr(n.getKey(e)))return!0}return!1}function _r(n,e,i){return n.startsWith("_"),n==="_"||n==="__"||n==="___"?i:n in i?e.isSame(i[n])?i:null:vr(e)?null:{...i,[n]:e}}function be(n,e,i,t){if(an(e))return _r(ln(e),n,i);let r=t.acceptVariants??!0;if(t={...t,acceptVariants:!0},e instanceof me){let a=t?.numericTolerance??Ii;return n instanceof me?a===0&&e.isSame(n)||e.isEqualWithTolerance(n,a)?i:r?eo(n,e,i,t):null:null}let u=e.string;if(u!==null)return n.string===u?i:null;let o=e.symbol;if(o!==null)return o===n.symbol?i:r?eo(n,e,i,t):null;let s=e.keys;if(s!==null){let a=n.keys;if(a===null)return null;for(let l of s){let f=be(a[l],s[l],i,t);if(f===null)return null;i=f}return i}if(e.ops){let a=t.exact??!1,l=n.engine,f=null,d=e.head;if(typeof d=="string"){if(d.startsWith("_"))f=_r(d,l.box(n.head),i),f!==null&&(f=Nr(n,e.ops,f,t));else if(d===n.head)f=l.lookupFunction(d)?.commutative?Ed(n,e,i,t):Nr(n,e.ops,i,t);else if(typeof n.head=="string"&&!a){if(!r)return null;f=eo(n,e,i,t)}}else typeof n.head!="string"&&(f=be(l.box(n.head,{canonical:!1}),l.box(d,{canonical:!1}),i,t),f!==null&&(f=Nr(n,e.ops,f,t)));return f!==null&&(i=f),t.recursive&&n.ops&&(f=xd(n,e,i,{...t,acceptVariants:r})??f),f}return null}function xd(n,e,i,t){n.ops;let r=null;for(let u of n.ops){let o=be(u,e,i,t);o!==null&&(r=o,i=o)}return r}function eo(n,e,i,t){if(t.exact)return null;e.head;let r=e.head,u=n.engine,o=null,s={...t,acceptVariants:!1};if(r==="Add"){let a=be(u.box(["Add",0,n],{canonical:!1}),e,i,s);if(a!==null||(n.head==="Subtract"&&(a=be(u.box(["Add",n.op1,["Negate",n.op2]],{canonical:!1}),e,i,s)),a!==null))return a}if(r==="Subtract"){let a=be(u.box(["Subtract",n,0],{canonical:!1}),e,i,s);if(a!==null||(n.head==="Negate"&&(a=be(u.box(["Subtract",0,n.op1],{canonical:!1}),e,i,s)),a!==null))return a}if(r==="Multiply"){let a=be(u.box(["Multiply",1,n],{canonical:!1}),e,i,s);if(a!==null||n.head==="Negate"&&(a=be(u.box(["Multiply",-1,n.op1],{canonical:!1}),e,i,s),a!==null)||n.head==="Divide"&&(a=be(u.box(["Multiply",n.op1,["Divide",1,n.op2]],{canonical:!1}),e,i,s),a!==null))return a}if(r==="Divide"){let a=be(u.box(["Divide",n,1],{canonical:!1}),e,i,s);if(a!==null)return a}if(r==="Square"){let a=be(u.box(["Power",n,2],{canonical:!1}),e,i,s);if(a!==null)return a}if(r==="Exp"){let a=be(u.box(["Power",u.box("ExponentialE"),n],{canonical:!1}),e,i,s);if(a!==null)return a}if(r==="Power"){if(e.op2.numericValue===2){let a=be(u.box(["Square",n],{canonical:!1}),e,i,s);if(a!==null)return a}if(e.op2.symbol==="ExponentialE"){let a=be(u.box(["Exp",n],{canonical:!1}),e,i,s);if(a!==null)return a}}return o}function Ed(n,e,i,t){let r=oa(e.ops);for(let u of r){let o=Nr(n,u,i,t);if(o!==null)return o}return null}function Nr(n,e,i,t){if(e.length===0)return n.ops&&n.ops.length===0?i:null;let r=e[0].engine,u={...i},o=[...n.ops],s=0;for(;s<e.length;){let a=e[s],l=ln(a);if(l!==null)if(l.startsWith("__")){let f=0;if(e[s+1]===void 0)f=o.length+1;else{let c=!1;for(;!c&&f<o.length;)c=be(o[f],e[s+1],u,t)!==null,f+=1;if(!c&&l.startsWith("___"))return null}if(!l.startsWith("___")&&f<=1)return null;let d;if(f<=1)n.head==="Add"?d=r.Zero:n.head==="Multiply"?d=r.One:d=r.box(["Sequence"]);else if(f===2)d=o.shift();else{let c=r.lookupFunction(n.head),m=o.splice(0,f-1);c?.associative?d=r.box([n.head,...m],{canonical:!1}):d=r.box(["Sequence",...m],{canonical:!1})}u=_r(l,d,u)}else l.startsWith("_")?u=_r(l,o.shift(),u):u=be(o.shift(),a,u,t);else{let f=o.shift();if(!f)return null;u=be(f,a,u,t)}if(u===null)return null;s+=1}return o.length>0?null:u}function Ui(n,e,i){if(hn(e)||(e=n.engine.box(e,{canonical:!1})),an(e))return{[ln(e)]:n};let t={recursive:i?.recursive??!1,exact:i?.exact??!1,acceptVariants:!(i?.exact??!1),numericTolerance:i?.numericTolerance??Ii},r=i?.substitution??{};return be(n,e,r,t)}var Rn=class n extends L{constructor(e,i,t){if(i instanceof n,super(e,t),typeof i=="string"){if(!fi(i))throw Error(`Unknown domain literal "${i}"`);this.base=i,this.ctor=null,this.params=[];return}if(!Array.isArray(i))throw Error("Expected a domain expression");if(!Ri.includes(i[0]))throw Error(`Unknown domain constructor "${i[0]}`);let r=i[0];if(this.ctor=r,r==="OptArg"||r==="VarArg")throw Error(`Unexpected domain constructor "${r}" outside of FunctionOf`);if(this.params=i.slice(1).map(u=>u instanceof L?u.json:u),r==="FunctionOf"&&(this.base="Functions",e.strict&&ct(this)),r==="DictionaryOf"&&(this.base="Dictionaries"),r==="ListOf"&&(this.base="Lists"),r==="TupleOf"&&(this.base="Tuples"),r==="Covariant"||r==="Contravariant"||r==="Bivariant"||r==="Invariant"){let u=e.domain(i[1]);if(this.ctor=r,this.base=u.base,this.params=[u.json],i.length!==2)throw Error(`Invalid "${r}" in domain "${i}"`)}if(r==="Union"||r==="Intersection"){let u;if(r==="Union")for(let o of this.params)u=Qn(u,e.domain(o));else for(let o of this.params)u=At(u,e.domain(o));this.base=u.base}}get isCanonical(){return!0}get canonical(){return this}get isValid(){return!0}get json(){return this.ctor?[this.ctor,...this.params]:this.base}get hash(){return this._hash===void 0&&(this._hash=Ae(JSON.stringify(this.json))),this._hash}isCompatible(e,i="covariant"){let t=this.json,r=e instanceof n?e.json:e,u=Array.isArray(r)?r[0]:null;if(u){let o=r[1];if(u==="Covariant")return ye(t,o);if(u==="Contravariant")return ye(o,t);if(u==="Invariant")return!ye(o,t)&&!ye(t,o);if(u==="Bivariant")return ye(t,o)&&ye(o,t)}return i==="covariant"?ye(t,r):i==="contravariant"?ye(r,t):i==="bivariant"?ye(r,t)&&ye(t,r):!ye(r,t)&&!ye(t,r)}isEqual(e){return e instanceof n?this===e?!0:this.isCompatible(e,"invariant"):!1}isSame(e){return this.isEqual(e)}match(e,i){return hn(e)||(e=this.engine.box(e,{canonical:!1})),an(e)?{[ln(e)]:this}:e instanceof n&&this.isCompatible(e,"invariant")?{}:null}get head(){return"Domain"}get domain(){return this.engine.domain("Domains")}get isFunction(){return this.base==="Functions"}get isNumeric(){return this.isCompatible(this.engine.domain("Numbers"))}};function En(n){if(n instanceof Rn)return!0;if(n instanceof L&&(n=n.json),typeof n=="string")return fi(n);if(!Array.isArray(n)||n.length<=1)return!1;let e=n[0];return typeof e!="string"||!Ri.includes(e)?!1:e==="ListOf"||e==="OptArg"||e==="VarArg"?n.length===2&&En(n[1]):e==="FunctionOf"||e==="TupleOf"||e==="Intersection"||e==="Union"?n.slice(1).every(En):n.every(i=>i!==null)}function ye(n,e){let[i,t]=Sr([n],e);return!!(i&&t.length===0)}function Sr(n,e){let i=n.shift(),t=typeof e=="string"?e:null;if(t==="Anything")return[!0,n];let r=typeof i=="string"?i:null;if(r&&t)return r===t?[!0,n]:[He(r).includes(t),n];if(t){let o=i[0];return o==="FunctionOf"?[t==="Functions",n]:o==="DictionaryOf"?[t==="Dictionaries",n]:o==="ListOf"?[t==="Lists",n]:o==="TupleOf"?[t==="Tuples",n]:[!0,n]}let u=e[0];if(u==="FunctionOf"){if(r==="Functions")return[!0,n];if(r)return[!1,n];if(i[0]!=="FunctionOf")return[!1,n];if(i.length===1&&e.length===1)return[!0,n];if(!ye(i[i.length-1],e[e.length-1]))return[!1,n];let o=i.slice(1,-1),s=e.slice(1,-1);for(let a=0;a<=o.length-1;a++){if(s.length===0)return(Array.isArray(o[a])?o[a][0]:null)!=="OptArg"?[!1,n]:[!0,n];{let l=!1;if([l,s]=Sr(s,o[a]),!l)return[!1,n]}}return[s.length===0,n]}if(u==="Intersection")return[e.slice(1,-1).every(o=>ye(i,o)),n];if(u==="Union")return[e.slice(1,-1).some(o=>ye(i,o)),n];if(u==="OptArg")return r==="NothingDomain"?[!0,n]:Sr([i,...n],e[1]);if(u==="VarArg"){let o=e[1];if(!ye(i,o))return[!1,n];i=n.shift();let s=!0;for(;n.length>0&&s;)[s,n]=Sr(n,o),i=n.shift();return[!0,n]}if(u==="TupleOf"){if(!Array.isArray(i)||i[0]!=="TupleOf")return[!1,n];if(i.length>e.length)return[!1,n];for(let o=1;o<=e.length-1;o++)if(!i[o]||!ye(i[o],e[o]))return[!1,n];return[!0,n]}return console.error("Unexpected domain constructor "+u),[!1,n]}function Qn(n,e){if(n==null)return e;if(e==null)return n;let i=[n.base,...He(n.base)],t=[e.base,...He(e.base)];for(;!t.includes(i[0]);)i.shift();return n.engine.domain(i[0])}function At(n,e){return n===void 0?e:e===void 0||ye(n.base,e.base)?n:ye(e.base,n.base)?e:n.engine.Void}var va=he(De(),1);var Bt=class{constructor(e,i){this.terms=[];this.engine=e;for(let t of i)this.add(t)}sub(e){this.add(e,[-1,1])}add(e,i){i??(i=[1,1]);let[t,r]=Je(e);if(t=Y(t,i),Ze(t))return;if(r.head==="Add"){for(let o of r.ops)this.add(o,t);return}if(r.head==="Negate"){this.add(r.op1,Ce(t));return}let u=this.find(r);if(u>=0){this.terms[u].coef=dt(this.terms[u].coef,t);return}this.terms.push({coef:t,term:r})}find(e){return this.terms.findIndex(i=>i.term.isSame(e))}reduceNumbers({exact:e}={exact:!0}){let i=this.engine,t=this.terms;this.terms=[];let r=0,u=0,o=0,s=0,a=[0,1],l=i._BIGNUM_ZERO;for(let{coef:f,term:d}of t){if(d.isNaN){this.terms=[{term:i.NaN,coef:[1,1]}];return}if(d.isFinite===!1){d.isPositive?r++:u++;continue}if(d.numericValue!==null){let c=Da(d.numericValue,f);if(c!==null){U(c)?a=dt(a,c):c instanceof Ue?l=l.add(c):c instanceof va.default?(P(i)?l=l.add(c.re):o+=c.re,s+=c.im):P(i)?l=l.add(c):o+=c;continue}}this.terms.push({coef:f,term:d})}if(r>0&&u>0){this.terms=[{term:i.NaN,coef:[1,1]}];return}if(r>0){this.terms=[{term:i.PositiveInfinity,coef:[1,1]}];return}if(u>0){this.terms=[{term:i.NegativeInfinity,coef:[1,1]}];return}if(!e||!Number.isInteger(o)||!l.isInteger()||!Number.isInteger(s)){if(!l.isZero()&&P(i)){l=l.add(o),l=l.add(i.bignum(a[0]).div(i.bignum(a[1]))),this.terms.push({term:i.number(l),coef:[1,1]}),s!==0&&this.terms.push({term:i.number(i.complex(0,s)),coef:[1,1]});return}let f=o+l.toNumber()+Number(a[0])/Number(a[1]);s!==0?this.terms.push({term:i.number(i.complex(f,s)),coef:[1,1]}):f!==0&&this.terms.push({term:i.number(f),coef:[1,1]});return}l.isZero()||(l=l.add(o),o=0,Ze(a)||(l=l.add(i.bignum(a[0]).div(i.bignum(a[1]))),a=[0,1]),this.terms.push({coef:[1,1],term:i.number(l)})),s!==0?(Ze(a)||(o+=Number(a[0])/Number(a[1])),this.terms.push({coef:[1,1],term:i.number(i.complex(o,s))})):o!==0&&this.terms.push({coef:[1,1],term:i.number(o)}),Ze(a)||this.terms.push({coef:[1,1],term:i.number(a)})}asExpression(){let e=this.engine,i=this.terms.filter(({coef:t,term:r})=>!Ze(t)&&!r.isZero);if(i.length===0)return e.Zero;if(i.length===1){let{coef:t,term:r}=i[0];return te(t)?r:wi(t)?e.neg(r):e.mul(e.number(t),r)}return e.function("Add",i.map(({coef:t,term:r})=>e.mul(e.number(t),r)))}};function Mn(n,e){if(e.every(i=>i.isCanonical),e=e.filter(i=>i.numericValue===null||!i.isZero),e.length===0)return n.Zero;if(e.length===1&&!lr(e[0]))return e[0];if(e.length===2){let i=0,t=E(e[0]);if(t!==null&&t!==0?i=Tr(e[1]):(i=Tr(e[0]),i!==0&&e[1].numericValue!==null&&(t=E(e[1]))),t!==null&&i!==null&&i!==0)return n.number(n.complex(t,i))}return e.length===1?e[0]:n._fn("Add",Ju(e))}function _a(n,e){let i=null;for(let t of e){if(!t?.isNumeric)return null;i=Qn(i,t)}return i}function Ir(n,e){let i=new Bt(n,[]);for(let t of e){if(t=t.simplify(),t.isImaginary&&t.isInfinity)return n.ComplexInfinity;if(t.isNaN||t.symbol==="Undefined")return n.NaN;i.add(t)}return i.reduceNumbers({exact:!0}),i.asExpression()}function bd(n){let e=0;for(let i of n){let t=i.numericValue;if(typeof t=="number")e+=t;else return null}return e}function vt(n,e,i="evaluate"){if(i==="N"&&n.numericMode==="machine"){e=e.map(u=>u.N());let r=bd(e);if(r!==null)return n.number(r)}for(let r of e){if(r.isImaginary&&r.isInfinity)return n.ComplexInfinity;if(r.isNaN||r.symbol==="Undefined")return n.NaN;r.numericValue!==null&&!r.isExact&&(i="N")}i==="N"?e=e.map(r=>r.N()):e=e.map(r=>r.evaluate());let t=new Bt(n,e);return i==="N"?t.reduceNumbers():t.reduceNumbers({exact:!0}),t.asExpression()}function Sa(n,e,i){n.pushScope(),e??(e=n.error("missing"));var t=void 0;if(i&&i.ops&&i.ops[0]?.head==="Delimiter"){var r=pr(i);if(!r)return null;var u=[e.canonical];r.forEach(s=>{u.push(s)}),t=n._fn("Sum",u)}else{var o=Hn(i);t=o?n._fn("Sum",[e.canonical,o]):n._fn("Sum",[e.canonical])}return n.popScope(),t}function kr(n,e,i){let t=e[0],r=[];if(e){r=[];for(let m=1;m<e.length;m++)r.push(e[m])}let u=null;if(r?.length===0){let m=i==="simplify"?t.simplify():t.evaluate({numericMode:i==="N"});if(P(n)){let D=n.bignum(0);for(let h of Q(m)){let g=Ge(h);if(g===null){u=void 0;break}if(g.isFinite()===!1){D=g;break}D=D.add(g)}u===null&&(u=n.number(D))}else{let D=0;for(let h of Q(m)){let g=E(h);if(g===null){u=void 0;break}if(g===null||!Number.isFinite(g)){D=g;break}D+=g}u===null&&(u=n.number(D))}return u??void 0}let o=t,s=n.swapScope(o.scope);n.pushScope();var a=[];let l=[],f=[],d=[];r.forEach(m=>{let[D,h,g,A]=Jn(m.evaluate());D&&(n.declare(D,{holdUntil:"simplify",domain:"Numbers"}),a.push(D),l.push(h),f.push(g),d.push(A))}),o.bind();for(let m=0;m<a.length;m++){let D=a[m],h=l[m],g=f[m],A=d[m];if(h>=g||i==="simplify"&&g-h>=lt)return;if(i==="evaluate"&&g-h>=lt&&(i="N"),i==="simplify"){let B=[];for(let C=h;C<=g;C++)n.assign(D,C),B.push(o.simplify());u=n.add(...B).simplify()}}let c=[];if(a.length>1)for(let m=0;m<a.length-1;m++)c.length===0?c=Pi(gn(l[m],f[m]),gn(l[m+1],f[m+1])):c=Pi(c.map(D=>D[0]),gn(l[m+1],f[m+1]));else c=gn(l[0],f[0]).map(m=>[m]);if(i==="evaluate"){let m=[];for(let D of c){let h=a.map((g,A)=>(n.assign(g,D[A]),g));m.push(o.evaluate())}u=n.add(...m).evaluate()}for(let m=0;m<a.length;m++)n.assign(a[m],void 0);if(i==="N")for(let m=0;m<a.length;m++){let D=a[m],h=l[m],g=f[m],A=d[m];if(u===null&&A)if(P(n)){let B=n.bignum(0);for(let C=h;C<=g;C++){n.assign(D,C);let T=Ge(o.N());if(T===null){u=void 0;break}if(T.isFinite()===!1){B=T;break}B=B.add(T)}u===null&&(u=n.number(B))}else{let B=n.numericMode,C=n.precision;n.numericMode="machine";let T=0;for(let j=h;j<=g;j++){n.assign(D,j);let Z=E(o.N());if(Z===null){u=void 0;break}if(!Number.isFinite(Z)){T=Z;break}T+=Z}n.numericMode=B,n.precision=C,u===null&&(u=n.number(T))}else if(u===null){n.assign(D,1e3);let B=o.N();n.assign(D,999);let C=o.N(),T=E(n.div(B,C).N());if(T!==null&&Number.isFinite(T)&&Math.abs(T)>1)u=n.PositiveInfinity;else{let j=0,Z=n.numericMode,_e=n.precision;n.numericMode="machine";for(let ze=h;ze<=g;ze++){n.assign(D,ze);let ke=E(o.N());if(ke===null){u=void 0;break}if(Math.abs(ke)<Number.EPSILON||!Number.isFinite(ke))break;j+=ke}n.numericMode=Z,n.precision=_e,u===null&&(u=n.number(j))}}}return n.popScope(),n.swapScope(s),u??void 0}function Tr(n){if(n.symbol==="ImaginaryUnit")return 1;let e=n.numericValue;if(e!==null&&e instanceof Na.default&&e.re===0)return e.im;if(n.head==="Negate")return-Tr(n.op1);if(n.head==="Multiply"&&n.nops===2){if(n.op1.symbol==="ImaginaryUnit")return E(n.op2)??0;if(n.op2.symbol==="ImaginaryUnit")return E(n.op1)??0}if(n.head==="Divide"){let i=Tr(n.op1),t=E(n.op2);return t===null?0:i/t}return 0}function bn(n,e){if(n.head==="Negate"&&e.head==="Negate")return bn(n.op1,e.op1);if(n.head==="Negate")return ce(bn(n.op1,e));if(e.head==="Negate")return ce(bn(n,e.op1));let i=n.engine;if(n.head==="Divide"&&e.head==="Divide"){let t=i.mul(n.op2,e.op2);return i.div(bn(n.op1,e.op1),t)}return n.head==="Divide"?i.div(bn(n.op1,e),n.op2):e.head==="Divide"?i.div(bn(n,e.op1),e.op2):n.head==="Add"?i.add(...n.ops.map(t=>bn(t,e))):e.head==="Add"?i.add(...e.ops.map(t=>bn(n,t))):i.mul(n,e)}function ji(n){return n.length===1?n[0]:n.length===2?bn(n[0],n[1]):bn(n[0],ji(n.slice(1)))}var Nt=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1]];function yd(n,e){for(;n>=Nt.length;){let i=Nt.length,t=[1],r=Nt[i-1];for(let u=1;u<i;u++)t[u]=r[u-1]+r[u];t[i]=1,Nt.push(t)}return Nt[n][e]}function Fd(n){let e=n.reduce((t,r)=>t+r,0),i=1;for(let t=0;t<n.length;t+=1)i*=yd(e,n[t]),e-=n[t];return i}function Ta(n,e){let i=[];if(n===1)return i.push([e]),i;for(let t=0;t<=e;t+=1)for(let r of Ta(n-1,e-t))i.push([t,...r]);return i}function Ia(n){if(n.head!=="Power")return null;let e=q(n.op2);if(e===null||e<0)return null;if(e===0)return n.engine.One;if(e===1)return sn(n.op1);let i=n.engine;if(n.op1.head==="Negate"){let o=e%2===0?1:-1,s=Ia(i._fn("Power",[n.op1.op1,n.op2]));return s===null?null:o>0?s:i.neg(s)}if(n.op1.head,n.op1.head!=="Add")return null;let t=n.op1.ops,r=Ta(t.length,e),u=[];for(let o of r){let s=[i.number(Fd(o))];for(let a=0;a<o.length;a+=1)o[a]!==0&&(o[a]===1?s.push(t[a]):s.push(i.pow(t[a],o[a])));u.push(i.mul(...s))}return i.add(...u)}function no(n){if(n.head&&n.ops){let e=n.ops.map(t=>no(t)??t),i=n.engine.box([n.head,...e]);return sn(i)??i}return null}function Cd(n){if(n.head!=="Divide")return null;let e=sn(n.op1);if(e===null)return null;let i=n.engine;return e.head==="Add"?i.add(...e.ops.map(t=>i.div(t,n.op2))):n.engine.div(e,n.op2)}function sn(n){if(!n)return null;let e=Cd(n);if(e!==null||n.head==="Multiply"&&(e=ji(n.ops),e!==null))return e;if(n.head==="Add"){let i=n.ops.map(t=>sn(t)??t);return Ir(n.engine,i)}return n.head==="Negate"&&(e=sn(n.op1),e!==null)?n.engine.neg(e):n.head==="Power"&&(e=Ia(n),e!==null)?e:null}var Ad=[{match:["Multiply","_x","__a"],replace:0,id:"ax",condition:({__a:n})=>!n.has("_x")},{match:["Add",["Divide","_a","_x"],"__b"],replace:1/0,condition:({_a:n,__b:e})=>!n.has("_x")&&!e.has("_x")},{match:["Add",["Multiply","_x","__a"],"__b"],replace:["Divide",["Negate","__b"],"__a"],condition:({__a:n,__b:e})=>!n.has("_x")&&!e.has("_x")},{match:["Add",["Multiply","_a",["Power","_x","_n"]],"__b"],replace:["Divide",["Power",["Negate","__b"],["Divide",1,"_n"]],"_a"],condition:({_a:n,__b:e,_n:i})=>!n.has("_x")&&!e.has("_x")&&!i.isZero},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Add",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],condition:({__a:n,__b:e,__c:i})=>!n.has("_x")&&!e.has("_x")&&!i.has("_x")},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Subtract",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],condition:({__a:n,__b:e,__c:i})=>!n.has("_x")&&!e.has("_x")&&!i.has("_x")},{match:["Add",["Multiply","__a",["Exp",["Multiply","__b","_x"]]],"__c"],replace:["Divide",["Ln",["Negate",["Divide","__c","__a"]]],"__b"],condition:({__a:n,__c:e},i)=>((!n.isZero&&i.div(e,n).isNegative)??!1)&&!n.has("_x")&&!e.has("_x")},{match:["Add",["Multiply","__a",["Exp","_x"]],"__c"],replace:["Ln",["Negate",["Divide","__c","__a"]]],condition:({__a:n,__c:e},i)=>((!n.isZero&&i.div(e,n).isNegative)??!1)&&!n.has("_x")&&!e.has("_x")}];function Ar(n,e){let i=n.engine;n.head==="Equal"&&(n=i.add(n.op1.canonical,i.neg(n.op2.canonical)).simplify());let t=i.cache("univariate-roots-rules",()=>li(i,Ad)),r=[n.subs({[e]:"_x"},{canonical:!1})],u=r.flatMap(o=>ht(o,t,{_x:i.symbol("_x")}));return u.length===0&&(r=r.flatMap(o=>ka(o)),u=r.flatMap(o=>ht(o,t,{_x:i.symbol(e)}))),u.length===0&&(r=r.flatMap(o=>sn(o.canonical)).filter(o=>o!==null),r=r.flatMap(o=>ka(o)),u=r.flatMap(o=>ht(o,t,{_x:i.symbol(e)}))),u.map(o=>o.evaluate().simplify())}var Bd=[{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Multiply","__a","_x"],"__b","__c"]},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Negate",["Multiply","__a","_x"]],["Negate","__b"],"__c"]},{match:["Multiply","__a",["Power","_b","_n"]],replace:"_b",condition:({__a:n,_b:e,_n:i})=>!n.has("_x")&&e.has("_x")&&!i.isZero&&!i.has("_x")},{match:["Multiply","__a",["Sqrt","_b"]],replace:["Multiply",["Square","_a"],"__b"],condition:({_b:n})=>n.has("_x")},{match:["Divide","_a","_b"],replace:"_a",condition:({_a:n,_b:e})=>n.has("_x")&&!e.isZero},{match:["Multiply","__a","_b"],replace:"_b",condition:({__a:n,_b:e})=>!n.has("_x")&&e.has("_x")},{match:["Add",["Ln","_a"],["Ln","_b"],"__c"],replace:["Add",["Ln",["Multiply","_a","_b"]],"__c"]},{match:["Multiply",["Exp","__a"],["Exp","__b"],"__c"],replace:["Multiply",["Exp",["Add","_a","_b"]],"__c"]},{match:["Ln","_a"],replace:["Subtract","_a",1],condition:({_a:n})=>n.has("_x")},{match:["Sin","_a"],replace:"_a",condition:({_a:n})=>n.has("_x")},{match:["Cos","_a"],replace:["Subtract","_a",["Divide","Pi",2]],condition:({_a:n})=>n.has("_x")},{match:["Tan","_a"],replace:"_a",condition:({_a:n})=>n.has("_x")},{match:["Add",["Sin","_a"],["Cos","_a"]],replace:1,condition:({_a:n})=>n.has("_x")},{match:["Subtract",["Square",["Sin","_a"]],["Square",["Cos","_a"]]],replace:["PlusMinus",["Sin","_a"],["Divide",["Sqrt",2],2]],condition:({_a:n})=>n.has("_x")}];function ka(n){let e=n.engine,i=e.cache("univariate-roots-rules",()=>li(e,Bd));return ht(n,i,{_x:e.symbol("_x")})}function wa(n){return n.head==="Element"?_d(n):n.head==="Equal"?vd(n):wu(n)?Nd(n):"not-a-predicate"}function vd(n){n.head;let e=n.unknowns;if(e.length===0){let r=n.evaluate();return r.symbol==="True"?"tautology":r.symbol==="False"?"contradiction":(n.canonical.evaluate(),"not-a-predicate")}let i=n.engine,t=n.op1.symbol;if(t&&!Td(i,t)&&!n.op2.has(t)){let r=n.op2.evaluate();if(!r.isValid)return"not-a-predicate";let u=i.lookupSymbol(t);return u?u.domain&&!r.domain?.isCompatible(u.domain)?"contradiction":(u.value=r,"ok"):(i.defineSymbol(t,{value:r,domain:r.domain}),"ok")}if(e.length===1){let r=e[0],u=Ar(n,r);u.length===0&&i.assumptions.set(i.box(["Equal",i.add(n.op1.canonical,i.neg(n.op2.canonical)).simplify(),0]),!0);let o=u.length===1?u[0]:i.box(["List",...u]),s=i.lookupSymbol(r);return s?s.domain&&!u.every(a=>!a.domain||o.domain?.isCompatible(a.domain))?"contradiction":(s.value=o,"ok"):(i.defineSymbol(r,{value:o,domain:o.domain}),"ok")}return i.assumptions.set(n,!0),"ok"}function Nd(n){let e=n.engine;if(n.op1.symbol&&!io(e,n.op1.symbol))return n.op2.evaluate().isZero?n.head==="Less"?e.defineSymbol(n.op1.symbol,{domain:e.domain("NegativeNumbers")}):n.head==="LessEqual"?e.defineSymbol(n.op1.symbol,{domain:e.domain("NonPositiveNumbers")}):n.head==="Greater"?e.defineSymbol(n.op1.symbol,{domain:e.domain("PositiveNumbers")}):n.head==="GreaterEqual"&&e.defineSymbol(n.op1.symbol,{domain:e.domain("NonNegativeNumbers")}):(e.defineSymbol(n.op1.symbol,{domain:e.domain("ExtendedRealNumbers")}),e.assumptions.set(n,!0)),"ok";let i="",t,r;if(n.head==="Less"?(t=n.op1,r=n.op2,i="<"):n.head==="LessEqual"?(t=n.op1,r=n.op2,i="<="):n.head==="Greater"?(t=n.op2,r=n.op1,i="<"):n.head==="GreaterEqual"&&(t=n.op2,r=n.op1,i="<="),!i)return"internal-error";let u=e.add(t.canonical,e.neg(r.canonical)).simplify(),o=e.box([i==="<"?"Less":"LessEqual",u,0]).evaluate();if(o.symbol==="True")return"tautology";if(o.symbol==="False")return"contradiction";let s=o.unknowns;return s.length===0?"not-a-predicate":(s.length===1&&(e.lookupSymbol(s[0])||e.defineSymbol(s[0],{domain:"ExtendedRealNumbers"})),o.head==="Less"||o.head,e.assumptions.set(o,!0),"ok")}function _d(n){n.head;let e=n.engine,i=Sd(n.op1);if(i.length===1){let r=e.domain(n.op2.evaluate().json);return r.isValid?(e.declare(i[0],r),"ok"):"not-a-predicate"}if(n.op1.symbol&&io(e,n.op1.symbol)){let r=e.domain(n.op2.evaluate().json);if(!r.isValid)return"not-a-predicate";e.context?.ids?.has(n.op1.symbol)||e.declare(n.op1.symbol,r);let u=e.lookupSymbol(n.op1.symbol);if(u)return u.domain&&!r.isCompatible(u.domain)?"contradiction":(u.domain=r,"ok");let o=e.lookupFunction(n.op1.symbol);return o?r.isCompatible(ar(e,o.signature))?"ok":"contradiction":"not-a-predicate"}if(i.length>0)return e.assumptions.set(n,!0),"ok";let t=n.evaluate();return t.symbol==="True"?"tautology":t.symbol==="False"?"contradiction":"not-a-predicate"}function io(n,e){return(n.lookupSymbol(e)??n.lookupFunction(e))!==void 0}function Sd(n){return n.symbols.filter(e=>!io(n.engine,e))}function Td(n,e){return n.lookupFunction(e)?!1:n.lookupSymbol(e)?.value!==void 0}var Or=he(De(),1);var Zi=class n extends L{constructor(i,t,r){r??(r={});super(i,r.metadata);this._value=new Map;let u=r.canonical??!0;if(t instanceof Map)for(let[o,s]of t)this._value.set(o,i.box(s,{canonical:u}));else for(let o of Object.keys(t))this._value.set(o,i.box(t[o],{canonical:u}));i._register(this)}bind(){for(let[i,t]of this._value)t.bind()}reset(){for(let[i,t]of this._value)t.reset()}get hash(){let i=Ae("Dictionary");for(let[t,r]of this._value)i^=Ae(t)^r.hash;return i}get complexity(){return 97}get head(){return"Dictionary"}get isPure(){return!1}getKey(i){return this._value.get(i)}hasKey(i){return this._value.has(i)}get keys(){return this._value.keys()}get keysCount(){return this._value.size}has(i){for(let[t,r]of this._value)if(r.has(i))return!0;return!1}get domain(){return this.engine.domain("Dictionaries")}get json(){if(this.engine.jsonSerializationOptions.shorthands.includes("dictionary")){let t={};for(let r of this._value.keys())t[r]=this._value.get(r).json;return{dict:t}}let i=[];for(let t of this._value.keys())i.push(this.engine._fn("KeyValuePair",[this.engine.string(t),this._value.get(t)]));return M(this.engine,"Dictionary",i,{latex:this._latex})}isSame(i){if(this===i)return!0;if(!(i instanceof n)||this._value.size!==i._value.size)return!1;for(let[t,r]of this._value){let u=i.getKey(t);if(!u||!r.isSame(u))return!1}return!0}match(i,t){if(hn(i)||(i=this.engine.box(i,{canonical:!1})),an(i))return{[ln(i)]:this};if(!(i instanceof n)||this._value.size!==i._value.size)return null;let r={};for(let[u,o]of this._value){let s=i.getKey(u);if(!s)return null;let a=o.match(s,t);if(a===null)return null;r={...r,...a}}return r}isEqual(i){if(this===i)return!0;if(!(i instanceof n)||!i.keys||this._value.size!==i._value.size)return!1;for(let[t,r]of this._value){let u=i.getKey(t);if(!u||!r.isEqual(u))return!1}return!0}evaluate(i){return this}get isCanonical(){return this._isCanonical}set isCanonical(i){this._isCanonical=i}get canonical(){return this.isCanonical?this:new n(this.engine,this._value,{canonical:!0})}simplify(i){return this}N(i){return this}replace(i,t){let r=0,u={};for(let o of this.keys){let s=this.getKey(o),a=s.replace(i,t);a!==null&&(r+=1),u[o]=a??s}return r===0?null:new n(this.engine,u)}subs(i,t){let r={};for(let u of this.keys)r[u]=this.getKey(u).subs(i,t);return new n(this.engine,r,t)}};var yn=class n extends L{constructor(e,i,t){super(e,t),this._string=i.normalize(),e._register(this)}get hash(){return Ae("String"+this._string)}get json(){return Ba(this.engine,this._string)}get head(){return"String"}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(e){}get domain(){return this.engine.Strings}get complexity(){return 19}get string(){return this._string}isEqual(e){return e.string===this._string}isSame(e){return e.string===this._string}match(e,i){return hn(e)||(e=this.engine.box(e,{canonical:!1})),an(e)?{[ln(e)]:this}:e instanceof n&&this._string===e._string?{}:null}};var oo=he(De(),1);function wr(n,e){switch(e){case"float64":case"float32":case"int32":case"uint8":return new to(n);case"complex128":case"complex64":return new uo(n);case"bool":case"string":case"expression":return new ro(n)}throw new Error(`Unknown dtype ${e}`)}var to=class{constructor(e){this.ce=e;this.one=1;this.zero=0;this.nan=NaN}cast(e,i){let t=this.ce;switch(i){case"float64":case"float32":case"int32":case"uint8":return e;case"complex128":case"complex64":return Array.isArray(e)?e.map(r=>t.complex(r)):this.ce.complex(e);case"bool":return Array.isArray(e)?e.map(r=>r!==0):e!==0;case"string":return Array.isArray(e)?e.map(r=>Number(r).toString()):Number(e).toString();case"expression":return Array.isArray(e)?e.map(r=>t.number(r)):t.number(e)}throw new Error(`Cannot cast ${e} to ${i}`)}expression(e){return this.ce.number(e)}isZero(e){return e===0}isOne(e){return e===1}equals(e,i){return e===i}add(e,i){return e+i}addn(...e){return e.reduce((i,t)=>i+t,0)}neg(e){return-e}sub(e,i){return e-i}mul(e,i){return e*i}muln(...e){return e.reduce((i,t)=>i*t,1)}div(e,i){return e/i}pow(e,i){return e**i}conjugate(e){return e}},ro=class{constructor(e){this.one=e.One,this.zero=e.Zero,this.nan=e.NaN,this.ce=e}cast(e,i){if(Array.isArray(e))return e.map(r=>this.cast(r,i));let t=e.value;switch(i){case"float64":case"float32":return typeof t=="number"?t:void 0;case"int32":return typeof t=="number"?Math.round(t):void 0;case"uint8":if(typeof t!="number")return;let r=Math.round(t);return r>=0&&r<=255?r:void 0;case"complex128":case"complex64":if(typeof t=="number")return this.ce.complex(t);let u=e.numericValue;return u instanceof oo.default?u:void 0;case"bool":return typeof t=="boolean"?t:void 0;case"string":return typeof t=="string"?t:void 0;case"expression":return e}throw new Error(`Cannot cast ${e} to ${i}`)}expression(e){return e}isZero(e){return e.isZero??!1}isOne(e){return e.isOne??!1}equals(e,i){return e.isEqual(i)}add(e,i){return this.ce.add(e,i)}addn(...e){return this.ce.add(...e)}neg(e){return this.ce.neg(e)}sub(e,i){return this.ce.add(e,this.ce.neg(i))}mul(e,i){return this.ce.mul(e,i)}muln(...e){return this.ce.mul(...e)}div(e,i){return this.ce.div(e,i)}pow(e,i){return this.ce.pow(e,i)}conjugate(e){return this.ce.box(["Conjugate",e])}},uo=class{constructor(e){this.ce=e,this.one=e.complex(1),this.zero=e.complex(0),this.nan=e.complex(NaN)}cast(e,i){if(Array.isArray(e))return e.map(t=>this.cast(t,i));switch(i){case"float64":return e.im===0?e.re:void 0;case"float32":return e.im===0?e.re:void 0;case"int32":return e.im===0?Math.round(e.re):void 0;case"uint8":if(e.im!==0)return;let t=Math.round(e.re);return t>=0&&t<=255?t:void 0;case"complex128":return e;case"complex64":return e;case"bool":return!(e.im===0&&e.re===0);case"string":return e.toString();case"expression":return this.ce.number(e)}throw new Error(`Cannot cast ${e} to ${i}`)}expression(e){return this.ce.number(e)}isZero(e){return e.isZero()}isOne(e){return e.re===1&&e.im===0}equals(e,i){return e.equals(i)}add(e,i){return e.add(i)}addn(...e){return e.reduce((i,t)=>i.add(t),this.zero)}neg(e){return e.neg()}sub(e,i){return e.sub(i)}mul(e,i){return e.mul(i)}muln(...e){return e.reduce((i,t)=>i.mul(t),this.one)}div(e,i){return e.div(i)}pow(e,i){return e.pow(i)}conjugate(e){return e.conjugate()}};function Mr(n,e){return n===e?n:n==="string"||e==="string"||n==="expression"||e==="expression"?"expression":n==="complex128"||e==="complex128"?"complex128":n==="complex64"||e==="complex64"?"complex64":n==="float64"||e==="float64"?"float64":n==="float32"||e==="float32"?"float32":n==="int32"||e==="int32"?"int32":n==="uint8"||e==="uint8"?"uint8":n==="bool"||e==="bool"?"bool":"expression"}function so(n){let e=n.value;if(typeof e=="number")return Number.isInteger(e)?e>=0&&e<=255?"uint8":"int32":"float64";let i=n.numericValue;return i!==null&&i instanceof oo.default?"complex128":n.string?"string":"expression"}var Xn=class n{constructor(e,i){this.ce=e;this.shape=i.shape,this.rank=this.shape.length,this._strides=Id(this.shape),this.field=wr(e,i.dtype)}static align(e,i){if(e.dtype===i.dtype)return[e,i];let t=Mr(e.dtype,i.dtype);return e.dtype===t?[e,i.upcast(t)]:[e.upcast(t),i]}static broadcast(e,i,t){if(!(t instanceof n))return i.map1(e,t);let[r,u]=n.align(i,t),o=r.data.map((s,a)=>e(s,u.data[a]));return Fn(r.ce,{dtype:r.dtype,shape:r.shape,data:o})}get expression(){let e=this.shape,i=this.rank,t=this.data,r=this._index.bind(this),u=this.field.expression.bind(this.field),o=s=>{if(s.length===i-1){let a=r(s),l=this.ce._fn("List",t.slice(a,a+e[i-1]).map(f=>u(f)));return l.isCanonical=l.ops.every(f=>f.isCanonical),l}else{let a=[];for(let f=0;f<=e[s.length]-1;f++)a.push(o([...s,f+1]));let l=this.ce._fn("List",a);return l.isCanonical=l.ops.every(f=>f.isCanonical),l}};return o([])}get array(){let e=this.shape,i=this.rank,t=this.data;if(i===1)return t;if(i===2){let[o,s]=e,a=new Array(o);for(let l=0;l<o;l++)a[l]=t.slice(l*s,(l+1)*s);return a}let r=this._index.bind(this),u=o=>{if(o.length===i-1){let s=r(o);return t.slice(s,s+e[i-1])}else{let s=[];for(let a=0;a<e[o.length];a++)s.push(u([...o,a+1]));return s}};return u([])}_index(e){let i=this._strides;return e.reduce((t,r,u)=>t+(r-1)*i[u],0)}get isSquare(){let e=this.shape;return e.length===2&&e[0]===e[1]}get isSymmetric(){if(!this.isSquare)return!1;let e=this.shape[0],i=this.data,t=this.field.equals.bind(this.field);for(let r=0;r<e;r++)for(let u=r+1;u<e;u++)if(!t(i[r*e+u],i[u*e+r]))return!1;return!0}get isSkewSymmetric(){if(!this.isSquare)return!1;let e=this.shape[0],i=this.data,t=this.field.equals.bind(this.field),r=this.field.neg.bind(this.field);for(let u=0;u<e;u++)for(let o=u+1;o<e;o++)if(!t(i[u*e+o],r(i[o*e+u])))return!1;return!0}get isUpperTriangular(){if(!this.isSquare)return!1;let e=this.shape[0],i=this.data,t=this.field.isZero.bind(this.field);for(let r=1;r<e;r++)for(let u=0;u<r;u++)if(t(i[r*e+u]))return!1;return!0}get isLowerTriangular(){if(!this.isSquare)return!1;let e=this.shape[0],i=this.data,t=this.field.isZero.bind(this.field);for(let r=0;r<e-1;r++)for(let u=r+1;u<e;u++)if(!t(i[r*e+u]))return!1;return!0}get isTriangular(){if(!this.isSquare)return!1;let e=this.shape[0],i=this.data,t=this.field.isZero.bind(this.field);for(let r=0;r<e;r++)for(let u=0;u<e;u++)if(r<u&&!t(i[r*e+u])||r>u&&!t(i[r*e+u]))return!1;return!0}get isDiagonal(){if(!this.isSquare)return!1;let e=this.shape[0],i=this.data,t=this.field.isZero.bind(this.field);for(let r=0;r<e;r++)for(let u=0;u<e;u++)if(r===u&&!t(i[r*e+u])||r!==u&&!t(i[r*e+u]))return!1;return!0}get isIdentity(){if(!this.isSquare)return!1;let[e,i]=this.shape,t=this.data,r=this.field.isOne.bind(this.field),u=this.field.isZero.bind(this.field);for(let o=0;o<i;o++)for(let s=0;s<i;s++)if(o===s&&!r(t[o*i+s])||o!==s&&!u(t[o*i+s]))return!1;return!0}get isZero(){let e=this.field.isZero.bind(this.field);return this.data.every(i=>e(i))}at(...e){let i=this.data.length;return this.data[this._index(e)%i]}diagonal(e,i){if(e??(e=1),i??(i=2),e===i||e<=0||e>this.shape.length||this.shape[e-1]!==this.shape[i-1])return;let t=new Array(this.shape[e-1]),r=this.data,u=this.shape[e-1];for(let o=0;o<u;o++)t[o]=r[o*u+o];return t}trace(e,i){if(this.rank!==2)return;let[t,r]=this.shape;if(t!==r)return;let u=this.data,o=new Array(t);for(let s=0;s<t;s++)o[s]=u[s*t+s];return this.field.addn(...o)}reshape(...e){return Fn(this.ce,{dtype:this.dtype,shape:e,data:this.data})}flatten(){return this.data}upcast(e){let i=this.field.cast(this.data,e);if(i===void 0)throw Error(`Cannot cast tensor to ${e}`);return Fn(this.ce,{dtype:e,shape:this.shape,data:i})}transpose(e,i,t){if(this.rank!==2)return;if(e??(e=1),i??(i=2),e===i)return this;if(e<=0||e>2||i<=0||i>2)return;let[r,u]=this.shape,o=this.data;t&&(o=o.map(f=>t(f)));let s=0,a=new Array(r*u),l=u;for(let f=0;f<u;f++)for(let d=0;d<r;d++)a[s++]=o[d*l+f];return Fn(this.ce,{dtype:this.dtype,shape:[u,r],data:a})}conjugateTranspose(e,i){let t=this.field.conjugate.bind(this.field);return this.transpose(e,i,t)}determinant(){if(this.rank!==2)return;let[e,i]=this.shape;if(e!==i)return;if(e===1)return this.data[0];let t=this.field.add.bind(this.field),r=this.field.mul.bind(this.field),u=this.field.neg.bind(this.field);if(e===2){let[h,g,A,B]=this.data;return t(r(h,B),u(r(g,A)))}let o=this.field.addn.bind(this.field),s=this.field.muln.bind(this.field);if(e===3){let[h,g,A,B,C,T,j,Z,_e]=this.data;return o([s(h,C,_e),s(g,T,j),s(A,B,Z),u(s(A,C,j)),u(s(g,B,_e)),u(s(h,T,Z))])}let a=this.shape[0],l=!1,f=this.field.div.bind(this.field),d=this.field.sub.bind(this.field),c=new Array(a).fill(0).map((h,g)=>g),m=[...this.data];for(let h=0;h<a;h++){let g=c[h-1];if(this.at(g,h)===0){let C;for(C=h+1;C<a;C++)if(this.at(c[C],h)!==0){g=c[C],c[C-1]=c[h-1],c[h-1]=g,l=!l;break}if(C===a)return this.at(g,h)}let A=this.at(g,h),B=h===0?1:this.at(c[h-2],h-2);for(let C=h+1;C<a;C++){let T=c[C-1];for(let j=h+1;j<a;j++)m[T][j]=f(d(r(m[T][j],A),r(m[T][h],m[g][j])),B)}}let D=m[c[a-1]][a-1];return l?this.field.neg(D):D}inverse(){if(this.rank!==2)return;let[e,i]=this.shape;if(e!==i)return;if(e===2){let[c,m,D,h]=this.data,g=this.determinant();if(g===void 0||this.field.isZero(g))return;let A=this.field.div.bind(this.field),B=this.field.neg.bind(this.field),C=[A(h,g),B(A(m,g)),B(A(D,g)),A(c,g)];return Fn(this.ce,{dtype:this.dtype,shape:[i,i],data:C})}let t=this.shape[0],r=this.field.div.bind(this.field),u=this.field.sub.bind(this.field),o=this.field.mul.bind(this.field),s=this.array,a=new Array(t).fill(0).map((c,m)=>{let D=new Array(t).fill(0);return D[m]=1,D}),l=s.map((c,m)=>[...c,...a[m]]),f=new Array(t).fill(0).map((c,m)=>m);for(let c=0;c<t;c++){let m=f[c-1];if(this.at(m,c)===0){let g;for(g=c+1;g<t;g++)if(this.at(f[g],c)!==0){m=f[g],f[g-1]=f[c-1],f[c-1]=m;break}if(g===t)return}let D=this.at(m,c),h=c===0?1:this.at(f[c-2],c-2);for(let g=c+1;g<t;g++){let A=f[g-1];for(let B=c+1;B<t*2;B++)l[A][B]=u(l[A][B],o(r(o(l[A][c],l[m][B]),D),h))}}for(let c=t-1;c>=0;c--){let m=l[f[c],c];for(let D=0;D<c;D++){let h=f[D];for(let g=t;g<t*2;g++)l[h][g]=u(l[h][g],o(r(o(l[h][c],l[c][g]),m),m))}for(let D=t;D<t*2;D++)l[c][D]=r(l[c][D],m)}let d=l.map(c=>c.slice(t));return Fn(this.ce,{dtype:this.dtype,shape:[i,i],data:d})}pseudoInverse(){}adjugateMatrix(){}minor(e,i){}map1(e,i){return Fn(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map(t=>e(t,i))})}map2(e,i){let t=i.data;return Fn(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map((r,u)=>e(r,t[u]))})}add(e){return n.broadcast(this.field.add.bind(this.field),this,e)}subtract(e){return n.broadcast(this.field.sub.bind(this.field),this,e)}multiply(e){return n.broadcast(this.field.mul.bind(this.field),this,e)}divide(e){return n.broadcast(this.field.div.bind(this.field),this,e)}power(e){return n.broadcast(this.field.pow.bind(this.field),this,e)}equals(e){if(this.rank!==e.rank||!this.shape.every((u,o)=>u===e.shape[o]))return!1;let i=this.field.equals.bind(this.field),t=this.field.cast.bind(this.field),r=this.dtype;return this.dtype!==e.dtype?!!this.data.every((u,o)=>i(u,t(e.data[o],r))):this.data.every((u,o)=>i(u,e.data[o]))}};function Id(n){let e=new Array(n.length);for(let i=n.length-1,t=1;i>=0;i--)e[i]=t,t*=n[i];return e}var ao=class extends Xn{constructor(i,t){super(i,t);this.dtype="float64";this.data=t.data}get isZero(){return this.data.every(i=>i===0)}},lo=class extends Xn{constructor(i,t){super(i,t);this.dtype="complex128";this.data=t.data}},fo=class extends Xn{constructor(i,t){super(i,t);this.dtype="bool";this.data=t.data}},co=class extends Xn{constructor(i,t){super(i,t);this.dtype="expression";this.data=t.data}};function Fn(n,e){let i=e.dtype;return i==="float64"||i==="float32"||i==="uint8"||i==="int32"?new ao(n,e):i==="bool"?new fo(n,e):i==="complex64"||i==="complex128"?new lo(n,e):new co(n,e)}var _t=class n extends L{constructor(e,i,t){t??(t={}),t.canonical??(t.canonical=!0),super(e,t.metadata),i instanceof Xn?this._tensor=i:(this._head=i.head??"List",this._ops=t.canonical?e.canonical(i.ops):i.ops,this._expression=new X(e,this._head,this._ops,{canonical:t.canonical})),e._register(this)}get expression(){return this._expression??(this._expression=this._tensor.expression),this._expression}get tensor(){if(this._tensor===void 0){this._head,this._ops;let e=kd(this._head,this._ops);if(e===void 0)throw new Error("Invalid tensor");this._tensor=Fn(this.engine,e)}return this._tensor}get baseDefinition(){return this.expression.baseDefinition}get functionDefinition(){return this.expression.functionDefinition}bind(){this.expression.bind()}reset(){}get hash(){return Ae("BoxedTensor")}get canonical(){return this.isCanonical?this:new n(this.engine,{head:this._head,ops:this._ops},{canonical:!0})}get isCanonical(){return this._tensor?!0:this._expression.isCanonical}set isCanonical(e){this._tensor||(this.expression.isCanonical=e)}get isPure(){return this._tensor?!0:this.expression.isPure}get isValid(){return this._tensor?!0:this.expression.isValid}get complexity(){return 97}get head(){return this._tensor?"List":this._head}get nops(){return this._tensor?this._tensor.shape[0]:this.expression.nops}get ops(){return this.expression.ops}get op1(){if(this._tensor){let e=this._tensor.data;return e.length===0?this.engine.Nothing:this.engine.box(e[0])}return this.expression.op1}get op2(){if(this._tensor){let e=this._tensor.data;return e.length<2?this.engine.Nothing:this.engine.box(e[1])}return this.expression.op2}get op3(){if(this._tensor){let e=this._tensor.data;return e.length<3?this.engine.Nothing:this.engine.box(e[2])}return this.expression.op3}get shape(){return this.tensor.shape}get rank(){return this.tensor.rank}get domain(){return this._tensor?this.engine.domain("Lists"):this.expression.domain}get json(){return this.expression.json}get rawJson(){return this.expression.rawJson}isSame(e){return this===e?!0:e instanceof n?this.tensor.equals(e.tensor):this.expression.isSame(e)}isEqual(e){return this===e?!0:e instanceof n?this.tensor.equals(e.tensor):this.expression.isEqual(e)}match(e,i){return hn(e)||(e=this.engine.box(e,{canonical:!1})),an(e)?{[ln(e)]:this}:this.expression.match(e,i)}evaluate(e){return this._tensor?this:this.expression.evaluate(e)}simplify(e){return this._tensor?this:this.expression.simplify(e)}N(e){return this._tensor?this:this.expression.N(e)}};function Ve(n){return n instanceof _t}function mo(n,e){let i,t=[],r=!0,u=(o,s=0)=>{if(o.length!==0){o.length>1&&t[s]!==void 0?r=r&&t[s]===o.length:t[s]=Math.max(t[s]??0,o.length);for(let a of o)if(a.head===n?u(a.ops,s+1):i===void 0?i=so(a):i=Mr(i,so(a)),!r)return}};if(u(e),!!r)return{shape:t,dtype:i}}function kd(n,e){let{shape:i,dtype:t}=mo(n,e)??{shape:[],dtype:void 0};if(t===void 0)return;let r=!0,u=[],o=wr(e[0].engine,"expression"),s=o.cast.bind(o),a=l=>{for(let f of l)if(f.head===n)a(f.ops);else{let d=s(f,t);if(d===void 0){r=!1;return}u.push(d)}};if(a(e),!!r)return{shape:i,data:u,dtype:t}}function St(n){return n[Math.floor(Math.random()*n.length)]}function Ma(n,e){if(n==="Add"||n==="Multiply"){let i=[],t=1+Math.floor(Math.random()*12);for(;t>0;)i.push(Cn(e+1)),t-=1;return[n,...i]}return n==="Divide"||n==="Power"?[n,Cn(e+1),Cn(e+1)]:n==="Root"?[n,Cn(e+1),Cn(10)]:n==="trig"?wd():[n,Cn(e+1)]}function wd(){return[St(["Cos","Sin","Tan","Sinh","Arccos","Arsinh"]),St(["Pi","-1","0","1",["Divide","Pi",-5],["Multiply",-2,["Divide","Pi",11]],["Multiply","Half","Pi"],["Multiply",5,"Pi"],["Multiply",12,"Pi"],["Divide","Pi",5],["Divide","Pi",9],["Multiply",5,["Divide","Pi",9]],["Multiply",2,["Divide","Pi",11]],["Multiply",2,["Divide","Pi",3]]])]}function Cn(n){if(n??(n=1),n===1){let e=St([["Sqrt",["Multiply",6,["Sum",["Divide",1,["Power","n",2]],["Triple",["Hold","n"],1,{num:"+Infinity"}]]]],"Add","Add","Add","Add","Add","Multiply","Multiply","Multiply","Multiply","Divide","Divide","Divide","Root","Sqrt","Subtract","Negate","trig"]);return typeof e=="string"?Ma(e,1):e}if(n===2){let e=Math.random();if(e>.75)return Cn(1);if(e>.5)return Cn(3);let i=St(["Multiply","Multiply","Add","Power","trig","Ln","Exp"]);return Ma(i,2)}return St([-12345e-9,-2,-2,-2,-3,-5,-6,-12,-1654e-60,0,0,12345e-8,1654e-60,1,2,2,2,2,3,3,5,5,6,6,1234.5678,5678.1234,10,15,18,30,60,1234e54,"123456789.12345678912345e200","987654321.12345678912345",["Rational",-6,10],["Rational",-12,15],["Rational",-15,12],["Rational",3,5],["Rational",12,15],["Rational",15,12],"ExponentialE",["Sqrt",3],["Sqrt",5],["Sqrt",15],["Sqrt",25],["Complex",-1.1,1.1],["Complex",4,5],"x","x","x","x",["Add","x",1],["Divide","x",3],["Square","x"],["Power","x",3],["Power","x",4],["Subtract","x",1],["Add","x",1],"Pi"])}var Oa=[{Nothing:{domain:"NothingDomain"}},{InvisibleOperator:{complexity:9e3,hold:"all",signature:{restParam:"Anything",result:(n,e)=>e.length===0?n.domain("NothingDomain"):e.length===1?e[0].domain:n.Anything,canonical:po}},Sequence:{hold:"all",signature:{restParam:"Anything",result:(n,e)=>e.length===0?n.domain("NothingDomain"):e.length===1?e[0].domain:n.Anything,canonical:(n,e)=>{let i=fe(ue(e));return i.length===0?n._fn("Sequence",[]):i.length===1?i[0]:n._fn("Sequence",i)}}},Delimiter:{complexity:9e3,hold:"all",signature:{params:["Anything"],optParams:["Strings"],result:(n,e)=>e[0].domain,canonical:(n,e)=>{if(e.length===0)return n._fn("Tuple",[]);let i=e[0];return i.head==="Sequence"?i=n._fn("Sequence",n.canonical(i.ops)):i=i.canonical,i.head==="Sequence"&&i.ops.length===1&&(i=i.ops[0]),e=[i,...e.slice(1)],e.length===1?n._fn("Delimiter",e):e.length>2?n._fn("Delimiter",Be(n,e,2)):(e[1].string?.length??0)>3?n._fn("Delimiter",[e[0],n.error("invalid-delimiter",e[1])]):n._fn("Delimiter",[e[0],Le(n,e[1],"Strings")])},evaluate:(n,e)=>{if(e.length===0)return n.Nothing;let i=e[0];return(i.head==="Sequence"||i.head==="Delimiter")&&(e=ue(e[0].ops)),e.length===1?e[0].evaluate():n._fn("Tuple",e.map(t=>t.evaluate()))},N:(n,e)=>{if(e.length===0)return n.Nothing;let i=e[0];return(i.head==="Sequence"||i.head==="Delimiter")&&(e=ue(e[0].ops)),e.length===1?e[0].N():n._fn("Tuple",e.map(t=>t.N()))}}},Error:{hold:"all",complexity:500,signature:{domain:["FunctionOf","Anything",["OptArg","Anything"],"Void"],canonical:(n,e)=>n._fn("Error",e)}},ErrorCode:{complexity:500,hold:"all",signature:{domain:["FunctionOf","Strings",["VarArg","Anything"],"Anything"],canonical:(n,e)=>{let i=Le(n,e[0],n.Strings).string;return i==="incompatible-domain"?n._fn("ErrorCode",[n.string(i),e[1],e[2]]):n._fn("ErrorCode",e)}}},Hold:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(n,e)=>{let i=e[0];return i.symbol?n.domain("Symbols"):i.string?n.domain("Strings"):i.head==="Numbers"?n.domain("Numbers"):i.domain},canonical:(n,e)=>e.length!==1?null:n.hold(e[0]),evaluate:(n,e)=>e[0]}},HorizontalSpacing:{signature:{domain:"Functions",canonical:(n,e)=>e.length===2?e[0].canonical:n.box(["Sequence"])}},Style:{complexity:9e3,inert:!0,signature:{domain:["FunctionOf","Anything",["OptArg","Dictionaries"],"Anything"]}}},{About:{signature:{domain:"Functions"}},Head:{hold:"all",signature:{domain:"Functions",canonical:(n,e)=>{if(e.length!==1)return null;let i=e[0];return i.head?n.box(i.head):n._fn("Head",fe(e))},evaluate:(n,e)=>{let i=e[0];return typeof i?.head=="string"?n.symbol(i.head):i?.head??n.Nothing}}},Tail:{hold:"all",signature:{domain:"Functions",canonical:(n,e)=>{if(e.length!==1)return null;let i=e[0];return i.ops?n._fn("Sequence",i.ops):n._fn("Tail",fe(e))},evaluate:(n,e)=>{let i=e[0];return i?.ops?n.box(["Sequence",...i.ops]):n.box(["Sequence"])}}},Identity:{signature:{domain:["FunctionOf","Anything","Anything"],result:(n,e)=>e[0].domain,evaluate:(n,e)=>e[0]}}},{Apply:{signature:{domain:"Functions",canonical:(n,e)=>e[0].symbol?n.box([e[0].symbol,...e.slice(1)]):n._fn("Apply",e),evaluate:(n,e)=>di(e[0],e.slice(1))}},Assign:{hold:"all",pure:!1,signature:{domain:["FunctionOf","Anything","Anything","Anything"],canonical:(n,e)=>{if(e.length!==2)return null;let i=e[0];if(!i.symbol)return null;let t=e[1];return n._fn("Assign",[i,t])},evaluate:(n,e)=>{let i=e[0],t=e[1];if(!i.symbol)return n.Nothing;let r=t.evaluate();return n.assign(i.symbol,r),r}}},Assume:{hold:"all",pure:!1,signature:{domain:["FunctionOf","Anything","Anything"],evaluate:(n,e)=>n.string(n.assume(e[0]))}},Declare:{hold:"all",pure:!1,signature:{domain:["FunctionOf","Symbols","Anything"],canonical:(n,e)=>{if(e.length!==2)return null;let i=e[0],t=e[1];return i.symbol?t.symbol?n._fn("Declare",e):n._fn("Declare",[i,n._fn("Hold",[t])]):null},evaluate:(n,e)=>{let i=e[0],t=e[1];if(!i.symbol)return n.Nothing;let r=t.evaluate();if(En(r))return n.declare(i.symbol,r),r}}},Domain:{signature:{domain:["FunctionOf","Anything","Domains"],evaluate:(n,e)=>e[0].domain}},Evaluate:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(n,e)=>e[0].domain,canonical:(n,e)=>n._fn("Evaluate",Be(n,e,1)),evaluate:(n,e)=>e[0].evaluate()}},Function:{complexity:9876,hold:"all",signature:{domain:["FunctionOf","Anything",["VarArg","Symbols"],"Functions"],canonical:(n,e)=>e.length===0?n.box(["Sequence"]):(e.length===1?zu(e[0]):n._fn("Function",e))??null,evaluate:(n,e)=>{}}},Simplify:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(n,e)=>e[0].domain,canonical:(n,e)=>n._fn("Simplify",Be(n,e,1)),evaluate:(n,e)=>e[0].simplify()}},CanonicalForm:{complexity:8200,hold:"all",signature:{domain:["FunctionOf","Anything",["VarArg","Symbols"],"Anything"],canonical:(n,e)=>{if(e.length===1)return e[0].canonical;let i=e.slice(1).map(t=>t.symbol??t.string).filter(t=>t!=null);return An(e[0],i)}}},N:{hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],result:(n,e)=>e[0].domain,canonical:(n,e)=>{if(e.length!==1)return n._fn("N",Be(n,e,1));let i=e[0].head;if(i==="N")return e[0].canonical;if(i==="Integrate"){let[t,r,u]=Jn(e[0].op2);if(!t||r===void 0||u===void 0)return null;let o=e[0].op1;return n._fn("NIntegrate",[n.box(["Function",o,t]),n.number(r),n.number(u)])}return i==="Limit"?n._fn("NLimit",e[0].ops):n._fn("N",e)},evaluate:(n,e)=>e[0].N()}},Signatures:{signature:{domain:["FunctionOf","Symbols",["ListOf","Domains"]],canonical:(n,e)=>(e=Be(n,e,1),e[0].symbol?n._fn("Signatures",e):n._fn("Signatures",[n.domainError("Symbols",e[0].domain,e[0])])),evaluate:(n,e)=>{let i=e[0].symbol;if(!i)return n.Nothing;let t=n.lookupFunction(i);if(!t)return n.box(["List"]);let r=t.signature,u=[...r.params];return r.optParams.length>0&&u.push(n._fn("OptArg",r.optParams)),r.restParam&&u.push(n._fn("VarArg",[r.restParam])),typeof r.result=="function"?u.push(r.result(n,[])??n.symbol("Undefined")):u.push(r.result),n.box(["List",...u])}}},Subscript:{hold:"last",signature:{domain:["FunctionOf","Anything","Anything","Anything"],result:(n,e)=>{let i=e[0],t=e[1];if(i.string&&q(t)!==null)return n.domain("Integers");if(i.symbol){let r=i.evaluate()?.head;if(r)return n.lookupFunction(r)?.at?void 0:n.domain("Symbols")}},canonical:(n,e)=>{let i=e[0],t=e[1];if(i.string){let r=q(t);if(r!==null&&r>1&&r<=36){let[u,o]=Ti(i.string,r);return o?n.error(["unexpected-digit",{str:o[0]}],["LatexString",n.string(i.string)]):n.number(u)}}if(i.symbol){let r=i.evaluate()?.head;if(r&&n.lookupFunction(r)?.at)return n._fn("At",[i.canonical,t.canonical]);let u=t.string??t.symbol??q(t)?.toString();if(u)return n.symbol(i.symbol+"_"+u)}return t.head==="Sequence"&&n._fn("Subscript",[i,n._fn("List",t.ops)]),n._fn("Subscript",e)}}},Symbol:{complexity:500,description:"Construct a new symbol with a name formed by concatenating the arguments",threadable:!0,hold:"all",signature:{domain:["FunctionOf",["VarArg","Anything"],"Anything"],canonical:(n,e)=>{if(e.length===0)return n.Nothing;let i=e.map(t=>t.symbol??t.string??q(t)?.toString()??"").join("");return i.length>0?n.symbol(i):n.Nothing}}},Timing:{description:"`Timing(expr)` evaluates `expr` and return a `Pair` of the number of second elapsed for the evaluation, and the value of the evaluation",signature:{domain:["FunctionOf","Values",["OptArg","Integers"],["TupleOf","Values","Numbers"]],evaluate:(n,e)=>{if(e[1].symbol==="Nothing"){let a=globalThis.performance.now(),l=e[0].evaluate(),f=1e3*(globalThis.performance.now()-a);return n.pair(n.number(f),l)}let i=Math.max(3,Math.round(q(e[1])??3)),t=[],r;for(;i>0;){let a=globalThis.performance.now();r=e[0].evaluate(),t.push(1e3*(globalThis.performance.now()-a)),i-=1}let u=Math.max(...t),o=Math.min(...t);t=t.filter(a=>a>o&&a<u);let s=t.reduce((a,l)=>a+l,0);return s===0?n.pair(n.number(u),r):n.pair(n.number(s/t.length),r)}}}},{Wildcard:{signature:{params:["Symbols"],result:"Symbols",canonical:(n,e)=>e.length!==1?n.symbol("_"):n.symbol("_"+e[0].symbol)}},WildcardSequence:{signature:{params:["Symbols"],result:"Symbols",canonical:(n,e)=>e.length!==1?n.symbol("__"):n.symbol("__"+e[0].symbol)}},WildcardOptionalSequence:{signature:{params:["Symbols"],result:"Symbols",canonical:(n,e)=>e.length!==1?n.symbol("___"):n.symbol("___"+e[0].symbol)}}},{LatexString:{inert:!0,signature:{domain:["FunctionOf","Strings","Strings"]}},Latex:{signature:{domain:["FunctionOf",["VarArg","Anything"],"Strings"],evaluate:(n,e)=>n.box(["LatexString",n.string(F(e.map(i=>i.latex)))])}},Parse:{description:"Parse a LaTeX string and evaluate to a corresponding expression",signature:{domain:["FunctionOf","Anything","Anything"],evaluate:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0],t=i.string??i.head==="LatexString"?i.op1.string:"";return n.parse(t)??n.box(["Sequence"])}}}},{RandomExpression:{signature:{domain:"Functions",evaluate:(n,e)=>n.box(Cn())}}}];function po(n,e){if(e.length===0)return null;let i=e[0];if(e.length===1)return i.canonical;if(e.length===2){let t=E(i);if(t!==null&&Number.isInteger(t)){let u=e[1];if(u.head==="Divide"||u.head==="Rational"){let[o,s]=[E(u.op1),E(u.op2)];if(o!==null&&s!==null&&o>0&&o<=1e3&&s>1&&s<=1e3&&Number.isInteger(o)&&Number.isInteger(s))return n._fn("Add",[i.canonical,u.canonical])}}if(t!==null&&e[1].symbol==="ImaginaryUnit")return n.number(n.complex(0,t));let r=e[1];if(i.symbol&&r.head==="Delimiter"&&!n.lookupSymbol(i.symbol)){if(r.nops===0)return n.lookupFunction(i.symbol)||n.declare(i.symbol,"Functions"),n.box([i.symbol]);let u=r.op1.head==="Sequence"?r.op1.ops:[r.op1];if(u=fe(ue(u)),!n.lookupSymbol(i.symbol))return n.lookupFunction(i.symbol)||n.declare(i.symbol,"Functions"),n.function(i.symbol,u)}}return e=fe(ue(e)),e.every(t=>t.isValid&&(!t.domain||t.domain.isNumeric||lr(t)&&!t.string))?n._fn("Multiply",re(e,"Multiply")):n._fn("Tuple",e)}function An(n,e){if(e===!1)return n;if(e===!0)return n.canonical;typeof e=="string"&&(e=[e]);for(let i of e)switch(i){case"InvisibleOperator":n=Do(n);break;case"Number":n=Pa(n);break;case"Multiply":n=La(n);break;case"Add":n=qa(n);break;case"Power":n=Hi(n);break;case"Divide":n=Va(n);break;case"Flatten":n=Ra(n);break;case"Order":n=Wu(n,{recursive:!0});break;default:throw Error("Invalid canonical form")}return n}function Ra(n){if(!n.ops)return n;let e=n.ops.map(Ra);n.head==="Delimiter"&&(e=[Iu(n.engine,n.op1)]);let i=n.engine,t=n.head==="Add"||n.head==="Multiply";return t||i.lookupFunction(n.head)?.associative&&(t=!0),t&&typeof n.head=="string"&&(n=new X(i,n.head,re(e,n.head))),n}function Do(n){return n.ops?n.head==="InvisibleOperator"?po(n.engine,n.ops.map(Do))??n:new X(n.engine,n.head,n.ops.map(Do)):n}function Pa(n){return n.numericValue?n.canonical:n.ops?new X(n.engine,n.head,n.ops.map(Pa)):n}function La(n){if(!n.ops)return n;let e=n.ops.map(La);return n.head==="Multiply"?yt(n.engine,e):n.head==="Negate"?yt(n.engine,[e[0],n.engine.NegativeOne]):n}function qa(n){if(!n.ops)return n;let e=n.ops.map(qa);return n.head==="Add"?Mn(n.engine,e):n.head==="Subtract"?Mn(n.engine,[e[0],n.engine.neg(e[1])]):new X(n.engine,n.head,e)}function Hi(n){return n.ops?n.head==="Power"?wn(n.engine,Hi(n.op1),Hi(n.op2)):n.ops?new X(n.engine,n.head,n.ops.map(Hi)):n:n}function Va(n){return n.head==="Divide"?un(n.engine,Hi(n.op1),Hi(n.op2)):n.ops?new X(n.engine,n.head,n.ops.map(Va)):n}function Rr(n,e,i){if(typeof e=="number"||e instanceof y)return new me(n,e,i);if(i=i?{...i}:{},"canonical"in i||(i.canonical=!0),Array.isArray(e)&&e.length===2&&e[0]instanceof y&&e[1]instanceof y){if(!e[0].isInteger()||!e[1].isInteger())throw new Error("Array argument to `boxNumber()` should be two integers");e=[R(e[0].toString()),R(e[1].toString())]}if(U(e)){if(e.length!==2)throw new Error("Array argument to `boxNumber()` should be two integers or two bignums");let[r,u]=e;if(typeof r=="bigint"&&typeof u=="bigint")return r===u?u===BigInt(0)?n.NaN:n.One:r===BigInt(0)?n.Zero:u===BigInt(1)?n.number(r,i):u===BigInt(-1)?n.number(-r,i):r===BigInt(1)&&u===BigInt(2)?n.Half:new me(n,[r,u],i);if(typeof r!="number"||typeof u!="number")throw new Error("Array argument to `boxNumber()` should be two integers or two bignums");if(!isFinite(r)||!isFinite(u))return n.div(n.number(r,i),n.number(u,i));if(!Number.isInteger(r)||!Number.isInteger(u))throw new Error("Array argument to `boxNumber()` should be two integers");return u===r?u===0?n.NaN:n.One:r===0?n.Zero:u===1?n.number(r,i):u===-1?n.number(-r,i):r===1&&u===2?n.Half:new me(n,[r,u],i)}if(e instanceof Or.Complex)return e.isNaN()?n.NaN:e.isZero()?n.Zero:e.isInfinite()?n.ComplexInfinity:n.chop(e.im)===0?n.number(e.re,i):new me(n,e,i);let t="";if(typeof e=="string")t=e;else if(typeof e=="object"&&"num"in e){if(typeof e.num=="number")return n.number(e.num,i);if(typeof e.num!="string")throw new Error("MathJSON `num` property should be a string of digits");t=e.num}if(t){if(t=t.toLowerCase(),/[0-9][nd]$/.test(t)&&(t=t.slice(0,-1)),t=t.replace(/[\u0009-\u000d\u0020\u00a0]/g,""),t==="nan")return n.NaN;if(t==="infinity"||t==="+infinity")return n.PositiveInfinity;if(t==="-infinity")return n.NegativeInfinity;if(t==="0")return n.Zero;if(t==="1")return n.One;if(t==="-1")return n.NegativeOne;if(/\([0-9]+\)/.test(t)){let[r,u,o,s]=t.match(/(.+)\(([0-9]+)\)(.+)?$/)??[];t=u+o.repeat(Math.ceil(n.precision/o.length))+(s??"")}return Rr(n,n.bignum(t),i)}return null}function ho(n,e,i){if(e===null)return n.error("missing");if(typeof e=="object"&&e instanceof L)return e;if(e=O(e),typeof e=="string")return Ie(n,e,i);if(Array.isArray(e)){let t=e.map(r=>ho(n,r,i));return new X(n,t[0],t.slice(1))}if(typeof e=="object"){if("dict"in e)return new Zi(n,e.dict);if("fn"in e)return ho(n,e.fn,i);if("str"in e)return new yn(n,e.str);if("sym"in e)return Ie(n,e.sym,i);if("num"in e)return Ie(n,e.num,i)}return Ie(n,e,i)}function Tt(n,e,i,t){if(e==="Hold")return new X(n,"Hold",[ho(n,i[0],t)],{...t,canonical:!0});if(e==="Error"||e==="ErrorCode")return n._fn(e,i.map(r=>n.box(r,{canonical:!1})),t.metadata);if(e==="Domain")return n.domain(i[0],t.metadata);if(e==="Number"&&i.length===1)return Ie(n,i[0],t);if(e==="String")return i.length===0?new yn(n,"",t.metadata):new yn(n,i.map(r=>$a(r)??"").join(""),t.metadata);if(e==="Symbol"&&i.length>0)return n.symbol(i.map(r=>$a(r)??"").join(""),t);if(t.canonical&&(e==="Divide"||e==="Rational")&&i.length===2){if(i[0]instanceof L&&i[1]instanceof L){if(n.numericMode==="machine"){let[o,s]=[E(i[0]),E(i[1])];if(o!==null&&Number.isInteger(o)&&s!==null&&Number.isInteger(s))return n.number([o,s],t)}let[r,u]=[pt(i[0]),pt(i[1])];if(r!==null&&u!==null)return n.number([r,u],t)}else{let[r,u]=[Su(i[0]),Su(i[1])];if(r!==null&&u!==null)return n.number([r,u],t)}e="Divide"}if(t.canonical&&e==="Complex"){if(i.length===1){let r=Ie(n,i[0],t),u=E(r);return u!==null&&u!==0?n.number(n.complex(0,u),t):n.mul(r,n.I)}if(i.length===2){let r=Ie(n,i[0],t),u=Ie(n,i[1],t),o=E(r),s=E(u);return s!==null&&o!==null?s===0&&o===0?n.Zero:s!==null&&s!==0?n.number(n.complex(o,s),t):r:n.add(r,n.mul(u,n.I))}}if(t.canonical&&e==="Negate"&&i.length===1){let r=i[0];if(typeof r=="number")return n.number(-r,t);if(r instanceof y)return n.number(r.neg(),t);let u=n.box(r,t).numericValue;if(u!==null){if(typeof u=="number")return n.number(-u,t);if(u instanceof y)return n.number(u.neg(),t);if(u instanceof Or.Complex)return n.number(u.neg());if(U(u))return n.number(Ce(u))}}if(e==="Dictionary"){let r={};for(let u of i){let o=n.box(u,{canonical:t.canonical}),s=o.head;if(s==="KeyValuePair"||s==="Pair"||s==="Tuple"&&o.nops===2){let a=o.op1;if(a.isValid&&!a.isNothing){let l=o.op2,f=a.symbol??a.string;if(!f&&(a.numericValue!==null||a.string)){let d=typeof a.numericValue=="number"?a.numericValue:q(a);d&&Number.isFinite(d)&&Number.isInteger(d)&&(f=d.toString())}f&&(r[f]=l)}}}return new Zi(n,r,t)}if(e==="List"&&t.canonical){let r=i.map(s=>Ie(n,s)),{shape:u,dtype:o}=mo("List",r)??{};return o&&u?new _t(n,{head:e,ops:r}):n._fn(e,r)}return t.canonical?Cr(n,e,i,t.metadata):new X(n,e,i.map(r=>Ie(n,r,{canonical:!1})),t)}function Ie(n,e,i){if(e==null)return n._fn("Sequence",[]);if(e instanceof L)return An(e,i?.canonical??!0);i=i?{...i}:{},"canonical"in i||(i.canonical=!0);let t=i.canonical===!0;if(Array.isArray(e)){if(H(e))return Number.isInteger(e[0])&&Number.isInteger(e[1])?n.number(e):An(Tt(n,"Divide",e,{canonical:t}),i.canonical);if(K(e))return n.number(e);if(typeof e[0]=="string")return An(Tt(n,e[0],e.slice(1),{canonical:t}),i.canonical);Array.isArray(e[0]);let r=e.slice(1).map(o=>Ie(n,o,i)),u=Ie(n,e[0],{canonical:!1});return An(new X(n,u,r),i.canonical)}if(typeof e=="number"||e instanceof Or.Complex||e instanceof y)return n.number(e);if(typeof e=="string")return e.startsWith("'")&&e.endsWith("'")?new yn(n,e.slice(1,-1)):/^[+-]?[0-9]/.test(e)?n.number(e):fi(e)?n.domain(e):Ee(e)?n.symbol(e,{canonical:t}):n.error("invalid-identifier",{str:e});if(typeof e=="object"){let r={latex:e.latex,wikidata:e.wikidata};if("dict"in e)return An(new Zi(n,e.dict,{canonical:!0,metadata:r}),i.canonical);if("fn"in e)return typeof e.fn[0]=="string"?An(Tt(n,e.fn[0],e.fn.slice(1),{canonical:t}),i.canonical):An(new X(n,Ie(n,e.fn[0],i),e.fn.slice(1).map(u=>Ie(n,u,i)),{metadata:r}),i.canonical);if("str"in e)return new yn(n,e.str,r);if("sym"in e)return n.symbol(e.sym,{canonical:t});if("num"in e)return n.number(e,{canonical:t})}return n.symbol("Undefined")}function $a(n){if(typeof n=="string")return n;if(n instanceof L)return n.string??n.symbol??n.toString();if(typeof n=="object"){if("str"in n)return n.str;if("fn"in n&&n.fn[0]==="String"&&typeof n.fn[1]=="string")return n.fn[1]}return Array.isArray(n)&&n[0]==="String"&&typeof n[1]=="string"?n[1]:null}var xo=he(De(),1);var Ga=[{Abs:{wikidata:"Q3317982",threadable:!0,idempotent:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","NonNegativeNumbers"],simplify:(n,e)=>go(n,e[0],"simplify"),evaluate:(n,e)=>go(n,e[0],"evaluate"),N:(n,e)=>go(n,e[0],"N")}},Add:{wikidata:"Q32043",associative:!0,commutative:!0,threadable:!0,idempotent:!0,complexity:1300,hold:"all",signature:{domain:"NumericFunctions",result:(n,e)=>_a(n,e.map(i=>i.domain)),simplify:(n,e)=>Ir(n,e.map(i=>i.simplify())),evaluate:(n,e)=>vt(n,e.map(i=>i.evaluate())),N:(n,e)=>vt(n,e.map(i=>i.N()),"N")}},Ceil:{description:"Rounds a number up to the next largest integer",complexity:1250,threadable:!0,signature:{domain:["FunctionOf","Numbers","Integers"],evaluate:(n,e)=>ne(e[0],Math.ceil,i=>i.ceil(),i=>i.ceil(0))}},Chop:{associative:!0,threadable:!0,idempotent:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>ne(e[0],i=>n.chop(i),i=>n.chop(i),i=>n.chop(i))}},Divide:{wikidata:"Q1226939",complexity:2500,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],canonical:(n,e)=>{if(e=Pe(n,e,2),e.length!==2)return n._fn("Divide",e);let[i,t]=e;return n.div(i,t)},simplify:(n,e)=>br(n,e[0],e[1]),evaluate:(n,e)=>yr(n,e[0],e[1])}},Exp:{wikidata:"Q168698",threadable:!0,complexity:3500,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(n,e)=>(e=Pe(n,e,1),e.length!==1?n._fn("Power",[n.E,...e]):n.pow(n.E,e[0]))}},Factorial:{description:"Factorial Function",wikidata:"Q120976",threadable:!0,complexity:9e3,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(n,e)=>{let i=e[0];return i instanceof me&&i.isNegative?n.neg(n._fn("Factorial",[n.neg(i)])):n._fn("Factorial",[i])},evaluate:(n,e)=>{let i=q(e[0]);if(i!==null&&i>=0)return P(n)?n.number(Lu(n,n.bignum(i))):n.number(ur(i));let t=e[0].numericValue;if(t!==null&&t instanceof xo.Complex)return n.number(t.add(1));let r=E(e[0]);if(r!==null)return n.number(ki(1+r))}}},Factorial2:{description:"Double Factorial Function",complexity:9e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=q(e[0]);if(i!==null)return P(n)?n.number(la(n,n.bignum(i))):n.number(Vs(i))}}},Floor:{wikidata:"Q56860783",complexity:1250,threadable:!0,signature:{domain:["FunctionOf","Numbers","ExtendedRealNumbers"],evaluate:(n,e)=>ne(e[0],Math.floor,i=>i.floor(),i=>i.floor(0))}},Gamma:{wikidata:"Q190573",complexity:8e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(n,e)=>ne(e[0],i=>ki(i),i=>Vu(n,i),i=>i)}},GammaLn:{complexity:8e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(n,e)=>ne(e[0],i=>ft(i),i=>qu(n,i),i=>i)}},Ln:{description:"Natural Logarithm",wikidata:"Q204037",complexity:4e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:Ua,evaluate:Ua,N:(n,e)=>ne(e[0],i=>i>=0?Math.log(i):n.complex(i).log(),i=>i.isNeg()?n.complex(i.toNumber()).log():i.ln(),i=>i.log())}},Log:{description:"Log(z, b = 10) = Logarithm of base b",wikidata:"Q11197",complexity:4100,threadable:!0,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers"],"Numbers"],canonical:(n,e)=>{if(e.length===1)return n._fn("Log",[Le(n,e[0],"Numbers")]);if(e=Pe(n,e,2),e.length!==2)return n._fn("Log",e);let[i,t]=e;return t.numericValue===10?n._fn("Log",[i]):n._fn("Log",[i,t])},N:(n,e)=>e[1]===void 0?ne(e[0],i=>i>=0?Math.log10(i):n.complex(i).log().div(Math.LN10),i=>i.isNeg()?n.complex(i.toNumber()).log().div(Math.LN10):y.log10(i),i=>i.log().div(Math.LN10)):jn(e[0],e[1],(i,t)=>Math.log(i)/Math.log(t),(i,t)=>i.log(t),(i,t)=>i.log().div(typeof t=="number"?Math.log(t):t.log()))}},Lb:{description:"Base-2 Logarithm",wikidata:"Q581168",complexity:4100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(n,e)=>ne(e[0],i=>i>=0?Math.log2(i):n.complex(i).log().div(Math.LN2),i=>i.isNeg()?y.log10(i):n.complex(i.toNumber()).log().div(Math.LN2),i=>i.log().div(Math.LN2))}},Lg:{description:"Base-10 Logarithm",wikidata:"Q966582",complexity:4100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],N:(n,e)=>ne(e[0],i=>i>=0?Math.log10(i):n.complex(i).log().div(Math.LN10),i=>i.isNeg()?n.complex(i.toNumber()).log().div(Math.LN10):y.log10(i),i=>i.log().div(Math.LN10))}},Mod:{description:"Modulo",wikidata:"Q1799665",complexity:2500,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],evaluate:(n,e)=>{if(e.length!==2)return;let[i,t]=e,r=i.value,u=t.value;if(typeof r=="number"&&typeof u=="number")return n.number((r%u+u)%u)}}},Multiply:{wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,complexity:2100,hold:"all",threadable:!0,signature:{domain:"NumericFunctions",simplify:(n,e)=>ga(n,e.map(i=>i.simplify())),evaluate:(n,e)=>Ft(n,e.map(i=>i.evaluate())),N:(n,e)=>Ft(n,e.map(i=>i.N()),"N")}},Negate:{description:"Additive Inverse",wikidata:"Q715358",complexity:2e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],result:(n,e)=>{let i=e[0].domain;if(!i?.base)return i;let t={PositiveNumbers:"NegativeNumbers",NonNegativeNumbers:"NonPositiveNumbers",NonPositiveNumbers:"NonNegativeNumbers",NegativeNumbers:"PositiveNumbers",PositiveIntegers:"NegativeIntegers",NonNegativeIntegers:"NonPositiveIntegers",NonPositiveIntegers:"NonNegativeIntegers",NegativeIntegers:"PositiveIntegers"}[i.base];return t?n.domain(t):i},canonical:(n,e)=>(e=Pe(n,e),e.length!==1?n._fn("Negate",e):n.neg(e[0])),simplify:(n,e)=>Er(n,e[0],"simplify"),evaluate:(n,e)=>Er(n,e[0],"evaluate"),N:(n,e)=>Er(n,e[0],"N"),sgn:(n,e)=>{let i=e[0].sgn;if(i!=null){if(i===0)return 0;if(i>0)return-1;if(i<0)return 1}}}},PlusMinus:{description:"Plus or Minus",wikidata:"Q120812",complexity:1200,involution:!0,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(n,e)=>{if(e.length===1)return n.box(["Pair",e[0],n.neg(e[0])])}}},Power:{wikidata:"Q33456",commutative:!1,threadable:!0,complexity:3500,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],canonical:(n,e)=>{if(e=Pe(n,e,2),e.length!==2)return n._fn("Power",e);let[i,t]=e;return i instanceof me&&i.isNegative?n.neg(n.pow(i,t)):n.pow(i,t)},simplify:(n,e)=>mi(n,e[0],e[1],"simplify"),evaluate:(n,e)=>mi(n,e[0],e[1],"evaluate"),N:(n,e)=>n.numericMode==="machine"&&typeof e[0].numericValue=="number"&&typeof e[1].numericValue=="number"?n.number(Math.pow(e[0].numericValue,e[1].numericValue)):mi(n,e[0],e[1],"N")}},Rational:{complexity:2400,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers"],"RationalNumbers"],canonical:(n,e)=>(e=fe(ue(e)),e.length===0?n._fn("Rational",[n.error("missing")]):e.length===1?n._fn("Rational",[Le(n,e[0],"ExtendedRealNumbers")]):(e=dr(n,e,["Integers","Integers"]),e.length!==2||!e[0].isValid||!e[1].isValid?n._fn("Rational",e):n.div(e[0],e[1]))),simplify:(n,e)=>{if(e.length===2)return br(n,e[0],e[1])},evaluate:(n,e)=>{if(e.length===2){let[t,r]=[q(e[0]),q(e[1])];return t!==null&&r!==null?n.number([t,r]):void 0}let i=E(e[0].N());if(i!==null)return n.number(Js(i))},N:(n,e)=>e.length===1?e[0]:jn(e[0],e[1],(i,t)=>i/t,(i,t)=>i.div(t),(i,t)=>i.div(t))}},Root:{complexity:3200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],canonical:(n,e)=>{e=Pe(n,e,2);let[i,t]=e;return e.length!==2||!i.isValid||!t.isValid?n._fn("Root",e):n.pow(i,n.inv(t))}}},Round:{complexity:1250,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>ne(e[0],Math.round,i=>i.round(),i=>i.round(0))}},Sign:{complexity:1200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Integers"],simplify:(n,e)=>{let i=e[0].sgn;if(i===0)return n.Zero;if(i===1)return n.One;if(i===-1)return n.NegativeOne},evaluate:(n,e)=>{let i=e[0].sgn;if(i===0)return n.Zero;if(i===1)return n.One;if(i===-1)return n.NegativeOne},N:(n,e)=>{let i=e[0].sgn;if(i===0)return n.Zero;if(i===1)return n.One;if(i===-1)return n.NegativeOne}}},Sqrt:{description:"Square Root",wikidata:"Q134237",complexity:3e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(n,e)=>(e=fe(ue(e)),e.length!==1?n._fn("Sqrt",e):n.pow(e[0],n.Half)),simplify:(n,e)=>Vi(n,e[0],"simplify"),evaluate:(n,e)=>Vi(n,e[0],"evaluate"),N:(n,e)=>Vi(n,e[0],"N")}},Square:{wikidata:"Q3075175",complexity:3100,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(n,e)=>(e=fe(ue(e)),e.length!==1?n._fn("Square",e):n._fn("Power",[e[0],n.number(2)]).canonical)}},Subtract:{wikidata:"Q40754",complexity:1350,threadable:!0,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers"],"Numbers"],canonical:(n,e)=>{if(e.length===1){let r=Le(n,e[0],"Numbers");if(r.isValid)return ce(r)}e=Pe(n,e,2);let[i,t]=e;return e.length!==2||!i.isValid||!t.isValid?n._fn("Subtract",e):Mn(n,re([i,ce(t)],"Add"))}}}},{e:{domain:"TranscendentalNumbers",constant:!0,holdUntil:"never",value:"ExponentialE"},i:{domain:"ImaginaryNumbers",constant:!0,holdUntil:"never",flags:{imaginary:!0},value:"ImaginaryUnit"},MachineEpsilon:{domain:"RealNumbers",holdUntil:"N",constant:!0,flags:{real:!0},value:{num:Number.EPSILON.toString()}},Half:{domain:"RationalNumbers",constant:!0,holdUntil:"evaluate",value:["Rational",1,2]},ImaginaryUnit:{domain:"ImaginaryNumbers",constant:!0,holdUntil:"evaluate",wikidata:"Q193796",flags:{imaginary:!0},value:["Complex",0,1]},ExponentialE:{domain:"TranscendentalNumbers",flags:{algebraic:!1,real:!0},wikidata:"Q82435",constant:!0,holdUntil:"N",value:n=>P(n)?n._BIGNUM_ONE.exp():Math.exp(1)},GoldenRatio:{domain:"AlgebraicNumbers",wikidata:"Q41690",constant:!0,flags:{algebraic:!0},holdUntil:"simplify",value:["Divide",["Add",1,["Sqrt",5]],2]},CatalanConstant:{domain:"RealNumbers",flags:{algebraic:void 0},wikidata:"Q855282",constant:!0,holdUntil:"N",value:{num:`0.91596559417721901505460351493238411077414937428167
                  21342664981196217630197762547694793565129261151062
                  48574422619196199579035898803325859059431594737481
                  15840699533202877331946051903872747816408786590902
                  47064841521630002287276409423882599577415088163974
                  70252482011560707644883807873370489900864775113225
                  99713434074854075532307685653357680958352602193823
                  23950800720680355761048235733942319149829836189977
                  06903640418086217941101917532743149978233976105512
                  24779530324875371878665828082360570225594194818097
                  53509711315712615804242723636439850017382875977976
                  53068370092980873887495610893659771940968726844441
                  66804621624339864838916280448281506273022742073884
                  31172218272190472255870531908685735423498539498309
                  91911596738846450861515249962423704374517773723517
                  75440708538464401321748392999947572446199754961975
                  87064007474870701490937678873045869979860644874974
                  64387206238513712392736304998503539223928787979063
                  36440323547845358519277777872709060830319943013323
                  16712476158709792455479119092126201854803963934243
                  `}},EulerGamma:{domain:"RealNumbers",flags:{algebraic:void 0},wikidata:"Q273023",holdUntil:"N",constant:!0,value:{num:`0.57721566490153286060651209008240243104215933593992359880576723488486772677766
          467093694706329174674951463144724980708248096050401448654283622417399764492353
          625350033374293733773767394279259525824709491600873520394816567085323315177661
          152862119950150798479374508570574002992135478614669402960432542151905877553526
          733139925401296742051375413954911168510280798423487758720503843109399736137255
          306088933126760017247953783675927135157722610273492913940798430103417771778088
          154957066107501016191663340152278935867965497252036212879226555953669628176388
          792726801324310104765059637039473949576389065729679296010090151251959509222435
          014093498712282479497471956469763185066761290638110518241974448678363808617494
          551698927923018773910729457815543160050021828440960537724342032854783670151773
          943987003023703395183286900015581939880427074115422278197165230110735658339673`}}},{PreIncrement:{signature:{domain:["FunctionOf","Numbers","Numbers"]}},PreDecrement:{signature:{domain:["FunctionOf","Numbers","Numbers"]}}},{GCD:{description:"Greatest Common Divisor",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Anything"],"Numbers"],evaluate:(n,e)=>za(n,e,"GCD")}},LCM:{description:"Least Common Multiple",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Anything"],"Numbers"],evaluate:(n,e)=>za(n,e,"LCM")}},Numerator:{description:"Numerator of an expression",complexity:1200,threadable:!0,hold:"all",signature:{domain:["FunctionOf","Anything","Numbers"],canonical:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0];if(i.head==="Rational"||i.head==="Divide")return i.op1;let t=J(i);return t!==void 0?n.number(t[0]):n._fn("Numerator",fe(e))},evaluate:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0];if(i.head==="Rational"||i.head==="Divide")return i.op1.evaluate();let t=J(i.evaluate());return t!==void 0?n.number(t[0]):n._fn("Numerator",e.map(r=>r.evaluate()))}}},Denominator:{description:"Denominator of an expression",complexity:1200,threadable:!0,hold:"all",signature:{domain:["FunctionOf","Anything","Numbers"],canonical:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0];if(i.head==="Rational"||i.head==="Divide")return i.op2;let t=J(i);return t!==void 0?n.number(t[1]):n._fn("Denominator",fe(e))},evaluate:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0];if(i.head==="Rational"||i.head==="Divide")return i.op2.evaluate();let t=J(i.evaluate());return t!==void 0?n.number(t[1]):n._fn("Denominator",e.map(r=>r.evaluate()))}}},NumeratorDenominator:{description:"Sequence of Numerator and Denominator of an expression",complexity:1200,threadable:!0,hold:"all",signature:{domain:["FunctionOf","Anything","Anything"],canonical:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0];if(i.head==="Rational"||i.head==="Divide")return n._fn("Sequence",i.ops);let t=J(i.evaluate());return t!==void 0?n._fn("Sequence",[n.number(t[0]),n.number(t[1])]):n._fn("NumeratorDenominator",e.map(r=>r.evaluate()))},evaluate:(n,e)=>{if(e.length===0)return n.box(["Sequence"]);let i=e[0];if(i.head==="Rational"||i.head==="Divide")return n._fn("Sequence",i.ops);let t=J(i);return t!==void 0?n._fn("Sequence",[n.number(t[0]),n.number(t[1])]):n._fn("NumeratorDenominator",fe(e))}}}},{Max:{description:"Maximum of two or more numbers",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(n,e)=>e.length===0?n.NegativeInfinity:e.length===1?e[0]:n.box(["Max",...e]),evaluate:(n,e)=>Pr(n,e,"Max")}},Min:{description:"Minimum of two or more numbers",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(n,e)=>e.length===0?n.PositiveInfinity:e.length===1?e[0]:n.box(["Min",...e]),evaluate:(n,e)=>Pr(n,e,"Min")}},Supremum:{description:"Like Max, but defined for open sets",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(n,e)=>e.length===0?n.NegativeInfinity:e.length===1?e[0]:n.box(["Min",...e]),evaluate:(n,e)=>Pr(n,e,"Supremum")}},Infimum:{description:"Like Min, but defined for open sets",complexity:1200,threadable:!1,signature:{domain:["FunctionOf",["VarArg","Values"],"Numbers"],simplify:(n,e)=>e.length===0?n.PositiveInfinity:e.length===1?e[0]:n.box(["Min",...e]),evaluate:(n,e)=>Pr(n,e,"Infimum")}},Product:{wikidata:"Q901718",complexity:1e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything",["OptArg","Tuples"],"Numbers"],canonical:(n,e)=>xa(n,e[0],e[1]),simplify:(n,e)=>Fr(n,e,"simplify"),evaluate:(n,e)=>Fr(n,e,"evaluate"),N:(n,e)=>Fr(n,e,"N")}},Sum:{wikidata:"Q218005",complexity:1e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf",["Union","Collections","Functions"],["OptArg","Tuples"],"Numbers"],canonical:(n,e)=>Sa(n,e[0],e[1]),simplify:(n,e)=>kr(n,e,"simplify"),evaluate:(n,e)=>kr(n,e,"evaluate"),N:(n,e)=>kr(n,e,"N")}}},{BaseForm:{description:"`BaseForm(expr, base=10)`",complexity:9e3,inert:!0,signature:{domain:["FunctionOf","Values",["OptArg","Integers"],"Values"],result:(n,e)=>e[0].domain}},FromDigits:{description:"`FromDigits(s, base=10)`       return an integer representation of the string `s` in base `base`.",signature:{domain:["FunctionOf","Strings",["OptArg","Anything"],"Integers"],evaluate:(n,e)=>{let i=e[0]?.string;if(!i)return n.domainError("Strings",e[0]?.domain,e[0]);if(i=i.trim(),i.startsWith("0x"))return n.number(parseInt(i.slice(2),16));if(i.startsWith("0b"))return n.number(parseInt(i.slice(2),2));let t=e[1]??n.Nothing;if(t.isNothing)return n.number(Number.parseInt(i,10));let r=E(t);if(r&&(!Number.isInteger(r)||r<2||r>36))return n.error(["unexpected-base",r],t);let[u,o]=Ti(i,t.string??t.symbol??10);return o?n.error(["unexpected-digit",{str:o[0]}],{str:o}):n.number(u)}}},IntegerString:{description:"`IntegerString(n, base=10)`       return a string representation of the integer `n` in base `base`.",threadable:!0,signature:{domain:["FunctionOf","Integers",["OptArg","Integers"],"Strings"],evaluate:(n,e)=>{let i=e[0],t=E(i)??NaN;if(Number.isNaN(t)||!Number.isInteger(t))return n.domainError("Integers",i.domain,i);let r=e[1]??n.Nothing;if(r.isNothing){let o=i.numericValue;return typeof o=="number"?n.string(Math.abs(o).toString()):o instanceof y?n.string(o.abs().toString()):n.string(Math.abs(Math.round(E(i)??NaN)).toString())}if(q(r)===null)return n.domainError("Integers",r.domain,r);let u=q(r);return u<2||u>36?n.error(["out-of-range",2,36,u],r):n.string(Math.abs(t).toString(u))}}}}];function go(n,e,i){if(i!=="simplify"){let t=e.numericValue;if(t!==null){if(typeof t=="number")return n.number(Math.abs(t));if(t instanceof y||t instanceof xo.Complex)return n.number(t.abs());if(H(t))return n.number(i==="N"?Math.abs(t[0]/t[1]):[Math.abs(t[0]),t[1]]);if(K(t)){let[r,u]=t;return n.number(i==="N"?n.bignum(r).div(n.bignum(u)).abs():[r>0?r:-r,u])}}}if(e.isNonNegative)return e;if(e.isNegative)return n.neg(e)}function ja(n,e){let i=n.engine,t=e==="Max"||e==="Supremum";if(n.head==="Interval"){let r=t?n.op2:n.op1;return!r.isNumber||r.numericValue===void 0?[void 0,[n]]:[r,[]]}if(n.head==="Range"){if(n.nops===1)n=t?n.op1:i.One;else if(!t)n=n.op1;else{let r=n.nops===2?1:E(n.op3);if(r===null||!isFinite(r))return[void 0,[n]];let[u,o]=[E(n.op1),E(n.op2)];if(u===null||o===null)return[void 0,[n]];let s=Math.floor((o-u)/r);n=i.number(u+r*s)}return[n,[]]}if(n.head==="Linspace")return n.nops===1?n=t?n.op1:i.One:t?n=n.op2:n=n.op1,[n,[]];if(Mi(n)){let r,u=[];for(let o of Q(n)){let[s,a]=ja(o,e);s&&(r?(t&&s.isGreater(r)||!t&&s.isLess(r))&&(r=s):r=s),u.push(...a)}return[r,u]}return!n.isNumber||n.numericValue===void 0?[void 0,[n]]:[n,[]]}function Pr(n,e,i){let t=i==="Max"||i==="Supremum";if(e.length===0)return t?n.NegativeInfinity:n.PositiveInfinity;let r,u=[];for(let o of e){let[s,a]=ja(o,i);s&&(r?(t&&s.isGreater(r)||!t&&s.isLess(r))&&(r=s):r=s),u.push(...a)}return u.length>0?n.box(r?[i,r,...u]:[i,...u]):r??(t?n.NegativeInfinity:n.PositiveInfinity)}function za(n,e,i){let t=i==="LCM"?rr:Tn,r=i==="LCM"?aa:Pu,u=[];if(P(n)){let s=null;for(let a of e)if(s===null)s=Ge(a),(s===null||!s.isInteger())&&u.push(a);else{let l=Ge(a);l&&l.isInteger()?s=r(s,l):u.push(a)}return u.length===0?s===null?n.One:n.number(s):s===null?n._fn(i,u):n._fn(i,[n.number(s),...u])}let o=null;for(let s of e)if(o===null)o=E(s),(o===null||!Number.isInteger(o))&&u.push(s);else{let a=E(s);a&&Number.isInteger(a)?o=t(o,a):u.push(s)}return u.length===0?o===null?n.One:n.number(o):o===null?n._fn(i,u):n._fn(i,[n.number(o),...u])}function Ua(n,e){let i=e[0];if(i.isZero)return n.NaN;if(i.isOne)return n.Zero;if(i.isNegativeOne&&ae(n))return n.mul(n.Pi,n.I);if(i.symbol==="ExponentialE")return n.One;if(i.head==="Power"&&i.op1.symbol==="ExporentialE")return i.op2;if(i.head==="Power"){let[t,r]=i.ops;return n.mul(r,n.box(["Ln",t]).simplify())}if(i.head==="Multiply"){let[t,r]=i.ops;return n.add(n.box(["Ln",t]).simplify(),n.box(["Ln",r]).simplify())}if(i.head==="Divide"){let[t,r]=i.ops;return n.add(n.box(["Ln",t]).simplify(),n.neg(n.box(["Ln",r]).simplify()))}}var Md={Sin:["Cos","_"],Cos:["Negate",["Sin","_"]],Tan:["Power",["Sec","_"],2],Sec:["Multiply",["Tan","_"],["Sec","_"]],Csc:["Multiply",["Negate",["Cot","_"]],["Csc","_"]],Cot:["Negate",["Power",["Csc","_"],2]],Arcsin:["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],Arccos:["Negate",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]]],Arctan:["Power",["Add",1,["Power","_",2]],-1],Arcsec:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccsc:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccot:["Negate",["Power",["Add",1,["Power","_",2]],-1]],Sinh:["Cosh","_"],Cosh:["Sinh","_"],Tanh:["Power",["Sech","_"],2],Sech:["Multiply",["Tanh","_"],"Sech"],Csch:["Multiply",["Coth","_"],"Csch"],Coth:["Negate",["Power",["Csch","_"],2]],Arcsinh:["Power",["Add",["Power","_",2],1],["Negate","Half"]],Arccosh:["Power",["Subtract",["Power","_",2],1],["Negate","Half"]],Arctanh:["Power",["Subtract",1,["Power","_",2]],-1],Arcsech:["Negate",["Power",["Multiply","2","Subtract",["Power","_",2]],["Negate","Half"]]],Arccsch:["Negate",["Power",["Multiply","2","Add",["Power","_",2]],["Negate","Half"]]],Arccoth:["Negate",["Power",["Subtract",1,["Power","_",2]],-1]],Ln:["Divide",1,"_"],Log:["Power",["Multiply","_",["Ln","10"]],-1],Sqrt:["Multiply",["Power","_",["Negate","Half"]],"Half"],Abs:["Piecewise",["Tuple",["Multiply","_",["Power","_",-1]],["Greater","_",0]]],Erf:["Multiply",["Divide","2",["Sqrt","Pi"]],["Exp",["Negate",["Square","_"]]]],Gamma:["Multiply",["Gamma","_"],["Digamma","_"]],Digamma:["Add",["Multiply",["Digamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Zeta:["Multiply",["Multiply",-1,["Zeta","_"]],["Digamma","_"]],PolyGamma:["Add",["Multiply",["PolyGamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Beta:["Multiply",["Add",["Multiply",["Beta","_"],["Digamma","_"]],["Multiply",["Power","_",-1],["Beta","_"]]],["Beta","_"]],Erfc:["Multiply",["Negate",["Erfc","_"]],["Exp",["Negate",["Power","_",2]]],["Power","_",-1]],LambertW:["Multiply",["Power","_",-1],["Multiply",["Add","_",["LambertW","_"]],["Add",["LambertW","_"],1]]],AiryAi:["Multiply",["AiryAi","_"],["AiryBi","_"]],AiryBi:["Multiply",["AiryAi","_"],["AiryBi","_"]],BesselJ:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselY:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselI:["Multiply",["BesselI","_"],["BesselK","_"]],BesselK:["Multiply",["BesselI","_"],["BesselK","_"]],FresnelS:["Multiply",["FresnelS","_"],["FresnelC","_"]],FresnelC:["Multiply",["FresnelS","_"],["FresnelC","_"]],Erfi:["Multiply",["Erfi","_"],["Erf","_"]]};function $e(n,e){let i=n.engine;if(!(n.string||n.keys)){if(n.numericValue!==null)return n.engine.Zero;if(n.symbol===e)return n.engine.One;if(n.symbol)return n.engine.Zero;if(n.head&&typeof n.head=="string"){if(n.head==="Negate"){let o=$e(n.op1,e);return o?i.neg(o):i.neg(i._fn("D",[n.op1,i.symbol(e)]))}if(n.head==="Add"){let o=n.ops.map(s=>$e(s,e));return o.some(s=>s===void 0)?void 0:i.add(...o)}if(n.head==="Multiply"){let o=n.ops.map((s,a)=>{let l=n.ops.slice();l.splice(a,1);let f=i.mul(...l),d=$e(s,e)??i._fn("D",[s,i.symbol(e)]);return i.mul(d,f)});return o.some(s=>s===void 0)?void 0:i.add(...o)}if(n.head==="Power"){let[o,s]=n.ops;if(o.symbol===e)return i.mul(s,i.pow(o,i.add(s,i.NegativeOne)));let a=o,l=s,f=$e(a,e)??i._fn("D",[a,i.symbol(e)]),d=$e(l,e)??i._fn("D",[l,i.symbol(e)]),c=i.box(["Ln",a]).evaluate(),m=i.mul(d,c),D=i.mul(l,f),h=i.div(D,a);return i.mul(n,i.add(m,h))}if(n.head==="Divide"){let[o,s]=n.ops,a=$e(o,e)??i._fn("D",[o,i.symbol(e)]),l=$e(s,e)??i._fn("D",[s,i.symbol(e)]);return i.div(i.add(i.mul(a,s),i.neg(i.mul(l,o))),i.pow(s,2))}let t=Md[n.head];if(!t){if(n.nops>1)return;let o=i._fn("Derivative",[i.symbol(n.head),i.One]);if(!o.isValid)return;let s=n.ops[0],a=$e(s,e)??i._fn("D",[s,i.symbol(e)]);return a.isValid?i.mul(i._fn("Apply",[o,s]),a):void 0}if(n.nops>1)return i._fn("D",[n,i.symbol(e)]);let r=n.ops[0],u=$e(r,e)??i._fn("D",[r,i.symbol(e)]);return i.mul(di(i.box(t),[r]),u)}}}var Za=[{Derivative:{hold:"all",threadable:!1,signature:{domain:["FunctionOf","Functions",["OptArg","Numbers"],"Functions"],canonical:(n,e)=>e[0].functionDefinition?$e(n._fn(e[0].canonical,[n.symbol("_")]),"_")?.canonical??n._fn("Derivative",e):n._fn("Derivative",e),simplify:(n,e)=>{let i=e[0].simplify();return e[1]?n._fn("Derivative",[i,e[1]]):n._fn("Derivative",[i])},evaluate:(n,e)=>{let i=e[0].evaluate();if(i.functionDefinition)return $e(n._fn(i,[n.symbol("_")]),"_")?.canonical??void 0;let t=$e(i,"_");if(t)return t.canonical}}},D:{hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything","Symbols",["VarArg","Symbols"],"Anything"],canonical:(n,e)=>{let i=e[0];if(!i)return null;n.pushScope();let t=e.slice(1);i.bind(),i=i.canonical;let r=n._fn("D",[i,...t]);return n.popScope(),r},evaluate:(n,e)=>{let i=e[0].canonical,t=n.swapScope(i.scope);i=i.evaluate();let r=e.slice(1);r.length===0&&(i=void 0);for(let u of r){if(!u.symbol){i=void 0;break}if(i=$e(i,u.symbol),i===void 0)break}return n.swapScope(t),i=i?.canonical,i?.head==="D"?i:i?.evaluate()}}},ND:{hold:"first",threadable:!1,signature:{domain:["FunctionOf","Anything","Numbers","Functions"],N:(n,e)=>{let i=e[1]?.value;if(typeof i!="number")return;let t=Gu(n.box(e[0]));return n.number(zs(t,i))}}},Integrate:{wikidata:"Q80091",hold:"all",threadable:!1,signature:{domain:["FunctionOf","Functions",["OptArg",["Union","Tuples","Symbols"]],"Numbers"],canonical:(n,e)=>{let i=e[1],t=null,r=null,u=null;i&&i.head!=="Tuple"&&i.head!=="Triple"&&i.head!=="Pair"&&i.head!=="Single"?t=i:i&&(t=i.ops?.[0]??null,r=i.ops?.[1]?.canonical??null,u=i.ops?.[2]?.canonical??null),t&&t.head==="Hold"&&(t=t.op1),t&&t.head==="ReleaseHold"&&(t=t.op1.evaluate()),t??(t=n.Nothing),t.symbol||(t=n.domainError("Symbols",t.domain,t)),r&&(r=Le(n,r,n.Numbers)),u&&(u=Le(n,u,n.Numbers)),r&&u?i=n.tuple([t,r,u]):u?i=n.tuple([t,n.NegativeInfinity,u]):r?i=n.tuple([t,r]):i=t;let o=e[0]??n.error("missing");return o=o.canonical,o.head==="Delimiter"&&o.op1.head==="Sequence"&&(o=o.op1.op1),n._fn("Integrate",[o,i])}}},NIntegrate:{hold:"first",threadable:!1,signature:{domain:["FunctionOf","Functions","Numbers","Numbers","Numbers"],evaluate:(n,e)=>{let i=n.numericMode,t=n.precision;n.numericMode="machine";let r=Gu(e[0]),[u,o]=e.slice(1).map(a=>a.value),s;return typeof u=="number"&&typeof o=="number"&&(s=n.number(Us(r,u,o))),n.numericMode=i,n.precision=t,s}}}},{Limit:{description:"Limit of a function",complexity:5e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything","Numbers",["OptArg","Numbers"],"Numbers"],N:(n,e)=>{let[i,t,r]=e,u=E(t.N());if(u===null)return;let o=ci(i);return n.number(ui(s=>{let a=o([n.number(s)])?.value;return typeof a=="number"?a:Number.NaN},u,r?E(r)??1:1))}}},NLimit:{description:"Numerical approximation of the limit of a function",complexity:5e3,hold:"all",threadable:!1,signature:{domain:["FunctionOf","Anything","Numbers",["OptArg","Numbers"],"Numbers"],evaluate:(n,e)=>{let[i,t,r]=e,u=E(t.N());if(u===null)return;let o=ci(i);return n.number(ui(s=>{let a=o([n.number(s)])?.value;return typeof a=="number"?a:Number.NaN},u,r?E(r)??1:1))}}}}];var Lr=50,Ja={List:{complexity:8200,hold:"all",signature:{domain:["FunctionOf",["VarArg","Anything"],"Lists"],canonical:Rd},size:n=>n.nops,iterator:(n,e,i)=>{let t=e??1;return i=Math.min(i??n.nops,n.nops),i<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>i>0?(i--,{value:n.ops[t++-1],done:!1}):{value:void 0,done:!0}}},at:(n,e)=>{if(typeof e=="number"&&!(e<1||e>n.nops))return n.ops[e-1]},indexOf:(n,e,i)=>{if(i??(i=1),i<0){if(i<-n.nops)return;i=n.nops+i+1;let r=i;for(let u=r;u>=1;u--)if(n.ops[u-1].isEqual(e))return u;return}let t=i;for(let r=t;r<=n.nops;r++)if(n.ops[r-1].isEqual(e))return r}},Range:{complexity:8200,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers","Numbers"],"Values"]},size:n=>{let[e,i,t]=$r(n);return!isFinite(e)||!isFinite(i)?1/0:1+Math.max(0,Math.floor((i-e)/t))},at:(n,e)=>{if(typeof e!="number")return;let[i,t,r]=$r(n);if(!(e<1||e>1+(t-i)/r))return n.engine.number(i+r*(e-1))},iterator:(n,e,i)=>{let[t,r,u]=$r(n),o=e??1;return i=Math.min(i??r,r),i<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>i>0?(i--,{value:n.engine.number(t+u*(o++-1)),done:!1}):{value:void 0,done:!0}}}},Linspace:{complexity:8200,signature:{domain:["FunctionOf","Numbers",["OptArg","Numbers","Numbers"],"Values"]},size:n=>{let e=E(n.op3)??Lr;return Math.max(0,Math.floor(e))},at:(n,e)=>{if(typeof e!="number")return;let i=E(n.op1),t=E(n.op2),r=E(n.op3)??Lr;if(!(i===void 0||t===void 0)&&!(e<1||e>r))return n.engine.number(i+(t-i)*(e-1)/r)},iterator:(n,e,i)=>{let t=E(n.op1),r=E(n.op2),u;r===void 0?(r=t,t=1,u=Lr):u=Math.max(0,E(n.op3)??Lr);let o=e??1;return i=Math.min(i??u,u),i<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>i>0?(i--,{value:n.engine.number(t+(r-t)*(o++-1)/u),done:!1}):{value:void 0,done:!0}}}},KeyValuePair:{description:"A key/value pair",complexity:8200,signature:{domain:["FunctionOf","Strings","Anything","Tuples"],canonical:(n,e)=>{let[i,t]=dr(n,e,[n.Strings,"Values"]);return!i.isValid||!t.isValid?n._fn("KeyValuePair",[i,t]):n.tuple([i,t])}},size:n=>1},Single:{description:"A tuple with a single element",complexity:8200,signature:{domain:["FunctionOf","Anything","Tuples"],canonical:(n,e)=>n.tuple(Be(n,e,1))},size:n=>n.nops,at:(n,e)=>{if(!(typeof e!="number"||e!==1))return n.ops[0]}},Pair:{description:"A tuple of two elements",complexity:8200,signature:{domain:["FunctionOf","Anything","Anything","Tuples"],canonical:(n,e)=>n.tuple(Be(n,e,2))},size:n=>n.nops,at:(n,e)=>typeof e=="number"?n.ops[e-1]:void 0},Triple:{description:"A tuple of three elements",complexity:8200,signature:{domain:["FunctionOf","Anything","Anything","Anything","Tuples"],canonical:(n,e)=>n.tuple(Be(n,e,3))},size:n=>n.nops,at:(n,e)=>typeof e=="number"?n.ops[e-1]:void 0},Tuple:{description:"A fixed number of heterogeneous elements",complexity:8200,signature:{domain:["FunctionOf","Anything",["VarArg","Anything"],"Tuples"],canonical:(n,e)=>n.tuple(fe(e))},size:n=>n.nops,at:(n,e)=>typeof e=="number"?n.ops[e-1]:void 0},String:{threadable:!0,signature:{domain:["FunctionOf",["OptArg","Anything"],"Strings"],evaluate:(n,e)=>e.length===0?n.string(""):n.string(e.map(i=>i.string??i.toString()).join(""))}},Length:{complexity:8200,signature:{domain:["FunctionOf","Values","Numbers"],evaluate:(n,e)=>{let i=e[0].functionDefinition;if(i?.size)return n.number(i.size(e[0]));let t=e[0].string;return t!==null?n.number(t.length):n.Zero}}},IsEmpty:{complexity:8200,signature:{domain:["FunctionOf","Values","Numbers"],evaluate:(n,e)=>{let i=e[0].functionDefinition,t;if(i?.size)t=i.size(e[0]);else{let r=e[0].string;r!==null&&(t=r.length)}if(t!==void 0)return t===0?n.True:n.False}}},Take:{complexity:8200,signature:{domain:["FunctionOf","Values",["VarArg","Values"],"Values"],evaluate:(n,e)=>{if(e.length<2)return;let i=e[0].string;if(i!==null){let u=e.slice(1).map(o=>qr(o,i.length));return n.string(Od(i,u))}let r=e[0].functionDefinition?.size?.(e[0]);return Vr(e[0],e.slice(1).map(u=>qr(u,r)))}}},Drop:{complexity:8200,signature:{domain:["FunctionOf","Values",["VarArg","Values"],"Values"],evaluate:(n,e)=>{if(e.length<2)return;let i=e[0].string;if(i!==null){let s=Ha(e.slice(1).map(a=>qr(a,i.length)));return n.string(i.split("").filter((a,l)=>!s.includes(l+1)).join(""))}let t=e[0].functionDefinition,r=t?.size?.(e[0]);if(!r||!t?.at)return n.Nothing;let u=Ha(e.slice(1).map(s=>qr(s,r))),o=[];for(let s=1;s<=r;s++)if(!u.includes(s)){let a=t.at(e[0],s);a&&o.push(a)}return n.box(["List",...o])}}},At:{complexity:8200,signature:{domain:["FunctionOf","Values","Values","Values"],evaluate:(n,e)=>{let i=e[0],t=i.functionDefinition;if(!t?.at)return;if(e[1].string!==null)return t.at(i,1)??n.Nothing;let u=E(e[1]);if(!(u===null||!Number.isInteger(u)))return t.at(i,u)??n.Nothing}}},First:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0],t=i.functionDefinition;return t?.at?t.at(i,1)??n.Nothing:n.Nothing}}},Second:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0],t=i.functionDefinition;return t?.at?t.at(i,2)??n.Nothing:n.Nothing}}},Last:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0],t=i.functionDefinition;return t?.at?t.at(i,-1)??n.Nothing:n.Nothing}}},Rest:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>Vr(e[0],[[2,-1,1]])}},Most:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>Vr(e[0],[[1,-2,1]])}},Reverse:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>Vr(e[0],[[-1,2,1]])}},Ordering:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Functions"],"Values"],evaluate:(n,e)=>{}}},Sort:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Functions"],"Values"],evaluate:(n,e)=>{}}},Shuffle:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{}}},Map:{complexity:8200,signature:{domain:["FunctionOf","Collections","Functions","Collections"],evaluate:(n,e)=>{}}},Filter:{complexity:8200,signature:{domain:["FunctionOf","Values","Functions","Values"],evaluate:(n,e)=>{}}},Reduce:{complexity:8200,signature:{domain:["FunctionOf","Values","Functions",["OptArg","Values"],"Values"],evaluate:(n,e)=>{}}},Tabulate:{complexity:8200,signature:{domain:["FunctionOf","Functions","Integers",["VarArg","Integers"],"Values"],evaluate:(n,e)=>{}}},Tally:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(n,e)=>{}}},Unique:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(n,e)=>{}}},Zip:{complexity:8200,signature:{domain:["FunctionOf","Values",["VarArg","Values"],"Values"],evaluate:(n,e)=>{}}},RotateLeft:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Integers"],"Values"],evaluate:(n,e)=>{}}},RotateRight:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Integers"],"Values"],evaluate:(n,e)=>{}}},Join:{complexity:8200,signature:{domain:["FunctionOf",["VarArg","Values"],"Values"],evaluate:(n,e)=>{}}},Iterate:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Values"],"Values"],evaluate:(n,e)=>{}}},Repeat:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{}}},Cycle:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{}}},Fill:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{}}}};function $r(n){let e=E(n.op1)??1,i=E(n.op2);if(i===void 0)return[1,e,1];let t=E(n.op3)??1;return[e,i,t]}function qr(n,e){if(!n)return[0,0,0];let i=E(n);if(i!==null){if(i=Math.round(i),i<0){if(e===void 0)return[0,0,0];i=e+i+1}return[i,i,1]}let t=n.head;if(!t||typeof t!="string"||!/^(Single|Pair|Triple|Tuple|)$/.test(t))return[0,0,0];let[r,u,o]=$r(n);return(r<0||u<0)&&e===void 0?[0,0,0]:(r<0&&(r=e+r+1),u<0&&(u=e+u+1),o=Math.abs(Math.round(o)),o===0?[0,0,0]:(r>u&&(o=-o),[r,u,o]))}function Vr(n,e){let i=n.engine,t=n.functionDefinition;if(!t?.at)return i.Nothing;let r=[];for(let u of e){let[o,s,a]=u;if(a!==0)if(a<0)for(let l=o;l>=s;l+=a){let f=t.at(n,l);f&&r.push(f)}else for(let l=o;l<=s;l+=a){let f=t.at(n,l);f&&r.push(f)}}return i.box(["List",...r])}function Od(n,e){let i="";for(let t of e){let[r,u,o]=t;if(o===1)i+=n.slice(r-1,u);else if(o<0)for(let s=r;s>=u;s+=o)i+=n[s-1];else for(let s=r;s<=u;s+=o)i+=n[s-1]}return i}function Ha(n){let e=[];for(let i of n){let[t,r,u]=i;if(u!==0)if(u<0)for(let o=t;o>=r;o+=u)e.push(o);else for(let o=t;o<=r;o+=u)e.push(o)}return e}function Rd(n,e){let i=e[0];if(e.length===1&&i.head==="Matrix"){let[t,r,u]=i.ops;if(!r||r.string==="..")return u?n._fn("Matrix",[t,n.string("[]"),u]):n._fn("Matrix",[t,r])}return e=e.map(t=>t.head==="Delimiter"?t.op1.head==="Sequence"?n.box(["List",...fe(t.op1.ops)]):n.box(["List",t.op1?.canonical??n.Nothing]):t.canonical),n.box(["List",...e])}var Wa=[{Block:{hold:"all",signature:{domain:"Functions",canonical:Vd,evaluate:qd}},If:{hold:"rest",signature:{domain:"Functions",result:(n,e)=>Qn(e[0],e[1]),evaluate:(n,e)=>{let i=e[0];return i&&i.symbol==="True"?e[1]?e[1].evaluate():n.Nothing:e[2]?e[2].evaluate():n.Nothing}}},Loop:{hold:"all",signature:{domain:"Functions",evaluate:(n,e)=>{let i=e[0]??n.Nothing;if(i.isNothing)return i;let t=e[1];if(t&&Mi(t)){let u,o=ci(i),s=0;for(let a of Q(t)){if(u=o([a])??n.Nothing,u.head==="Break")return u.op1;if(u.head==="Return")return u;if(s++>n.iterationLimit)return n.error("iteration-limit-exceeded")}}let r=0;for(;;){let u=i.evaluate();if(u.head==="Break")return u.op1;if(u.head==="Return")return u;if(r++>n.iterationLimit)return n.error("iteration-limit-exceeded")}}}},Which:{hold:"all",signature:{domain:"Functions",result:(n,e)=>Pd(n,e),evaluate:(n,e)=>Ld(n,e,"evaluate")}},FixedPoint:{hold:"all",signature:{domain:"Functions"}}}];function Pd(n,e){let i=null;for(let t=1;t<=e.length-1;t+=2)i=Qn(i,e[t].domain);return i??n.domain("NothingDomain")}function Ld(n,e,i){let t=0;for(;t<e.length-1;){if(e[t].evaluate().symbol==="True")return e[t+1]?i==="N"?e[t+1].N():e[t+1].evaluate():n.symbol("Undefined");t+=2}return n.symbol("Undefined")}function qd(n,e){if(e.length===0)return n.Nothing;n.resetContext();let i;for(let t of e){let r=t.head;if(r==="Return"){i=t.op1.evaluate();break}if(r==="Break"||r==="Continue"){i=n.box([r,t.op1.evaluate()]);break}i=t.evaluate()}return i??n.Nothing}function Vd(n,e){if(e.length===0)return null;n.pushScope();let i=[],t=[];for(let u of e)u.head==="Declare"?i.push(u):t.push(Ya(u));let r=n._fn("Block",[...i,...t]);return n.popScope(),r}function Ya(n){return n.head==="Declare"&&n.engine.error("unexpected-declare"),n.ops?n.engine._fn(n.head,n.ops.map(Ya)):n}var Qa=[{Real:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=e[0].numericValue;if(i!==null)return n.isComplex(i)?n.number(i.re):e[0]}}},Imaginary:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=e[0].numericValue;if(i!==null)return n.isComplex(i)?n.number(i.im):n.Zero}}},Argument:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=e[0].numericValue;if(i===null)return;if(n.isComplex(i))return n.number(i.arg());let t=E(e[0]);if(t!==null)return t>=0?n.Zero:n.Pi}}},AbsArg:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Tuples"],evaluate:(n,e)=>{let i=e[0].numericValue;if(i===null)return;if(n.isComplex(i))return n.tuple([n.number(i.abs()),n.number(i.arg())]);let t=E(e[0]);if(t!==null)return n.tuple([n.number(Math.abs(t)),n.number(t>=0?0:Math.PI)])}}},Conjugate:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=e[0].numericValue;if(!(i===null||!n.isComplex(i)))return n.number(i.conjugate())}}},ComplexRoots:{threadable:!0,complexity:1200,signature:{domain:["FunctionOf","Numbers","Numbers","Lists"],evaluate:(n,e)=>{let i=E(e[0]),t=E(e[1]);if(i===null||t===null||!Number.isInteger(t)||t<=0)return;let r=[],[u,o]=n.isComplex(i)?[i.re,i.im]:[i,0],s=Math.atan2(o,u),a=Math.sqrt(u*u+o*o);for(let l=0;l<t;l++){let f=(s+2*Math.PI*l)/t,d=Math.pow(a,1/t);r.push([d*Math.cos(f),d*Math.sin(f)])}return n.box(["List",...r.map(l=>n.number(l[1]!==0?n.complex(l[0],l[1]):l[0]))])}}}}];var Xa=[{Matrix:{complexity:9e3,hold:"all",signature:{params:["Lists"],optParams:["Strings","Strings"],result:"Lists",canonical:$d,evaluate:(n,e)=>e[0].evaluate(),N:(n,e)=>e[0].N()}},Vector:{complexity:9e3,hold:"all",signature:{restParam:"Anything",result:"Lists",canonical:(n,e)=>n._fn("Matrix",[n.box(["List",...n.canonical(e).map(i=>n.box(["List",i]))])])}}},{Shape:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples"],evaluate:(n,e)=>{let i=e[0];return Ve(i)?n.tuple(i.tensor.shape):n.tuple([])}}},Rank:{complexity:8200,signature:{domain:["FunctionOf","Values","Numbers"],evaluate:(n,e)=>{let i=e[0];return Ve(i)?n.number(i.tensor.rank):n.Zero}}},Reshape:{complexity:8200,signature:{domain:["FunctionOf","Values","Tuples","Values"],evaluate:(n,e)=>{let i=e[0],t=e[1].ops?.map(r=>r.value)??[];if(!Ve(i)&&le(i)&&(i=n.box(["List",...Q(i)])),Ve(i))return i.tensor.reshape(...t).expression}}},Flatten:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0];if(Ve(i))return n.box(["List",...i.tensor.flatten().map(t=>n.box(t))]);if(le(i))return n.box(["List",...Q(i)])}}},Transpose:{complexity:8200,signature:{domain:["FunctionOf","Values",["OptArg","Numbers","Numbers"],"Values"],evaluate:(n,e)=>{let i=e[0],t=1,r=2;if(e.length===3&&(t=e[1].value,r=e[2].value,t>0&&r>0),t!==r&&(!Ve(i)&&le(i)&&(i=n.box(["List",...Q(i)])),Ve(i)))return t===1&&r===2?i.tensor.transpose()?.expression:i.tensor.transpose(t,r)?.expression}}},ConjugateTranspose:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0],t=1,r=2;if(e.length===3&&(t=e[1].value,r=e[2].value,t>0&&r>0),t!==r&&Ve(i))return i.tensor.conjugateTranspose(t,r)?.expression}}},Determinant:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0];if(Ve(i))return i.tensor.determinant()}}},Inverse:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0];if(Ve(i))return i.tensor.inverse()?.expression}}},PseudoInverse:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0];if(Ve(i))return i.tensor.pseudoInverse()?.expression}}},AdjugateMatrix:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0];if(Ve(i))return i.tensor.adjugateMatrix()?.expression}}},Trace:{complexity:8200,signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0];if(Ve(i))return i.tensor.trace()}}}}];function $d(n,e,i="Matrix"){if(e.length===0)return n._fn(i,[]);let t=e[0].head==="Vector"?e[0].canonical.ops[0]:e[0].canonical,r=e[1]?.canonical,u=e[2]?.canonical;return e.length>3?n._fn(i,Be(n,e,3)):u?n._fn(i,[t,r,u]):r?n._fn(i,[t,r]):n._fn(i,[t])}var rl={True:{wikidata:"Q16751793",domain:"Booleans",constant:!0},False:{wikidata:"Q5432619",domain:"Booleans",constant:!0},And:{wikidata:"Q191081",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:{domain:"LogicOperators",simplify:Ka,evaluate:Ka}},Or:{wikidata:"Q1651704",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:{domain:"LogicOperators",simplify:el,evaluate:el}},Not:{wikidata:"Q190558",threadable:!0,involution:!0,complexity:10100,signature:{domain:"LogicOperators",simplify:nl,evaluate:nl}},Equivalent:{wikidata:"Q220433",threadable:!0,complexity:10200,signature:{domain:"LogicOperators",canonical:(n,e)=>{let i=e[0].symbol,t=e[1].symbol;return i==="True"&&t==="True"||i==="False"&&t==="False"?n.True:i==="True"&&t==="False"||i==="False"&&t==="True"?n.False:n._fn("Equivalent",e)},simplify:il,evaluate:il}},Implies:{wikidata:"Q7881229",threadable:!0,complexity:10200,signature:{domain:"LogicOperators",simplify:tl,evaluate:tl}},Exists:{signature:{domain:"Functions"},hold:"all"},ExistsUnique:{signature:{domain:"Functions"},hold:"all"},ForAll:{signature:{domain:"Functions"},hold:"all"}};function Ka(n,e){if(e.length===0)return n.True;let i=[];for(let t of e){if(t.symbol==="False")return n.False;if(t.symbol!=="True"){let r=!1;for(let u of i)if(u.isSame(t))r=!0;else if(t.head==="Not"&&t.op1.isSame(u)||u.head==="Not"&&u.op1.isSame(t))return n.False;r||i.push(t)}}return i.length===0?n.True:i.length===1?i[0]:n._fn("And",i)}function el(n,e){if(e.length===0)return n.True;let i=[];for(let t of e){if(t.symbol==="True")return n.True;if(t.symbol!=="False"){let r=!1;for(let u of i)if(u.isSame(t))r=!0;else if(t.head==="Not"&&t.op1.isSame(u)||u.head==="Not"&&u.op1.isSame(t))return n.True;r||i.push(t)}}return i.length===0?n.False:i.length===1?i[0]:n._fn("Or",i)}function nl(n,e){let i=e[0]?.symbol;if(i==="True")return n.False;if(i==="False")return n.True}function il(n,e){let i=e[0].symbol,t=e[1].symbol;if(i==="True"&&t==="True"||i==="False"&&t==="False")return n.True;if(i==="True"&&t==="False"||i==="False"&&t==="True")return n.False}function tl(n,e){let i=e[0].symbol,t=e[1].symbol;if(i==="True"&&t==="True"||i==="False"&&t==="False"||i==="False"&&t==="True")return n.True;if(i==="True"&&t==="False")return n.False}var ul=[{Expand:{description:"Expand out products and positive integer powers",signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>sn(e[0])??e[0]}},ExpandAll:{description:"Recursively expand out products and positive integer powers",signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>no(e[0])??e[0]}},Factor:{description:"Factors an algebraic expression into a product of irreducible factors",signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>ha(e[0])}},Together:{description:"Combine rational expressions into a single fraction",signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>pi(e[0])}},Distribute:{description:"Distribute multiplication over addition",signature:{domain:["FunctionOf","Values","Values"],evaluate:(n,e)=>{let i=e[0].head;if(i==="Multiply")return ji(e[0].ops)??e[0];if(i==="Negate")return ji([n.NegativeOne,...e[0].ops])??e[0];if(i==="Divide"&&e[0].ops[0].head==="Multiply"){let t=ji(e[0].ops),r=e[0].ops[1];if(t)return t.head==="Add"?n.add(...t.ops.map(u=>n.div(u,r))).evaluate():n.div(t,r).evaluate()}return e[0]}}}}];var ol={EmptySet:{domain:"Sets",constant:!0,wikidata:"Q226183"},Element:{complexity:11200,hold:"all",signature:{domain:"Predicates",canonical:(n,e)=>(e=Be(n,e,2),e.length===2&&e[0].isValid&&En(e[1])?n._fn("Element",[e[0],n.domain(e[1])]):n._fn("Element",e)),evaluate:(n,e)=>jd(n,e)}},NotElement:{complexity:11200,hold:"all",signature:{domain:"Predicates",canonical:(n,e)=>n.box(["Not",["Element",...e]])}},Subset:{complexity:11200,signature:{domain:"Predicates"}},NotSubset:{complexity:11200,signature:{domain:"Predicates",canonical:(n,e)=>n.box(["Not",["Subset",...e]])}},Superset:{complexity:11200,signature:{domain:"Predicates"}},SupersetEqual:{complexity:11200,signature:{domain:"Predicates"}},NotSuperset:{complexity:11200,signature:{domain:"Predicates",canonical:(n,e)=>n.box(["Not",["Superset",...e]])}},NotSupersetEqual:{complexity:11200,signature:{domain:"Predicates",canonical:(n,e)=>n.box(["Not",["SupersetEqual",...e]])}},SubsetEqual:{complexity:11200,signature:{domain:"Predicates"}},NotSubsetNotEqual:{complexity:11200,signature:{domain:"Predicates",canonical:(n,e)=>n.box(["Not",["SubsetEqual",...e]])}},CartesianProduct:{wikidata:"Q173740",signature:{domain:["FunctionOf","Sets",["VarArg","Sets"],"Sets"]}},Complement:{wikidata:"Q242767",signature:{domain:["FunctionOf","Sets","Sets"]}},Intersection:{wikidata:"Q185837",associative:!0,commutative:!0,involution:!0,signature:{domain:["FunctionOf","Collections",["VarArg","Collections"],"Sets"],canonical:(n,e)=>e.length===0||e.length===1?n.symbol("EmptySet"):n._fn("Intersection",e),evaluate:Ud}},Union:{wikidata:"Q185359",associative:!0,commutative:!0,involution:!0,signature:{domain:["FunctionOf","Collections",["VarArg","Collections"],"Sets"],canonical:(n,e)=>e.length===0?n.symbol("EmptySet"):n._fn("Union",e),evaluate:zd}},SetMinus:{wikidata:"Q18192442",signature:{domain:["FunctionOf","Sets","Values","Sets"],evaluate:Gd}},SymmetricDifference:{wikidata:"Q1147242",signature:{domain:["FunctionOf","Sets",["VarArg","Sets"],"Sets"]}}};function zd(n,e){let i=[];for(let t of e)if(le(t))for(let r of Q(t))i.every(u=>!u.isEqual(r))&&i.push(r);else i.every(r=>!r.isEqual(t))&&i.push(t);return i.length===0?n.symbol("EmptySet"):n._fn("Set",i)}function Ud(n,e){let i=[...e[0].ops??[]];for(let t of e.slice(1))le(t)?i=i.filter(r=>[...Q(t)].some(u=>r.isEqual(u))):i=i.filter(r=>r.isEqual(t));return i.length===0?n.symbol("EmptySet"):n._fn("Set",i)}function Gd(n,e){return n.symbol("EmptySet")}function jd(n,e){e.length;let[i,t]=e;if(t.string)return i.string&&t.string.includes(i.string)?n.True:n.False;if(t.keys){if(i.string){for(let r of t.keys)if(r===i.string)return n.True}return n.False}if(t.head==="List"){if(i.head==="List"){let u=!1;for(let o=0;o<1+(t.nops-i.nops);++o){u=!0;for(let s=0;s<i.nops;++s)if(!t.ops[o+s].isEqual(i.ops[s])){u=!1;break}if(u)return n.True}return n.False}let r=i.head==="Hold"?i.op1:i;for(let u of t.ops)if(r.isEqual(u))return n.True;return n.False}return En(t)&&i.domain?i.domain.isCompatible(n.domain(t))?n.True:n.False:n._fn("Element",[i,t])}var sl=[{Mean:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=0,t=0;for(let r of Q(e[0])){let u=E(r);if(u===null)return;i+=u,t++}return t===0?n.NaN:n.number(i/t)}}},Median:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=[];for(let r of Q(e[0])){let u=E(r);if(u===null)return;i.push(u)}if(i.length===0)return n.NaN;i.sort((r,u)=>r-u);let t=Math.floor(i.length/2);return i.length%2===0?n.number((i[t-1]+i[t])/2):n.number(i[t])}}},Variance:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=0,t=0,r=0;for(let u of Q(e[0])){let o=E(u);if(o===null)return;i+=o,t+=o*o,r++}return r===0?n.NaN:n.number((t-i*i/r)/(r-1))}}},StandardDeviation:{complexity:1200,threadable:!1,description:"Sample Standard Deviation of a collection of numbers.",signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=0,t=0,r=0;for(let u of Q(e[0])){let o=E(u);if(o===null)return;i+=o,t+=o*o,r++}return r===0?n.NaN:n.number(Math.sqrt((t-i*i/r)/(r-1)))}}},Kurtosis:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=0,t=0,r=0,u=0;for(let a of Q(e[0])){let l=E(a);if(l===null)return;i+=l,t+=l*l,r+=l*l*l*l,u++}if(u===0)return n.NaN;let o=(t-i*i/u)/(u-1),s=(r-t*t/u)/(u-1);return n.number((s/(o*o)-3)*(u*(u+1))/6)}}},Skewness:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=0,t=0,r=0,u=0;for(let a of Q(e[0])){let l=E(a);if(l===null)return;i+=l,t+=l*l,r+=l*l*l,u++}if(u===0)return n.NaN;let o=(t-i*i/u)/(u-1),s=(r-t*i/u)/(u-1);return n.number(s/Math.pow(o,3/2)*Math.sqrt(u*1))}}},Mode:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=[];for(let o of Q(e[0])){let s=E(o);if(s===null)return;i.push(s)}if(i.length===0)return n.NaN;i.sort((o,s)=>o-s);let t={};for(let o of i)t[o]=(t[o]??0)+1;let r=0,u=i[0];for(let o of i){let s=t[o];s>r&&(r=s,u=o)}return n.number(u)}}},Quartiles:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Lists"],evaluate:(n,e)=>{let i=[];for(let o of Q(e[0])){let s=E(o);if(s===null)return;i.push(s)}if(i.length===0)return n.NaN;i.sort((o,s)=>o-s);let t=Math.floor(i.length/2),r=i.slice(0,t),u=i.slice(t+1);return n.box(["List",n.number(i[t]),n.number(r[Math.floor(r.length/2)]),n.number(u[Math.floor(u.length/2)])])}}},InterquartileRange:{complexity:1200,threadable:!1,signature:{domain:["FunctionOf","Collections","Numbers"],evaluate:(n,e)=>{let i=[];for(let o of Q(e[0])){let s=E(o);if(s===null)return;i.push(s)}if(i.length===0)return n.NaN;i.sort((o,s)=>o-s);let t=Math.floor(i.length/2),r=i.slice(0,t),u=i.slice(t+1);return n.number(u[Math.floor(u.length/2)]-r[Math.floor(r.length/2)])}}},Erf:{complexity:7500,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=E(e[0]);if(i!==null)return n.number(_u(i))}}},Erfc:{complexity:7500,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=E(e[0]);if(i!==null)return n.number(1-_u(i))}}},ErfInv:{complexity:7500,signature:{domain:["FunctionOf","Numbers","Numbers"],evaluate:(n,e)=>{let i=E(e[0]);if(i!==null)return n.number($s(i))}}}}];var Pn=n=>["FunctionOf","Numbers","ExtendedRealNumbers"],zr=n=>["FunctionOf","Numbers","Numbers"],Kn=n=>["FunctionOf","Numbers","Numbers"],al=[{Pi:{domain:"TranscendentalNumbers",flags:{algebraic:!1},constant:!0,holdUntil:"N",wikidata:"Q167",value:n=>P(n)?n._BIGNUM_PI:Math.PI}},{Degrees:{signature:{domain:["FunctionOf","Numbers","Numbers"],canonical:(n,e)=>{if(n.angularUnit==="deg")return e[0];if(e=Pe(n,e,1),e.length!==1)return n._fn("Degrees",e);let i=e[0];if(i.numericValue===null||!i.isValid)return n._fn("Degrees",e);let t=E(i);if(t!==null){if(t=t%360,t<0&&(t+=360),Number.isInteger(t)){let r=je([t,180]);return r[0]===0?n.Zero:r[0]===1&&r[1]===1?n.Pi:r[0]===1?n.div(n.Pi,n.number(r[1])):n.mul(n.number(r),n.Pi)}return n.mul(n.div(n.number(t),n.number(180)),n.Pi)}return n.div(n.mul(i,n.Pi),n.number(180))},evaluate:(n,e)=>n.angularUnit==="deg"?e[0]:n.mul(e[0],n.div(n.Pi,n.number(180))).evaluate()}},Hypot:{threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","NonNegativeNumbers"],simplify:(n,e)=>n.box(["Sqrt",["Add",["Square",e[0]],["Square",e[1]]]]).simplify(),evaluate:["Function",["Sqrt",["Add",["Square","_1"],["Square","_2"]]]]}},Sin:{complexity:5e3,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(n,e)=>Fe(n,"Sin",e[0])?.simplify()??(ae(n)?n.box(["Divide",["Subtract",["Exp",["Multiply","ImaginaryUnit",e[0]]],["Exp",["Multiply","ImaginaryUnit",["Negate",e[0]]]]],["Complex",0,2]]).simplify():void 0),evaluate:(n,e)=>S(n,"evaluate","Sin",e[0]),N:(n,e)=>S(n,"N","Sin",e[0])}}},{Arctan:{wikidata:"Q2257242",complexity:5200,threadable:!0,signature:{domain:Pn("Arctan"),simplify:(n,e)=>Fe(n,"Arctan",e[0])?.simplify(),evaluate:(n,e)=>S(n,"evaluate","Arctan",e[0]),N:(n,e)=>S(n,"N","Arctan",e[0])}},Arctan2:{wikidata:"Q776598",complexity:5200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers","Numbers"],N:(n,e)=>jn(e[0],e[1],Math.atan2,(i,t)=>y.atan2(i,t))}},Cos:{complexity:5050,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(n,e)=>Fe(n,"Cos",e[0])?.simplify()??n.box(["Sin",["Add",e[0],["Multiply","Half","Pi"]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Cos",e[0]),N:(n,e)=>S(n,"N","Cos",e[0])}},Tan:{complexity:5100,threadable:!0,signature:{domain:zr("Tan"),simplify:(n,e)=>Fe(n,"Tan",e[0])?.simplify()??n.box(["Divide",["Sin",e[0]],["Cos",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Tan",e[0]),N:(n,e)=>S(n,"N","Tan",e[0])}}},{Arcosh:{complexity:6200,threadable:!0,signature:{domain:Kn("Arcosh"),simplify:(n,e)=>Fe(n,"Arcosh",e[0])?.simplify()??n.box(["Ln",["Add",e[0],["Sqrt",["Subtract",["Square",e[0]],1]]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Arcosh",e[0]),N:(n,e)=>S(n,"N","Arcosh",e[0])}},Arcsin:{complexity:5500,threadable:!0,signature:{domain:Kn("Arcsin"),simplify:(n,e)=>Fe(n,"Arcsin",e[0])?.simplify()??n.box(["Multiply",2,["Arctan2",e[0],["Add",1,["Sqrt",["Subtract",1,["Square",e[0]]]]]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Arcsin",e[0]),N:(n,e)=>S(n,"N","Arcsin",e[0])}},Arsinh:{complexity:6100,threadable:!0,signature:{domain:Kn("Arsinh"),simplify:(n,e)=>Fe(n,"Arsinh",e[0])?.simplify()??n.box(["Ln",["Add",e[0],["Sqrt",["Add",["Square",e[0]],1]]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Arsinh",e[0]),N:(n,e)=>S(n,"N","Arsinh",e[0])}},Artanh:{complexity:6300,threadable:!0,signature:{domain:Kn("Artanh"),simplify:(n,e)=>Fe(n,"Artanh",e[0])?.simplify()??n.box(["Multiply","Half",["Ln",["Divide",["Add",1,e[0]],["Subtract",1,e[0]]]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Artanh",e[0]),N:(n,e)=>S(n,"N","Artanh",e[0])}},Cosh:{complexity:6050,threadable:!0,signature:{domain:Kn("Cosh"),simplify:(n,e)=>Fe(n,"Cosh",e[0])?.simplify()??n.box(["Multiply","Half",["Add",["Exp",e[0]],["Exp",["Negate",e[0]]]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Cosh",e[0]),N:(n,e)=>S(n,"N","Cosh",e[0])}},Cot:{complexity:5600,threadable:!0,signature:{domain:zr("Cot"),simplify:(n,e)=>Fe(n,"Cot",e[0])?.simplify()??n.box(["Divide",["Cos",e[0]],["Sin",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Cot",e[0]),N:(n,e)=>S(n,"N","Cot",e[0])}},Csc:{description:"Cosecant",complexity:5600,threadable:!0,signature:{domain:zr("Csc"),simplify:(n,e)=>Fe(n,"Csc",e[0])?.simplify()??n.box(["Divide",1,["Sin",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Csc",e[0]),N:(n,e)=>S(n,"N","Csc",e[0])}},Haversine:{wikidata:"Q2528380",threadable:!0,signature:{domain:["FunctionOf","ExtendedRealNumbers","Numbers"],evaluate:["Divide",["Subtract",1,["Cos","_1"]],2]}},InverseHaversine:{threadable:!0,signature:{domain:["FunctionOf","ExtendedRealNumbers","RealNumbers"],evaluate:["Multiply",2,["Arcsin",["Sqrt","_1"]]]}},Sec:{description:"Secant, inverse of cosine",complexity:5500,threadable:!0,signature:{domain:zr("Sec"),simplify:(n,e)=>Fe(n,"Sec",e[0])?.simplify()??n.box(["Divide",1,["Cos",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Sec",e[0]),N:(n,e)=>S(n,"N","Sec",e[0])}},Sinh:{complexity:6e3,threadable:!0,signature:{domain:Kn("Sinh"),simplify:(n,e)=>Fe(n,"Sinh",e[0])?.simplify()??n.box(["Multiply","Half",["Subtract",["Exp",e[0]],["Exp",["Negate",e[0]]]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Sinh",e[0]),N:(n,e)=>S(n,"N","Sinh",e[0])}}},{Csch:{complexity:6200,threadable:!0,signature:{domain:Pn("Csch"),simplify:(n,e)=>Fe(n,"Csch",e[0])?.simplify()??n.box(["Divide",1,["Sinh",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Csch",e[0]),N:(n,e)=>S(n,"N","Csch",e[0])}},Sech:{complexity:6200,threadable:!0,signature:{domain:["FunctionOf","Numbers","Numbers"],simplify:(n,e)=>Fe(n,"Sech",e[0])?.simplify()??n.box(["Divide",1,["Cosh",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Sech",e[0]),N:(n,e)=>S(n,"N","Sech",e[0])}},Tanh:{complexity:6200,threadable:!0,signature:{domain:Kn("Tanh"),simplify:(n,e)=>Fe(n,"Tanh",e[0])?.simplify()??n.box(["Divide",["Sinh",e[0]],["Cosh",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Tanh",e[0]),N:(n,e)=>S(n,"N","Tanh",e[0])}}},{Arccos:{complexity:5550,threadable:!0,signature:{domain:Pn("Arccos"),simplify:(n,e)=>Fe(n,"Arccos",e[0])?.simplify()??n.box(["Subtract",["Divide","Pi",2],["Arcsin",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Arccos",e[0]),N:(n,e)=>S(n,"N","Arccos",e[0])}},Arccot:{numeric:!0,threadable:!0,signature:{domain:Pn("Arccot"),evaluate:(n,e)=>S(n,"evaluate","Arccot",e[0]),N:(n,e)=>S(n,"N","Arccot",e[0])}},Arcoth:{numeric:!0,threadable:!0,signature:{domain:Pn("Arcoth"),evaluate:(n,e)=>S(n,"evaluate","Arcoth",e[0]),N:(n,e)=>S(n,"N","Arcoth",e[0])}},Arcsch:{numeric:!0,threadable:!0,signature:{domain:Pn("Arcsch"),evaluate:(n,e)=>S(n,"evaluate","Arcsch",e[0]),N:(n,e)=>S(n,"N","Arcsch",e[0])}},Arcsec:{numeric:!0,threadable:!0,signature:{domain:Pn("Arcsec"),evaluate:(n,e)=>S(n,"evaluate","Arcsec",e[0]),N:(n,e)=>S(n,"N","Arcsec",e[0])}},Arsech:{numeric:!0,threadable:!0,signature:{domain:Pn("Arsech"),evaluate:(n,e)=>S(n,"evaluate","Arsech",e[0]),N:(n,e)=>S(n,"N","Arsech",e[0])}},Arccsc:{numeric:!0,threadable:!0,signature:{domain:Pn("Arccsc"),evaluate:(n,e)=>S(n,"evaluate","Arccsc",e[0]),N:(n,e)=>S(n,"N","Arccsc",e[0])}},Coth:{complexity:6300,threadable:!0,signature:{domain:Kn("Coth"),simplify:(n,e)=>Fe(n,"Coth",e[0])?.simplify()??n.box(["Divide",1,["Tanh",e[0]]]).simplify(),evaluate:(n,e)=>S(n,"evaluate","Coth",e[0]),N:(n,e)=>S(n,"N","Coth",e[0])}},InverseFunction:{signature:{domain:["FunctionOf","Functions","Functions"],canonical:(n,e)=>(e=Be(n,e,1),Eo(n,e)??n._fn("InverseFunction",e)),simplify:(n,e)=>Eo(n,e),evaluate:(n,e)=>Eo(n,e)}}}],ei=["Sqrt",2],Ji=["Sqrt",3],Wi=["Sqrt",5],Ur=["Sqrt",6],Zd=[[[0,1],{Sin:0,Cos:1,Tan:0,Cot:"ComplexInfinity",Sec:1,Csc:"ComplexInfinity"}],[[1,12],{Sin:["Divide",["Subtract",Ur,ei],4],Cos:["Divide",["Add",Ur,ei],4],Tan:["Subtract",2,Ji],Cot:["Add",2,Ji],Sec:["Subtract",Ur,ei],Csc:["Add",Ur,ei]}],[[1,10],{Sin:["Divide",["Subtract",Wi,1],4],Cos:["Divide",["Sqrt",["Add",10,["Multiply",2,Wi]]],4],Tan:["Divide",["Sqrt",["Subtract",25,["Multiply",10,Wi]]],5],Cot:["Sqrt",["Add",5,["Multiply",2,Wi]]],Sec:["Divide",["Sqrt",["Subtract",50,["Multiply",10,Wi]]],5],Csc:["Add",1,Wi]}],[[1,8],{Sin:"$\\frac{\\sqrt{2-\\sqrt2}}{2}$",Cos:"$\\frac{\\sqrt {2+{\\sqrt {2}}}}{2}$",Tan:"$\\sqrt{2} - 1$",Cot:"$\\sqrt{2} + 1$",Sec:"$\\sqrt{ 4 - 2\\sqrt{2}}$",Csc:"$\\sqrt{ 4 + 2\\sqrt{2}}$"}],[[1,6],{Sin:"$\\frac{1}{2}$",Cos:"$\\frac{\\sqrt{3}}{2}$",Tan:"$\\frac{\\sqrt{3}}{3}$",Cot:"$\\sqrt{3}$",Sec:"$\\frac{2\\sqrt{3}}{3}$",Csc:2}],[[1,5],{Sin:"$\\frac{\\sqrt{10- 2\\sqrt{5}}} {4}$",Cos:"$\\frac{1+ \\sqrt{5}} {4}$",Tan:"$\\sqrt{5-2\\sqrt5}$",Cot:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Sec:"$\\sqrt{5} - 1$",Csc:"$\\frac{\\sqrt{50+10\\sqrt{5}}} {5}$"}],[[1,4],{Sin:["Divide",ei,2],Cos:["Divide",ei,2],Tan:1,Cot:1,Sec:ei,Csc:ei}],[[3,10],{Sin:"$\\frac{1+ \\sqrt5} {4}$",Cos:"$\\frac{\\sqrt{10- 2\\sqrt5}} {4}$",Tan:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Cot:"$\\sqrt{5-2\\sqrt5}$",Sec:"$\\frac{\\sqrt{50+10\\sqrt5}} {5}$",Csc:"$\\sqrt5-1$"}],[[1,3],{Sin:["Divide",Ji,2],Cos:"Half",Tan:Ji,Cot:["Divide",Ji,3],Sec:2,Csc:["Divide",["Multiply",2,Ji],3]}],[[3,8],{Sin:"$\\frac{ \\sqrt{2 + \\sqrt{2}} } {2}$",Cos:"$\\frac{ \\sqrt{2 - \\sqrt{2}} } {2}$",Tan:"$\\sqrt{2} + 1$",Cot:"$\\sqrt{2} - 1$",Sec:"$\\sqrt{ 4 + 2 \\sqrt{2} }$",Csc:"$\\sqrt{ 4 - 2 \\sqrt{2} }$"}],[[2,5],{Sin:"$\\frac{\\sqrt{10+ 2\\sqrt{5}}} {4}$",Cos:"$\\frac{\\sqrt{5}-1} {4}$",Tan:"$\\sqrt{5+2\\sqrt{5}}$",Cot:"$\\frac{\\sqrt{25-10\\sqrt{5}}} {5}$",Sec:"$1 + \\sqrt{5}$",Csc:"$\\frac{\\sqrt{50-10\\sqrt{5}}} {5}$"}],[[5,12],{Sin:"$\\frac{\\sqrt{6} + \\sqrt{2}} {4}$",Cos:"$\\frac{ \\sqrt{6} - \\sqrt{2}} {4}$",Tan:"$2+\\sqrt{3}$",Cot:"$2-\\sqrt{3}$",Sec:"$\\sqrt{6}+\\sqrt{2}$",Csc:"$\\sqrt{6} - \\sqrt{2}$"}],[[1,2],{Sin:1,Cos:0,Tan:"ComplexInfinity",Cot:0,Sec:"ComplexInfinity",Csc:1}]],Hd={Sin:[[1,"Sin"],[1,"Cos"],[-1,"Sin"],[-1,"Cos"]],Cos:[[1,"Cos"],[-1,"Sin"],[-1,"Cos"],[1,"Sin"]],Sec:[[1,"Sec"],[-1,"Csc"],[-1,"Sec"],[1,"Csc"]],Csc:[[1,"Csc"],[1,"Sec"],[-1,"Csc"],[-1,"Sec"]],Tan:[[1,"Tan"],[-1,"Cot"],[1,"Tan"],[-1,"Cot"]],Cot:[[1,"Cot"],[-1,"Tan"],[1,"Cot"],[-1,"Tan"]]};function Fe(n,e,i){if(!i)return;i=fl(i);let t=E(i.N());if(t===null)return;let r=n.cache("constructible-trigonometric-values",()=>Zd.map(([a,l])=>[a,Object.fromEntries(Object.entries(l).map(([f,d])=>[f,n.parse(Oi(d))??n.box(d)]))]),a=>{for(let[l,f]of a)for(let d of Object.values(f))d.reset();return a});if(Wd(e))return Jd(n,e,i,r);let u=ll(e)==-1?Math.sign(t):1;t=Math.abs(t%(2*Math.PI));let o=Math.floor(t*2/Math.PI);t=t%(Math.PI/2);let s;[s,e]=Hd[e]?.[o]??[1,e];for(let[[a,l],f]of r){let d=f[e];if(d&&n.chop(t-Math.PI*a/l)===0)return d.symbol==="ComplexInfinity"?d:u*s<0?ce(d):d}}function Jd(n,e,i,t){if(!i)return;let r=E(i.N());if(r===null)return;let u=bo(e),o=n.cache("constructible-inverse-trigonometric-values-"+e,()=>{let a=[];for(let[[l,f],d]of t){let c=d[u];if(c===void 0)continue;let m=E(c.N());m!==null&&a.push([[c,m],[l,f]])}return a},a=>{for(let[[l,f],[d,c]]of a)l.reset();return a}),s=0;r<0&&(s=ll(u)==-1?-1:1,r=-r,i=ce(i));for(let[[a,l],[f,d]]of o)if(n.chop(r-l)===0){let c=n.box(["Divide",["Multiply",f,"Pi"],d]);return s==-1?c=ce(c):s==1&&(c=n.box(["Subtract","Pi",c])),c}}function ll(n){return n!=="Cos"&&n!=="Sec"?-1:1}function Wd(n){return!!(n.startsWith("Ar")&&bo(n))}function bo(n){return{Sin:"Arcsin",Cos:"Arccos",Tan:"Arctan",Sec:"Arcsec",Csc:" Arccsc",Sinh:"Arsinh",Cosh:"Arcosh",Tanh:"Artanh",Sech:"Arcsech",Csch:"Arcsch",Arcosh:"Cosh",Arccos:"Cos",Arccsc:"Csc",Arcsch:"Csch",Arcsec:"Sec",Arcsin:"Sin",Arsinh:"Sinh",Arctan:"Tan",Artanh:"Tanh"}[n]}function Eo(n,e){if(e.length!==1||!e[0].isValid)return;let i=e[0],t=i.symbol;if(typeof t!="string")return;if(t==="InverseFunction")return i.op1;let r=bo(t);return r?n.symbol(r):void 0}function S(n,e,i,t){if(!t)return;let r=Fe(n,i,t)?.evaluate({numericMode:e==="N"});if(r)return r;if(!(e==="evaluate"&&t.isExact))switch(i){case"Arccos":return Ye(ne(t,Math.acos,u=>u.acos(),u=>u.acos()));case"Arccot":return Ye(ne(t,u=>Math.atan2(1,u),u=>y.atan2(n._BIGNUM_ONE,u),u=>u.inverse().atan()));case"Arccsc":return Ye(ne(t,u=>Math.asin(1/u),u=>n._BIGNUM_ONE.div(u).asin(),u=>u.inverse().asin()));case"Arcosh":return Ye(ne(t,Math.acosh,u=>u.acosh(),u=>u.acosh()));case"Arcoth":return Ye(ne(t,u=>Math.log((1+u)/(u-1))/2,u=>n._BIGNUM_ONE.add(u).div(u.sub(n._BIGNUM_ONE)).log().div(2),u=>n.complex(1).add(u).div(u.sub(1)).log().div(2)));case"Arcsch":return Ye(ne(t,u=>Math.log(1/u+Math.sqrt(1/(u*u)+1)),u=>n._BIGNUM_ONE.div(u.mul(u)).add(n._BIGNUM_ONE).sqrt().add(n._BIGNUM_ONE.div(u)).log(),u=>u.mul(u).inverse().add(1).sqrt().add(u.inverse()).log()));case"Arcsec":return Ye(ne(t,u=>Math.acos(1/u),u=>n._BIGNUM_ONE.div(u).acos(),u=>u.inverse().acos()));case"Arcsin":return Ye(ne(t,Math.asin,u=>u.asin(),u=>u.asin()));case"Arsech":return Ye(ne(t,u=>Math.log((1+Math.sqrt(1-u*u))/u),u=>n._BIGNUM_ONE.sub(u.mul(u).add(n._BIGNUM_ONE).div(u)).log(),u=>n.complex(1).sub(u.mul(u)).add(1).div(u).log()));case"Arsinh":return Ye(ne(t,Math.asinh,u=>u.asinh(),u=>u.asinh()));case"Arctan":return Ye(ne(t,Math.atan,u=>u.atan(),u=>u.atan()));case"Artanh":return Ye(ne(t,Math.atanh,u=>u.atanh(),u=>u.atanh()));case"Cos":return We(t,Math.cos,u=>u.toSignificantDigits(n.precision+4).cos().toSignificantDigits(n.precision),u=>u.cos());case"Cosh":return We(t,Math.cosh,u=>u.cosh(),u=>u.cosh());case"Cot":return We(t,u=>1/Math.tan(u),u=>n._BIGNUM_ONE.div(u.tan()),u=>u.tan().inverse());case"Coth":return We(t,u=>1/Math.tanh(u),u=>n._BIGNUM_ONE.div(u.tanh()),u=>u.tanh().inverse());case"Csc":return We(t,u=>1/Math.sin(u),u=>n._BIGNUM_ONE.div(u.sin()),u=>u.sin().inverse());case"Csch":return We(t,u=>1/Math.sinh(u),u=>n._BIGNUM_ONE.div(u.sinh()),u=>u.sinh().inverse());case"Sec":return We(t,u=>1/Math.cos(u),u=>n._BIGNUM_ONE.div(u.cos()),u=>u.cos().inverse());case"Sech":return We(t,u=>1/Math.cosh(u),u=>n._BIGNUM_ONE.div(u.cosh()),u=>u.cosh().inverse());case"Sin":return We(t,Math.sin,u=>u.toSignificantDigits(n.precision+4).sin().toSignificantDigits(n.precision),u=>u.sin());case"Sinh":return We(t,Math.sinh,u=>u.sinh(),u=>u.sinh());case"Tan":return We(t,Math.tan,u=>u.toSignificantDigits(n.precision+4).tan().toSignificantDigits(n.precision),u=>u.tan());case"Tanh":return We(t,Math.tanh,u=>u.tanh(),u=>u.tanh())}}function We(n,e,i,t){return ne(fl(n),e,i,t)}function fl(n){if(!n)return n;let e=n.engine,i=e.angularUnit;if(i==="rad")return n;let t=E(n.N());return t===null?n:i==="deg"?e.number(t*(Math.PI/180)):i==="grad"?e.number(t*(Math.PI/200)):i==="turn"?e.number(t*(2*Math.PI)):n}function Ye(n){if(!n)return n;let e=n.engine,i=e.angularUnit;if(i==="rad")return n;let t=E(n.N());return t===null?n:i==="deg"?e.number(t*(180/Math.PI)):i==="grad"?e.number(t*(200/Math.PI)):i==="turn"?e.number(t/(2*Math.PI)):n}var dl=he(De(),1);var pe=class{constructor(e,i,t){if(!e.context)throw Error("No context available");this.name=i,this.wikidata=t.wikidata,this.description=t.description,this.url=t.url,this._engine=e,this.scope=e.context,this.name=i,this._flags=t.flags?It(t.flags):void 0,this._domain=t.domain?e.domain(t.domain):void 0,this.inferredDomain=t.inferred??!1,this.constant=t.constant??!1,this.holdUntil=t.holdUntil??"evaluate",this.constant?(this._defValue=t.value,this._value=null):(t.value!==void 0?fr(t.value)?this._value=e.parse(t.value)??e.symbol("Undefined"):typeof t.value=="function"?this._value=e.box(t.value(e)??"Undefined"):t.value instanceof L?this._value=t.value:this._value=e.box(t.value):this._value=void 0,!this._value&&this._domain&&!t.flags&&(this._flags=Gr(this._domain))),this._value&&!this._domain&&(this._domain=this._value.domain,this.inferredDomain=!0)}update(e){e.wikidata&&(this.wikidata=e.wikidata),e.description&&(this.description=e.description),e.url&&(this.url=e.url);let i=e?.flags,t=e?.domain?this._engine.domain(e.domain):void 0;t&&(i={...Gr(t),...i??{}}),i&&(this._flags=It(i)),t&&(this._domain=t,this.inferredDomain=!1),e.holdUntil&&(this.holdUntil=e.holdUntil),e.constant?(this.constant=e.constant,this._defValue=e.value,this._value=null):e.value&&(fr(e.value)?this._value=this._engine.parse(e.value)??this._engine.symbol("Undefined"):typeof e.value=="function"?this._value=this._engine.box(e.value(this._engine)??"Undefined"):e.value instanceof L?this._value=e.value:this._value=this._engine.box(e.value)),this._value&&!this._domain&&(this._domain=this._value.domain,this.inferredDomain=!0)}reset(){this.constant&&(this._value=null)}get value(){if(this._value===null){let e=this._engine;if(fr(this._defValue)?this._value=e.parse(this._defValue)??e.symbol("Undefined"):typeof this._defValue=="function"?this._value=e.box(this._defValue(e)??"Undefined"):this._defValue?this._value=e.box(this._defValue):this._value=void 0,this._value?.numericValue){let i=this._value.numericValue;!P(e)&&i instanceof y?this._value=e.number(i.toNumber()):!ae(e)&&i instanceof dl.Complex&&(this._value=e.NaN)}}return this._value??void 0}set value(e){if(this.constant)throw new Error(`The value of the constant "${this.name}" cannot be changed`);if(this._defValue,typeof e=="number")this._value=this._engine.number(e);else if(e){let i=this._engine.box(e);this.inferredDomain?(this._value=i,this._domain=Qn(this._domain,i.domain)):!this._domain||!i.domain||i.domain?.isCompatible(this._domain)?this._value=i:this._value=void 0}else this._value=void 0;this._value!==void 0?this._flags=void 0:this._flags=Gr(this._domain)}get domain(){return this._domain??void 0}set domain(e){if(this.constant)throw new Error(`The domain of the constant "${this.name}" cannot be changed`);if(!this.inferredDomain)throw Error(`The domain of "${this.name}" cannot be changed because it has already been declared`);if(!e){this._defValue=void 0,this._value=void 0,this._flags=void 0,this._domain=void 0;return}if(e=this._engine.domain(e),this._domain&&!e.isCompatible(this._domain))throw Error(`The domain of "${this.name}" cannot be widened from "${this._domain.base}" to "${e.base}"`);if(this._value?.domain&&!this._value.domain.isCompatible(e))throw Error(`The domain of "${this.name}" cannot be changed to "${e.base}" because its value has a domain of "${this._value.domain.base}"`);this._domain=e,this._flags=void 0,this._value===void 0&&e.isNumeric&&(this._flags=Gr(e))}get number(){return this.value?.isNumber??this._flags?.number}set number(e){this.updateFlags({number:e})}get integer(){return this.value?.isInteger??this._flags?.integer}set integer(e){this.updateFlags({integer:e})}get rational(){return this.value?.isRational??this._flags?.rational}set rational(e){this.updateFlags({rational:e})}get algebraic(){return this.value?.isAlgebraic??this._flags?.algebraic}set algebraic(e){this.updateFlags({algebraic:e})}get real(){return this.value?.isReal??this._flags?.real}set real(e){this.updateFlags({real:e})}get extendedReal(){return this.value?.isExtendedReal??this._flags?.extendedReal}set extendedReal(e){this.updateFlags({extendedReal:e})}get complex(){return this.value?.isComplex??this._flags?.complex}set complex(e){this.updateFlags({complex:e})}get extendedComplex(){return this.value?.isExtendedComplex??this._flags?.extendedComplex}set extendedComplex(e){this.updateFlags({extendedComplex:e})}get imaginary(){return this.value?.isImaginary??this._flags?.imaginary}set imaginary(e){this.updateFlags({imaginary:e})}get positive(){return this.value?.isPositive??this._flags?.positive}set positive(e){this.updateFlags({positive:e})}get nonPositive(){return this.value?.isNonPositive??this._flags?.nonPositive}set nonPositive(e){this.updateFlags({nonPositive:e})}get negative(){return this.value?.isNegative??this._flags?.negative}set negative(e){this.updateFlags({negative:e})}get nonNegative(){return this.value?.isNonNegative??this._flags?.nonNegative}set nonNegative(e){this.updateFlags({nonNegative:e})}get zero(){return this.value?.isZero??this._flags?.zero}set zero(e){this.updateFlags({zero:e})}get notZero(){return this.value?.isNotZero??this._flags?.notZero}set notZero(e){this.updateFlags({notZero:e})}get one(){return this.value?.isOne??this._flags?.one}set one(e){this.updateFlags({one:e})}get negativeOne(){return this.value?.isNegativeOne??this._flags?.negativeOne}set negativeOne(e){this.updateFlags({negativeOne:e})}get infinity(){return this.value?.isInfinity??this._flags?.infinity}set infinity(e){this.updateFlags({infinity:e})}get finite(){return this.value?.isFinite??this._flags?.finite}set finite(e){this.updateFlags({finite:e})}get NaN(){return this.value?.isNaN??this._flags?.NaN}set NaN(e){this.updateFlags({NaN:e})}get even(){return this.value?.isEven??this._flags?.even}set even(e){this.updateFlags({even:e})}get odd(){return this.value?.isOdd??this._flags?.odd}set odd(e){this.updateFlags({odd:e})}get prime(){let e=this._value;return e?!e.isInteger||e.isNonPositive?!1:Wn(E(e)??NaN):this._flags?.prime}set prime(e){this.updateFlags({prime:e})}get composite(){let e=this._value;return e?!e.isInteger||e.isNonPositive?!1:!Wn(E(e)??NaN):this._flags?.composite}set composite(e){this.updateFlags({composite:e})}updateFlags(e){if(this.constant)throw Error("The flags of constant cannot be changed");if(this.domain?.isNumeric===!1)throw Error("Flags only apply to numeric domains");let i=0,t=!0;for(let r in Object.keys(e))if(i+=1,this._value&&e[r]!==void 0)switch(r){case"number":t=this._value.isNumber===e.number;break;case"integer":t=this._value.isInteger===e.integer;break;case"rational":t=this._value.isRational===e.rational;break;case"algebraic":t=this._value.isAlgebraic===e.algebraic;break;case"real":t=this._value.isReal===e.real;break;case"extendedReal":t=this._value.isExtendedReal===e.extendedReal;break;case"complex":t=this._value.isComplex===e.complex;break;case"extendedComplex":t=this._value.isExtendedComplex===e.extendedComplex;break;case"imaginary":t=this._value.isImaginary===e.imaginary;break;case"positive":t=this._value.isPositive===e.positive;break;case"nonPositive":t=this._value.isNonPositive===e.nonPositive;break;case"negative":t=this._value.isNegative===e.negative;break;case"nonNegative":t=this._value.isNonNegative===e.nonNegative;break;case"zero":t=this._value.isZero===e.zero;break;case"notZero":t=this._value.isNotZero===e.notZero;break;case"one":t=this._value.isOne===e.one;break;case"negativeOne":t=this._value.isNegativeOne===e.negativeOne;break;case"infinity":t=this._value.isInfinity===e.infinity;break;case"NaN":t=this._value.isNaN===e.NaN;break;case"finite":t=this._value.isFinite===e.finite;break;case"even":t=this._value.isEven===e.even;break;case"odd":t=this._value.isOdd===e.odd;break;case"prime":t=this._value.isPrime===e.prime;break;case"composite":t=this._value.isComposite===e.composite;break}i>0&&(t||(this._defValue=void 0,this._value=void 0),this._domain=this._engine.Numbers,this._flags?this._flags={...this._flags,...It(e)}:this._flags=It(e))}};function Yd(n){return Object.fromEntries(Object.entries(n).filter(([e,i])=>i!==void 0))}function It(n){let e={...n};return(n.zero||n.one||n.negativeOne)&&(e.zero=n.zero&&!n.one&&!n.negativeOne,e.notZero=!n.zero||n.one||n.negativeOne,e.one=n.one&&!n.zero&&!n.negativeOne,e.negativeOne=n.negativeOne&&!n.zero&&!n.one,e.infinity=!1,e.NaN=!1,e.finite=!0,e.integer=!0,e.finite=!0,e.infinity=!1,e.NaN=!1,e.even=n.one,e.odd=!n.one,e.prime=!1,e.composite=!1),e.zero&&(e.positive=!1,e.negative=!1,e.nonPositive=!0,e.nonNegative=!0),e.notZero===!0&&(e.imaginary||(e.real=!0),e.zero=!1),e.one&&(e.positive=!0),e.negativeOne&&(e.nonPositive=!0),(e.positive||e.nonNegative)&&(e.negativeOne=!1),e.positive?(e.nonPositive=!1,e.negative=!1,e.nonNegative=!0):e.nonPositive?(e.positive=!1,e.negative=e.notZero,e.nonNegative=!e.zero):e.negative?(e.positive=!1,e.nonPositive=e.notZero,e.nonNegative=!1):e.nonNegative&&(e.positive=e.notZero,e.nonPositive=!e.zero,e.negative=!1),(e.positive||e.negative||e.nonPositive||e.nonNegative)&&(e.number=!0,e.finite?e.real=!0:e.finite||(e.complex=!0),e.imaginary=!1),e.finite&&(e.number=!0,e.complex=!0,e.infinity=!1,e.NaN=!1),e.infinity&&(e.finite=!1,e.NaN=!1),e.infinity===!1&&(e.extendedComplex=!1,e.extendedReal=!1),n.even&&(e.odd=!1),n.odd&&(e.even=!1),e.integer&&(e.rational=!0),e.rational&&(e.algebraic=!0),e.algebraic&&(e.real=!0),e.real&&(e.complex=!0),e.imaginary&&(e.complex=!0),e.complex&&(e.number=!0),e.real&&e.infinity!==!1&&(e.extendedReal=!0),e.complex&&e.infinity!==!1&&(e.extendedComplex=!0),(e.even||e.infinity||e.NaN||e.negative||e.imaginary||e.integer===!1)&&(e.prime=!1),e.number&&e.prime&&(e.composite=!1),e}function Gr(n){if(!n)return{};let e={};if(!n.isNumeric)return e.number=!1,e.integer=!1,e.rational=!1,e.algebraic=!1,e.real=!1,e.extendedReal=!1,e.complex=!1,e.extendedComplex=!1,e.imaginary=!1,e.positive=!1,e.nonPositive=!1,e.negative=!1,e.nonNegative=!1,e.zero=!1,e.notZero=!1,e.one=!1,e.negativeOne=!1,e.infinity=!1,e.NaN=!1,e.odd=!1,e.even=!1,e.prime=!1,e.composite=!1,e;let i=n.base;return e.number=!0,i==="Integers"&&(e.integer=!0),i==="RationalNumbers"&&(e.rational=!0),i==="AlgebraicNumbers"&&(e.algebraic=!0),i==="TranscendentalNumbers"&&(e.algebraic=!1,e.real=!0),i==="ExtendedRealNumbers"&&(e.extendedReal=!0),i==="RealNumbers"&&(e.real=!0),i==="ImaginaryNumbers"&&(e.imaginary=!0),i==="ExtendedComplexNumbers"&&(e.extendedComplex=!0),i==="ComplexNumbers"&&(e.complex=!0),i==="PositiveNumbers"&&(e.notZero=!0,e.real=!0,e.positive=!0),i==="NegativeNumbers"&&(e.notZero=!0,e.real=!0,e.negative=!0),i==="NonNegativeNumbers"&&(e.real=!0,e.positive=!0),i==="NonPositiveNumbers"&&(e.real=!0,e.negative=!0),i==="PositiveIntegers"&&(e.notZero=!0,e.integer=!0,e.positive=!0),i==="NegativeNumbers"&&(e.notZero=!0,e.integer=!0,e.negative=!0),i==="NonNegativeNumbers"&&(e.integer=!0,e.positive=!0),i==="NonPositiveNumbers"&&(e.integer=!0,e.negative=!0),Yd(It(e))}var Qe=class{constructor(e,i,t){if(!e.context)throw Error("No context available");this.engine=e,this.scope=e.context;let r=t.idempotent??!1,u=t.involution??!1;if(r&&u)throw new Error(`Function Definition "${i}": the 'idempotent' and 'involution' flags are mutually exclusive`);if(this.name=i,this.description=t.description,this.wikidata=t.wikidata,this.threadable=t.threadable??!1,this.associative=t.associative??!1,this.commutative=t.commutative??!1,this.idempotent=r,this.involution=u,this.inert=t.inert??!1,this.numeric=t.numeric??!1,this.pure=t.pure??!0,this.complexity=t.complexity??xn,this.hold=t.hold??"none",t.at&&(this.at=t.at),t.iterator&&(this.iterator=t.iterator),t.size&&(this.size=t.size),t.keys&&(this.keys=t.keys),t.indexOf&&(this.indexOf=t.indexOf),t.at&&!t.size&&(this.size=o=>{let s=t.at,a=0;for(;s(o,a)!==void 0;)a++;return a}),t.at&&!t.iterator&&(this.iterator=(o,s=1,a=-1)=>{let l=t.at,f=s;return{next(){if(a>=0&&f>=s+a)return{done:!0,value:void 0};let d=l(o,f);return d===void 0?{done:!0,value:void 0}:(f++,{done:!1,value:d})}}}),this.iterator&&!t.indexOf&&(this.indexOf=(o,s)=>{let a=1,l=this.iterator(o),f=l.next();for(;!f.done;){if(s.isEqual(f.value))return a;a++,f=l.next()}}),this.inert){if(t.hold)throw Error(`Function Definition "${i}": an inert function should not have a hold`);if(this.hold="rest",t.signature){let o=t.signature;if("simplify"in o||"evaluate"in o||"N"in o||"evalDimension"in o||"sgn"in o||"compile"in o)throw Error(`Function Definition "${i}": an inert function should only have 'canonical' or 'codomain' handlers`)}if(this.threadable)throw Error(`Function Definition "${i}": an inert function should not be threadable`);if(this.associative)throw Error(`Function Definition "${i}": an inert function should not be associative`);if(this.commutative)throw Error(`Function Definition "${i}": an inert function should not be commutative`);if(this.idempotent)throw Error(`Function Definition "${i}": an inert function should not be idempotent`);if(this.involution)throw Error(`Function Definition "${i}": an inert function should not be involution`);if(!this.pure)throw Error(`Function Definition "${i}": an inert function should be pure`)}if(t.signature){let o=t.signature,s,a,l,f,d=!1;if(o.domain){let m=e.domain(o.domain);if(!m.isValid)throw Error(`Function Definition "${i}": invalid domain ${JSON.stringify(o.domain)}`);[s,a,l,f]=ct(e.domain(m))}else o.params||o.result?(s=o.params?.map(m=>e.domain(m))??[],a=o.optParams?.map(m=>e.domain(m))??[],l=o.restParam?e.domain(o.restParam):void 0,typeof o.result=="function"?f=o.result:o.result?f=e.domain(o.result):t.numeric?f=e.Numbers:f=e.Anything):t.numeric?(d=!0,s=[],a=[],l=e.Numbers,f=e.Numbers):(d=!0,s=[],a=[],l=e.Anything,f=e.Anything);let c;if(o.evaluate&&typeof o.evaluate!="function"){let m=e.box(o.evaluate,{canonical:!1});if(!m.isValid)throw Error(`Invalid function ${m.toString()}`);let D=ci(m);c=(h,g)=>D(g),c.toString=()=>m.toString()}else c=o.evaluate;t.signature.result&&(typeof t.signature.result=="function"?f=t.signature.result:f=e.domain(t.signature.result)),this.signature={inferredSignature:d,params:s,optParams:a,restParam:l||void 0,result:f,canonical:o.canonical,simplify:o.simplify,evaluate:c,N:o.N,evalDimension:o.evalDimension,sgn:o.sgn,compile:o.compile}}else t.numeric?this.signature={inferredSignature:!0,params:[],optParams:[],restParam:e.Numbers,result:e.Numbers}:this.signature={inferredSignature:!0,params:[],optParams:[],restParam:e.Anything,result:e.Anything}}reset(){}};function jr(n,e,i){return i instanceof Qe?i:new Qe(n,e,i)}function yo(n){if(n==="all")return yo(["core","control-structures","logic","collections","relop","numeric","arithmetic","trigonometry","algebra","calculus","polynomials","combinatorics","linear-algebra","statistics","dimensions","units","physics","other"]);typeof n=="string"&&(n=[n]);let e=[];for(let i of n){let t=Qd[i];if(!t)throw Error(`Unknown library category ${i}`);Array.isArray(t)?e.push(...t):e.push(t)}return Object.freeze(e)}var Qd={algebra:[],arithmetic:[...Ga,...Qa],calculus:Za,collections:[ol,Ja,ia()],combinatorics:[],"control-structures":Wa,core:Oa,dimensions:[],domains:[],"linear-algebra":Xa,logic:rl,numeric:[],other:[],relop:na,polynomials:ul,physics:{Mu0:{description:"Vaccum permeability",constant:!0,wikidata:"Q1515261",domain:"RealNumbers",value:125663706212e-17}},statistics:sl,trigonometry:al,units:[]};function Xd(n){if(n=n.normalize(),Ee(n))return n;throw new Error(`Invalid definition name "${n}": ${tn(n)}`)}function Fo(n,e){var t;if(!n.context)throw Error("No context available");(t=n.context).ids??(t.ids=new Map);let i=n.context.ids;n.strict;for(let[r,u]of Object.entries(e))if(r=Xd(r),Co(u)){let o=jr(n,r,u);if(i.has(r))throw new Error(`Duplicate function definition ${r}:
${JSON.stringify(i.get(r))}
${JSON.stringify(u)}`);i.set(r,o)}else if(Zr(u)){let o=new pe(n,r,u);if(n.strict&&u.wikidata){for(let[s,a]of i)if(a.wikidata===u.wikidata)throw new Error(`Duplicate entries with wikidata "${u.wikidata}": "${r}" and "${a.name}"`)}if(i.has(r))throw new Error(`Duplicate symbol definition "${r}"`);i.set(r,o)}else{let o=new pe(n,r,{value:n.box(u)});i.set(r,o)}}function Zr(n){return n==null||typeof n!="object"||n instanceof L?!1:"domain"in n||"value"in n||"constant"in n}function Co(n){return n==null||typeof n!="object"||n instanceof L?!1:"signature"in n||"complexity"in n}var cl=he(De(),1);function hi(n){return Number.isInteger(n)&&n!==0?Math.floor(Math.log2(Math.abs(n))/Math.log2(10))+(n>0?1:2):2}function Ao(n){if(n.symbol)return 1;let e=n.numericValue;if(e!==null){if(n.isZero)return 1;if(n.isInteger)return hi(E(n));if(U(e))return H(e)?hi(e[0])+hi(e[1])+1:hi(Number(e[0]))+hi(Number(e[1]))+1;if(e instanceof cl.Complex)return hi(e.re)+hi(e.im)+1;if(n.isNumber)return 2}let i=n.head,t=2;return typeof i=="string"?["Add","Divide"].includes(i)?t=3:["Subtract","Negate"].includes(i)?t=4:["Square","Sqrt","Multiply","Root"].includes(i)?t=5:["Power"].includes(i)?t=6:["Ln","Exp","Log"].includes(i)?t=7:["Arcsin","Arccos","Arctan","Arcsec"," Arccsc","Arsinh","Arcosh","Artanh","Arcsech","Arcsch","Cosh","Cos","Csc","Csch","Sec","Sin","Sinh","Tan","Tanh"].includes(i)?t=9:t=10:t=Ao(i),t+(n.ops?.reduce((r,u)=>r+Ao(u),0)??0)}var Bo=Ao;var Yi=class n{constructor(e){e?e instanceof n?this._items=new Map(e._items):this._items=new Map(e):this._items=new Map}has(e){for(let i of this._items.keys())if(i.isSame(e))return!0;return!1}get(e){for(let[i,t]of this._items)if(i.isSame(e))return t}clear(){this._items.clear()}set(e,i){for(let t of this._items.keys())if(t.isSame(e)){this._items.set(t,i);return}this._items.set(e,i)}delete(e){this._items.delete(e)}[Symbol.iterator](){return this._items.entries()}entries(){return this._items.entries()}};var ni=class n extends L{constructor(e,i,t){super(e,t?.metadata),Ee(i),`${i}${tn(i)}`,this._id=i,this._def=t?.def??void 0,t?.canonical??!0?this._def?this._scope=e.context:this.bind():this._scope=null}get hash(){return this._hash===void 0&&(this._hash=Ae(this._id)),this._hash}get isPure(){return!0}get json(){let e=this._scope?this.wikidata:void 0;return Br(this.engine,this._id,{latex:this._latex,wikidata:e})}get scope(){return this._scope}get isConstant(){let e=this._def??this.engine.lookupSymbol(this._id,this.wikidata);return!(e instanceof pe)||e.constant}bind(){this._scope=this.engine.context;let e=this.engine.lookupSymbol(this._id)??this.engine.lookupFunction(this._id);if(e){this._def=e;return}this._def=this.engine.defineSymbol(this._id,{domain:void 0,inferred:!0}),this._id=this._def.name}reset(){this._def?.reset(),this._def=void 0}get isCanonical(){return this._scope!==null}set isCanonical(e){this._scope=e?this.engine.context:null,this._def=void 0}get canonical(){return this._scope?this:this.engine.box(this._id)}solve(e){return e.length!==1?null:e.includes(this.symbol)?[this.engine.Zero]:null}get complexity(){return 7}get head(){return"Symbol"}get symbol(){return this._id}get isNothing(){return this._id==="Nothing"}get baseDefinition(){return this._def===void 0&&this.bind(),this._def??void 0}get symbolDefinition(){return this._def===void 0&&this.bind(),this._def instanceof pe?this._def:void 0}get functionDefinition(){return this._def===void 0&&this.bind(),this._def instanceof Qe?this._def:void 0}infer(e){let i=this.engine.lookupSymbol(this._id)??this.engine.lookupFunction(this._id);if(!i){let t=this.engine.swapScope(this._scope??this.engine.context);return this._def=this.engine.defineSymbol(this._id,{domain:e,inferred:!0}),this.engine.swapScope(t),!0}return i instanceof pe&&i.inferredDomain?(i.domain=At(i.domain,e),!0):!1}get value(){let e=this._def;if(e&&e instanceof pe)return e.value?.value}set value(e){let i=this.engine;i.forget(this._id);let t;if(typeof e=="boolean"&&(e=e?i.True:i.False),typeof e=="string"&&(e=i.string(e)),typeof e=="object")if("re"in e&&"im"in e)e=i.complex(e.re,e.im);else if("num"in e&&"denom"in e)e=i.number([e.num,e.denom]);else if(Array.isArray(e))e=i._fn("List",e.map(u=>i.box(u)));else throw new Error(`Invalid value for symbol ${this._id}: ${e}`);if(e!==void 0&&(t=i.box(e).evaluate()),t?.domain?.isFunction){this.engine.lookupSymbol(this._id),this._def=i.defineFunction(this._id,{signature:{...mt(t.domain),evaluate:t}});return}let r=this.engine.lookupSymbol(this._id);if(r&&r instanceof pe)r.value=t;else{let u=t?.domain;u?.isNumeric&&(u=i.Numbers),this._def=i.defineSymbol(this._id,{value:t,domain:u})}}get domain(){let e=this._def;if(e){if(e instanceof Qe)return ar(this.engine,e.signature);if(e instanceof pe)return e.domain??void 0}}set domain(e){if(!this._def)return;if(this._id[0]==="_")throw new Error(`The domain of the wildcard "${this._id}" cannot be changed`);let i=this.engine.domain(e);i.isFunction?(this.engine.forget(this._id),this._def=this.engine.defineFunction(this._id,{signature:mt(i)})):this._def instanceof pe?this._def.domain=i:(this.engine.forget(this._id),this._def=this.engine.defineSymbol(this._id,{domain:i}))}get sgn(){let e=this._def;if(!e||!(e instanceof pe))return null;let i=e.value;if(i&&i!==this){let t=i.sgn;if(t!==void 0)return t}if(e.zero===!0)return 0;if(e.positive===!0)return 1;if(e.negative===!0)return-1}has(e){return typeof e=="string"?this._id===e:e.includes(this._id)}isSame(e){return this===e?!0:e instanceof n?this._id===e._id:!1}match(e,i){return Ui(this,e,i)}isEqual(e){if(!this.isCanonical)return this.canonical.isEqual(e);if(e=e.canonical,this===e)return!0;if(e.symbol!==null)return e.symbol===this._id;let i=this.symbolDefinition?.value?.N();if(i)return i.isEqual(e.N());if(e.isZero){if(this.isZero)return!0;if(this.isNotZero)return!1}return this.isZero&&e.isNotZero?!1:this.engine.ask(["Equal",this,e]).length>0?!0:(this.engine.ask(["NotEqual",this,e]).length>0,!1)}isLess(e){if(e.symbol!==null&&e.symbol===this._id)return!1;let i=this.symbolDefinition?.value?.N();if(i)return i.isLess(e.N());if(e.isZero){let t=this.sgn;if(t===null)return!1;if(t!==void 0)return t<0}}isLessEqual(e){if(e.symbol!==null&&e.symbol===this._id)return!0;let i=this.symbolDefinition?.value?.N();if(i)return i.isLessEqual(e.N());if(e.isZero){let t=this.sgn;if(t===null)return!1;if(t!==void 0)return t<=0}return this.isLess(e)||this.isEqual(e)}isGreater(e){if(e.symbol!==null&&e.symbol===this._id)return!1;let i=this.symbolDefinition?.value?.N();if(i)return i.isGreater(e.N());if(e.isZero){let t=this.sgn;if(t===null)return!1;if(t!==void 0)return t>0}}isGreaterEqual(e){if(e.symbol!==null&&e.symbol===this._id)return!0;let i=this.symbolDefinition?.value?.N();if(i)return i.isGreaterEqual(e.N());if(e.isZero){let t=this.sgn;if(t===null)return!1;if(t!==void 0)return t>=0}return this.isGreater(e)||this.isEqual(e)}get isFunction(){return!!this.functionDefinition}get isZero(){return this.symbolDefinition?.zero}get isNotZero(){return this.symbolDefinition?.notZero}get isOne(){return this.symbolDefinition?.one}get isNegativeOne(){return this.symbolDefinition?.negativeOne}get isOdd(){return this.symbolDefinition?.odd}get isEven(){return this.symbolDefinition?.even}get isPrime(){return this.symbolDefinition?.prime}get isComposite(){return this.symbolDefinition?.composite}get isInfinity(){return this.symbolDefinition?.infinity}get isNaN(){return this.symbolDefinition?.NaN}get isPositive(){return this.symbolDefinition?.positive}get isNonPositive(){return this.symbolDefinition?.nonPositive}get isNegative(){return this.symbolDefinition?.negative}get isNonNegative(){return this.symbolDefinition?.nonNegative}get isNumber(){return this.symbolDefinition?.number}get isInteger(){return this.symbolDefinition?.integer}get isRational(){return this.symbolDefinition?.rational}get isAlgebraic(){return this.symbolDefinition?.rational}get isReal(){return this.symbolDefinition?.real}get isExtendedReal(){return this.symbolDefinition?.extendedReal}get isComplex(){return this.symbolDefinition?.complex}get isImaginary(){return this.symbolDefinition?.imaginary}simplify(e){let i=this.symbolDefinition;return i?.holdUntil==="simplify"&&i.value?i.value.simplify(e):e?.rules?this.replace(e.rules)??this:this}evaluate(e){let i=this.symbolDefinition;if(i){if(e?.numericMode)return i.holdUntil==="never"?this:i.value?.N(e)??this;if(i.holdUntil==="simplify"||i.holdUntil==="evaluate")return i.value?.evaluate(e)??this}return this}N(e){let i=this.symbolDefinition;return i&&i.holdUntil==="never"?this:i?.value?.N(e)??this}replace(e,i){return cr(this,e,i)}subs(e,i){return e[this._id]===void 0?i?.canonical?this.canonical:this:this.engine.box(e[this._id],i)}};function vo(n,e){let i=n.lookupSymbol(e);return i?.holdUntil==="never"&&i.value?i.value:new ni(n,e,{canonical:!0,def:i})}var kt="\x1B[0m";var ml="\x1B[33m";var pl="\x1B[36;1m",No="\x1B[101;97m";var Xi=class n{constructor(e){this._cache={};this._commonSymbols={True:null,False:null,All:null,Nothing:null,None:null,Undefined:null,Pi:null,ImaginaryUnit:null,ExponentialE:null};this._commonNumbers={"-5":null,"-4":null,"-3":null,"-2":null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,12:null,36:null};this._commonDomains={Anything:null,Void:null,NothingDomain:null,Booleans:null,Strings:null,Domains:null,Symbols:null,Integers:null,RationalNumbers:null,AlgebraicNumbers:null,RealNumbers:null,ExtendedRealNumbers:null,ImaginaryNumbers:null,ComplexNumbers:null,ExtendedComplexNumbers:null,Numbers:null,PositiveIntegers:null,TranscendentalNumbers:null,PositiveNumbers:null,Functions:null,NumericFunctions:null,RealFunctions:null,LogicOperators:null,Predicates:null};if(e!==void 0&&typeof e!="object")throw Error("Unexpected argument");this.strict=!0,this._jsonSerializationOptions={exclude:[],shorthands:["function","symbol","string","dictionary","number"],metadata:[],precision:"max",repeatingDecimals:!0},this._useRawJsonSerializationOptions=!1,this._rawJsonSerializationOptions={exclude:[],shorthands:["function","symbol","string","dictionary","number"],metadata:[],precision:"max",repeatingDecimals:!1},this._stats={highwaterMark:0,symbols:new Set,expressions:new Set},this._numericMode=e?.numericMode??"auto",this._precision=Math.max(e?.numericPrecision??100,Math.floor(oi)),this._bignum=y.clone({precision:this._precision}),this.tolerance=e?.tolerance??Ii,this._angularUnit="rad",this.Zero=new me(this,0),this.One=new me(this,1),this.Half=new me(this,[1,2]),this.NegativeOne=new me(this,-1),this.NaN=new me(this,Number.NaN),this.PositiveInfinity=new me(this,Number.POSITIVE_INFINITY),this.NegativeInfinity=new me(this,Number.NEGATIVE_INFINITY),this.I=new me(this,Qi.Complex.I),this.ComplexInfinity=new me(this,Qi.Complex.INFINITY),this.reset(),this.context={assumptions:new Yi,timeLimit:2,memoryLimit:1,recursionLimit:1024,iterationLimit:Number.POSITIVE_INFINITY};for(let t of n.getStandardLibrary("domains"))Fo(this,t);for(let t of Object.keys(this._commonDomains))this._commonDomains[t]&&!this._commonDomains[t].symbolDefinition?this._commonDomains[t].bind():this._commonDomains[t]=new Rn(this,mr[t]??t);this.Anything=this._commonDomains.Anything,this.Void=this._commonDomains.Void,this.Strings=this._commonDomains.Strings,this.Booleans=this._commonDomains.Booleans,this.Numbers=this._commonDomains.Numbers;let i=e?.ids??n.getStandardLibrary();for(let t of i)Fo(this,t);for(let t of Object.keys(this._commonSymbols)){let r=new ni(this,t,{canonical:!0});r.bind(),this._commonSymbols[t]=r}this.True=this._commonSymbols.True,this.False=this._commonSymbols.False,this.Pi=this._commonSymbols.Pi,this.E=this._commonSymbols.ExponentialE,this.Nothing=this._commonSymbols.Nothing,this.pushScope()}static getStandardLibrary(e="all"){return yo(e)}get latexDictionary(){return this.latexSyntax.dictionary}set latexDictionary(e){this.latexSyntax.dictionary=e}reset(){this._bignum,this._BIGNUM_NEGATIVE_ONE=this.bignum(-1),this._BIGNUM_NAN=this.bignum(NaN),this._BIGNUM_ZERO=this.bignum(0),this._BIGNUM_ONE=this.bignum(1),this._BIGNUM_TWO=this.bignum(2),this._BIGNUM_HALF=this._BIGNUM_ONE.div(this._BIGNUM_TWO),this._BIGNUM_PI=this._BIGNUM_NEGATIVE_ONE.acos();let e=this._stats.symbols.values(),i=this._stats.expressions.values();this._stats.symbols=new Set,this._stats.expressions=new Set;for(let r of e)r.reset();for(let r of i)r.reset();for(let r of Object.values(this._commonDomains))r?.reset();for(let r of Object.values(this._commonSymbols))r?.reset();let t=this.context;for(;t;){if(t.ids)for(let[r,u]of t.ids)u.reset();t=t.parentScope??null}for(let r of Object.keys(this._cache))this._cache[r].value&&(this._cache[r].purge?this._cache[r].value=this._cache[r].purge(this._cache[r].value):delete this._cache[r])}_register(e){this._stats.highwaterMark+=1}_unregister(e){}get stats(){let e=this._stats.expressions;return this._stats.expressions=null,this._stats.expressions=e,{...this._stats}}get precision(){return this._numericMode==="machine"||this._numericMode==="complex"?Math.floor(oi):this._precision}set precision(e){e==="machine"&&(e=Math.floor(oi));let i=this._precision;if(e!==i){if(typeof e!="number"||e<=0)throw Error('Expected "machine" or a positive number');this._latexSyntax?.updateOptions({precision:e,avoidExponentsInRange:[-6,e]}),this._precision=Math.max(e,Math.floor(oi)),this.jsonSerializationOptions.precision>this._precision&&(this.jsonSerializationOptions={precision:this._precision}),this._numericMode!=="auto"&&this._numericMode!=="bignum"&&this._precision>Math.floor(oi)&&(this._numericMode="auto"),this._bignum=this._bignum.config({precision:this._precision}),this.reset()}}get numericMode(){return this._numericMode}set numericMode(e){if(e!==this._numericMode){if(typeof e!="string")throw Error("Expected a string");this._numericMode=e,(e==="complex"||e==="machine")&&(this._precision=Math.floor(oi)),this._latexSyntax&&this.latexSyntax.options.precision>this._precision&&this.latexSyntax.updateOptions({precision:this._precision}),this.jsonSerializationOptions.precision>this._precision&&(this.jsonSerializationOptions={precision:this._precision}),this.reset()}}get angularUnit(){return this._angularUnit}set angularUnit(e){if(e!==this._angularUnit){if(typeof e!="string")throw Error("Expected a string");this._angularUnit=e,this.reset()}}get timeLimit(){let e=this.context;for(;e;){if(e.timeLimit!==void 0)return e.timeLimit;e=e.parentScope??null}return 2}get iterationLimit(){let e=this.context;for(;e;){if(e.iterationLimit!==void 0)return e.iterationLimit;e=e.parentScope??null}return 1024}get recursionLimit(){let e=this.context;for(;e;){if(e.recursionLimit!==void 0)return e.recursionLimit;e=e.parentScope??null}return 1024}get tolerance(){return this._tolerance}set tolerance(e){typeof e=="number"&&Number.isFinite(e)?this._tolerance=Math.max(e,0):this._tolerance=Ii,this._bignumTolerance=this.bignum(this._tolerance)}chop(e){return typeof e=="number"&&Math.abs(e)<=this._tolerance||e instanceof y&&e.abs().lte(this._bignumTolerance)||e instanceof Qi.Complex&&Math.abs(e.re)<=this._tolerance&&Math.abs(e.im)<=this._tolerance?0:e}bignum(e){if(typeof e=="bigint")return new this._bignum(e.toString());try{return new this._bignum(e)}catch(i){console.error(i)}return this._BIGNUM_NAN}complex(e,i){return e instanceof y&&(e=e.toNumber()),i instanceof y&&(i=i.toNumber()),new Qi.Complex(e,i)}isBignum(e){return e instanceof y}isComplex(e){return e instanceof Qi.Complex}get latexSyntax(){if(!this._latexSyntax){let e=this.precision;this._latexSyntax=new at({computeEngine:this,precision:e,avoidExponentsInRange:[-6,e],onError:i=>{throw new Error(JSON.stringify(i[0].message))}})}return this._latexSyntax}static getLatexDictionary(e="all"){return at.getDictionary(e)}get costFunction(){return this._cost??Bo}set costFunction(e){typeof e!="function"&&(this._cost=Bo),this._cost=e}lookupSymbol(e,i,t){if(!this.strict){for(t??(t=this.context??void 0);t;){let u=t.ids?.get(e);if(u&&u instanceof pe)return u;t=t.parentScope}return}if(typeof e!="string")throw Error("Expected a string");if(e.length===0||!this.context)return;let r=t??this.context;if(i)for(t=r;t;){if(t.ids){for(let[u,o]of t.ids)if(o instanceof pe&&o.wikidata===i)return o}t=t.parentScope}for(t=r;t;){let u=t.ids?.get(e);if(u instanceof pe)return u;t=t.parentScope}}lookupFunction(e,i){if(typeof e=="string"&&this.context)for(i??(i=this.context);i;){let t=i.ids?.get(e);if(t instanceof Qe)return t;i=i.parentScope}}defineSymbol(e,i){if(!this.context)throw Error("Symbol cannot be defined: no scope available");if(e.length===0||!Ee(e))throw Error(`Invalid identifier "${e}": ${tn(e)}}`);return this._defineSymbol(e,i)}_defineSymbol(e,i){var r;(r=this.context).ids??(r.ids=new Map);let t=new pe(this,e,i);return t.name&&this.context.ids.set(t.name,t),t}defineFunction(e,i){if(!this.context)throw Error("Function cannot be defined: no scope available");if(e.length===0||!Ee(e))throw Error(`Invalid identifier "${e}": ${tn(e)}}`);return this._defineFunction(e,i)}_defineFunction(e,i){var r;(r=this.context).ids??(r.ids=new Map);let t=jr(this,e,i);return t.name&&this.context.ids.set(t.name,t),t}pushScope(e){if(this.context===null)throw Error("No parent scope available");return this.context={timeLimit:this.context.timeLimit,memoryLimit:this.context.memoryLimit,recursionLimit:this.context.recursionLimit,iterationLimit:this.context.iterationLimit,...e??{},parentScope:this.context,assumptions:new Yi(this.context.assumptions)},this}popScope(){if(!this.context)throw Error("No scope available");return this.context=this.context.parentScope??null,this.context,this}swapScope(e){let i=this.context;return this.context=e,this.context,i}resetContext(){if(this.context){for(let[e,i]of this.context.ids??[])if(i instanceof pe)i.constant||(i.value=void 0);else if(i instanceof Qe){let t=i.signature;i.signature={...t,evaluate:void 0,N:void 0,simplify:void 0,canonical:void 0}}}}_printScope(e,i,t=0){if(e??(e={details:!1,maxDepth:1}),i??(i=this.context),!i||e.maxDepth&&t>e.maxDepth)return null;let r=`${ml}[undefined]${kt}`;if(t===0?console.group("current scope - level 0"):console.groupCollapsed(i.parentScope?`scope - level ${t}`:`root scope - level ${t}`),i.ids){let u=0;for(let[o,s]of i.ids){let a=`${pl}${o}${kt}`;try{if(s instanceof pe){let l=s.value?.isValid?s.value.toString():s.value?`${No}${s.value.toString()}${kt}`:r;console.info(`${a}: ${s.domain?.toString()??r} = ${l}`)}else s instanceof Qe&&(typeof s.signature.evaluate=="function"?console.info(`${a}(): ${e.details?s.signature.evaluate.toString():"[native-code]"}`):s.signature.evaluate===void 0?console.info(`${a}(): ${r}`):console.info(`${a}(): ${s.toString()}`));u===11&&console.groupCollapsed(`... and ${i.ids.size-u} more`),u+=1}catch(l){console.info(`${a}: ${No}${l.message}${kt}`)}}u>=11&&console.groupEnd()}if(i.assumptions){let u=[...i.assumptions.entries()].map(([o,s])=>`${o}: ${s}`);if(u.length>0){console.groupCollapsed(`${u.length} assumptions)`);for(let o of u)console.info(o);console.groupEnd()}}return i.parentScope&&this._printScope(e,i.parentScope,t+1),console.groupEnd(),this.context}declare(e,i){if(typeof e!="string"||i===void 0){for(let[o,s]of Object.entries(e))this.declare(o,s);return this}let[t,r]=ju(e);if(r!==void 0)throw Error(`Unexpected arguments with ${e}. Use 'ce.assign()' instead to assign a value, or a use a function definition with 'ce.declare()'.`);if(t==="Nothing")return this;if(this.context?.ids?.get(t)){let o=this.context.ids.get(t);if(o instanceof pe&&o.inferredDomain)return Zr(i)?o.update(i):(o.domain=this.domain(i),o.inferredDomain=!1),this;throw Error(`Symbol "${t}" has already been declared in the current scope`)}let u=i;if(!u)throw Error(`Expected a definition for ${t}`);if(Zr(u))return this.defineSymbol(t,u),this;if(Co(u))return this.defineFunction(t,u),this;{let o=this.domain(u);if(o.isValid)if(o.isFunction)this.defineFunction(t,{signature:mt(o)});else{if(r)throw Error(`Unexpected arguments with domain for "${t}"`);this.defineSymbol(t,{domain:o})}else throw Error(`Invalid argument for "${t}": use a domain, a FunctionDefinition or a SymbolDefinition`)}return this}assign(e,i){if(typeof e=="object"){for(let[a,l]of Object.entries(e))this.assign(a,l);return this}let[t,r]=ju(e);if(t==="Nothing")return this;let u=i;if(typeof u=="boolean"&&(u=u?this.True:this.False),typeof u=="string"){let a=u.trim();a.startsWith("$")&&a.endsWith("$")?u=this.parse(a.slice(1,-1),{canonical:!1}):a.startsWith("$$")&&a.endsWith("$$")?u=this.parse(a.slice(2,-2),{canonical:!1}):u=this.string(u)}let o=this.lookupSymbol(t);if(o){if(o.constant)throw Error(`Cannot assign a value to the constant "${t}"`);if(!o.inferredDomain&&_o(u))throw Error(`Cannot assign a function to symbol "${t}"`);let a=o.scope;if(a?.ids?.delete(o.name),!r&&!_o(u))return u==null?o.value=void 0:o.value=this.box(u),a?.ids?.set(o.name,o),this}let s=this.lookupFunction(t);if(s){let a=s.scope;if(a?.ids?.delete(s.name),u==null)return this;if(typeof u=="function"){let d=this.swapScope(a);return this.defineFunction(t,{signature:{evaluate:u}}),this.swapScope(d),this}if(r&&_o(u))throw Error(`Unexpected arguments for "${t}"`);let l=r?this.box(["Function",u,...r]):this.box(u),f=this.swapScope(a);return this.defineFunction(t,{signature:{evaluate:l}}),this.swapScope(f),this}if(u==null)return this.declare(t,{inferred:!0,domain:this.Anything}),this;if(typeof u=="function")return this.defineFunction(t,{signature:{evaluate:u}}),this;if(u instanceof L&&u.domain?.base==="Functions")return this.defineFunction(t,{signature:{evaluate:u}}),this;if(Array.isArray(u)||u instanceof L||r){let a=this.box(u,{canonical:!1});if(a.head==="Function")return a=this.box(["Function",...a.ops,...(r??[]).map(f=>this.symbol(f))]),this.defineFunction(t,{signature:{evaluate:a}}),this;let l=[...a.unknowns].sort();if(l.length===0){let f=a.evaluate();return this.defineSymbol(t,{value:f}),this}if(l.some(f=>/\_[\d]+/.test(f)))return a=this.box(["Function",a]),this.defineFunction(t,{signature:{evaluate:a}}),this;if(r&&r.length>0)return this.pushScope(),a=this.box(["Function",a,...r]),this.popScope(),this.defineFunction(t,{signature:{evaluate:a}}),this;this.pushScope(),u=a.evaluate(),this.popScope()}return this.defineSymbol(t,{value:u}),this}_assign(e,i){let t=this.lookupSymbol(e);if(t)return t.value=this.box(i).evaluate(),this;let r=this.lookupFunction(e);if(r){let u=r.signature;return r.signature={...u,N:void 0,simplify:void 0,canonical:void 0,evaluate:i},this}return`${e}`,this}get assumptions(){if(!this.context)throw Error("No scope available");return this.context.assumptions?this.context.assumptions:(this.context.assumptions=new Yi,this.context.assumptions)}shouldContinueExecution(){return this.deadline===void 0||this.deadline>=Date.now()}checkContinueExecution(){if(!this.shouldContinueExecution())throw new Error("timeout")}cache(e,i,t){if(this._cache[e]===void 0)try{this._cache[e]={build:i,purge:t,value:i()}}catch(r){console.error(`Fatal error building cache "${e}":
	 ${r.toString()}`)}return this._cache[e]?.value}canonical(e){if(!e.every(t=>t instanceof L))return e.map(t=>this.box(t));let i=e;return i.every(t=>t.isCanonical)?i:i.map(t=>t.canonical)}box(e,i){return Ie(this,e,i)}function(e,i,t){return t??(t={}),"canonical"in t||(t.canonical=!0),Tt(this,e,i,t)}error(e,i){i instanceof L?i=this.rawJson(i):i&&Array.isArray(i)&&i[0]==="LatexString"&&((i[1]===void 0||!i[1])&&(i=""),typeof i[1]=="object"&&"str"in i[1]&&!i[1].str&&(i=""));let t;return typeof e=="string"&&(t=this.string(e)),!t&&typeof e!="string"&&(t=new X(this,"ErrorCode",[this.string(e[0]),...e.slice(1).map(r=>this.box(r,{canonical:!1}))])),i?new X(this,"Error",[t,this.box(i,{canonical:!1})],{canonical:!1}):new X(this,"Error",[t],{canonical:!1})}domainError(e,i,t){let r=En(e)?this.domain(e):this.symbol(e),u=i||this.symbol("Undefined");return this.error(["incompatible-domain",r,u],t)}hold(e){return this._fn("Hold",[this.box(e,{canonical:!1})])}add(...e){return vt(this,re(ue(e),"Add"))}neg(e){return bt(e.canonical)}mul(...e){let i=re(ue(e),"Multiply");return Ft(this,i)}div(e,i){return yr(this,e.canonical,i.canonical)}sqrt(e){return Vi(this,e,"evaluate")??this._fn("Power",[e,this.Half])}pow(e,i){return(typeof i=="number"||U(i))&&(i=this.number(i)),wn(this,e,i)}inv(e){if(e.isOne)return this.One;if(e.isNegativeOne)return this.NegativeOne;if(e.isInfinity)return this.Zero;let i=e.numericValue;if(i!==null)return U(i)?this.number(In(i)):typeof i=="number"&&Number.isInteger(i)?this.number([1,i]):i instanceof y&&i.isInteger()?this.number([BigInt(1),R(i)]):this._fn("Divide",[this.One,e]);if(e.head==="Sqrt")return this._fn("Sqrt",[this.inv(e.op1)]);if(e.head==="Divide")return this._fn("Divide",[e.op1,e.op2]);let t=this.NegativeOne;if(e.head==="Power"){if(e.op2.isNegativeOne)return e.op1;t=ce(e.op2),e=e.op1}return t.isNegativeOne?this._fn("Divide",[this.One,e]):this._fn("Power",[e,t])}pair(e,i,t){return new X(this,"Tuple",[e.canonical,i.canonical],{metadata:t,canonical:!0})}tuple(e,i){return new X(this,"Tuple",fe(e.map(t=>typeof t=="number"?this.number(t):t.canonical)),{metadata:i,canonical:!0})}array(e,i){return this.Nothing}string(e,i){return new yn(this,e,i)}symbol(e,i){if(i=i?{...i}:{},"canonical"in i||(i.canonical=!0),e=e.normalize(),e==="NaN")return this.NaN;if(e==="Infinity")return this.PositiveInfinity;if(e==="+Infinity")return this.PositiveInfinity;if(e==="-Infinity")return this.NegativeInfinity;if(e==="Half")return this.Half;if(this.strict&&!Ee(e)){let r=i?.metadata?.latex,u=`'${e}'`;return this.error(["invalid-identifier",{str:tn(e)}],r?["LatexString",`'${r}'`]:u)}if(i?.metadata?.latex!==void 0&&!i.canonical)return new ni(this,e,i);let t=this._commonSymbols[e];return t?!i?.metadata?.wikidata||!t.wikidata||t.wikidata===i.metadata.wikidata?t:i.canonical?vo(this,e):new ni(this,e,i):i.canonical?vo(this,e):new ni(this,e,i)}domain(e,i){if(e instanceof Rn)return e;if(typeof e=="string"){let r=this._commonDomains[e];if(r)return r}if(!this.strict){if(typeof e=="string"){let r=mr[e];if(r)return this.domain(r)}return new Rn(this,e,i)}if(Array.isArray(e)&&e[0]==="Domain"&&(e=e[1]),typeof e=="string"){let r=mr[e];if(r)return this.domain(r);if(!fi(e))throw Error("Expected a domain literal, got "+e);return new Rn(this,e,i)}if(!Array.isArray(e)||e.length===0)throw Error("Expected a valid domain");let t=e[0];if(!Ri.includes(t))throw Error("Expected a domain constructor, got "+t);return new Rn(this,e,i)}number(e,i){if(i=i?{...i}:{},"canonical"in i||(i.canonical=!0),i.metadata===void 0){if(typeof e=="bigint"){if(e===BigInt(1))return this.One;if(e===BigInt(0))return this.Zero;if(e===BigInt(-1))return this.NegativeOne}if(typeof e=="number"){let t=e;if(t===1)return this.One;if(t===0)return this.Zero;if(t===-1)return this.NegativeOne;if(Number.isInteger(t)&&this._commonNumbers[t]!==void 0)return this._commonNumbers[t]===null&&(this._commonNumbers[t]=Rr(this,e)??this.NaN),this._commonNumbers[t];if(Number.isNaN(t))return this.NaN;if(!Number.isFinite(t))return t<0?this.NegativeInfinity:this.PositiveInfinity}}return typeof e=="bigint"&&(e=this.bignum(e)),Rr(this,e,i)??this.NaN}rules(e){return li(this,e)}_fn(e,i,t){return new X(this,e,i,{metadata:t,canonical:!0})}parse(e,i){if(typeof e!="string")return null;let t=this.latexSyntax.parse(Oi(e)??e);return this.box(t,i)}serialize(e,i){if(typeof e=="object"&&"json"in e){let t="engine"in e?e.engine:this;return this.latexSyntax.serialize(this.rawJson(t.box(e,{canonical:!1})),i)}return this.latexSyntax.serialize(e,i)}get latexOptions(){let e=this.latexSyntax;return new Proxy({...this.latexSyntax.options,...this.latexSyntax.serializer.options},{set(i,t,r){return t in i?(e.updateOptions({[t]:r}),!0):!1}})}set latexOptions(e){this.latexSyntax.updateOptions(e)}get jsonSerializationOptions(){if(this._useRawJsonSerializationOptions)return new Proxy(this._rawJsonSerializationOptions,{get(i,t){if(t in i)return i[t]}});let e=this;return new Proxy(this._jsonSerializationOptions,{get(i,t){if(t in i)return i[t]},set(i,t,r){return t in i?(e.jsonSerializationOptions={[t]:r},!0):!1}})}set jsonSerializationOptions(e){e.exclude&&(this._jsonSerializationOptions.exclude=[...e.exclude]),e.shorthands&&(e.shorthands==="all"||e.shorthands.includes("all")?this._jsonSerializationOptions.shorthands=["function","symbol","string","dictionary","number"]:this._jsonSerializationOptions.shorthands=[...e.shorthands]),e.metadata&&(e.metadata==="all"||e.metadata.includes("all")?this._jsonSerializationOptions.metadata=["latex","wikidata"]:this._jsonSerializationOptions.metadata=[...e.metadata]),typeof e.precision=="number"&&e.precision>0&&(this._jsonSerializationOptions.precision=e.precision),typeof e.repeatingDecimals=="boolean"&&(this._jsonSerializationOptions.repeatingDecimals=e.repeatingDecimals)}rawJson(e){let i=this._useRawJsonSerializationOptions;this._useRawJsonSerializationOptions=!0;let t=e.json;return this._useRawJsonSerializationOptions=i,t}ask(e){let i=this.box(e,{canonical:!1}),t=[];for(let[r,u]of this.assumptions){let o=i.match(r,{numericTolerance:this._tolerance});o!==null&&u===!0&&t.push(o)}return t}verify(e){return!1}assume(e){try{return wa(this.box(e,{canonical:!1}))}catch(i){return console.error(i.toString()),"internal-error"}}forget(e){if(!this.context)throw Error("No scope available");if(e===void 0){if(this.context.ids)for(let i of this.context.ids.keys())this.forget(i);this.assumptions.clear();return}if(Array.isArray(e)){for(let i of e)this.forget(i);return}if(typeof e=="string"){if(this.context.ids){let i=this.context.ids.get(e);if(i instanceof pe)i.value=void 0;else if(i instanceof Qe){let t=i.signature;i.signature={...t,evaluate:void 0,N:void 0,simplify:void 0,canonical:void 0}}}for(let[i,t]of this.assumptions)i.symbols.includes(e)&&this.assumptions.delete(i)}}};function _o(n){return typeof n=="function"||n instanceof L&&n.domain?.base==="Functions"}var Kd="0.24.1";globalThis[Symbol.for("io.cortexjs.compute-engine")]={ComputeEngine:Xi.prototype.constructor,version:"0.24.1"};return Fl(ec);})();
/*! Bundled license information:

complex.js/complex.js:
  (**
   * @license Complex.js v2.1.1 12/05/2020
   *
   * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
   * Dual licensed under the MIT or GPL Version 2 licenses.
   **)

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)
*/
Object.assign(exports, ComputeEngine); Object.defineProperty(exports, '__esModule', { value: true });}));
